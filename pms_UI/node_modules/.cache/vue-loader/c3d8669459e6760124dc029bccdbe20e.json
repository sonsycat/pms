{"remainingRequest":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\pms_UI\\src\\views\\system\\room\\index.vue?vue&type=style&index=0&id=1e0424d4&lang=scss&","dependencies":[{"path":"F:\\pms_UI\\src\\views\\system\\room\\index.vue","mtime":1693362206560},{"path":"F:\\pms_UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693361949271},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693362179282},{"path":"F:\\pms_UI\\node_modules\\postcss-loader\\src\\index.js","mtime":1693362110683},{"path":"F:\\pms_UI\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693362152666},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudGFibGVDaGVja2JveHsKICAuZWwtY2hlY2tib3hfX2xhYmVsewogICAgZGlzcGxheTogbm9uZTsKICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiuBA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/system/room","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div ref=\"search\">\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\n      <el-form-item label=\"科室名称\" prop=\"deptRoomName\">\n        <el-input\n          v-model=\"queryParams.deptRoomName\"\n          placeholder=\"请输入科室名称\"\n          clearable\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"科室编码\" prop=\"deptRoomCode\">\n        <el-input\n          v-model=\"queryParams.deptRoomCode\"\n          placeholder=\"请输入科室编码\"\n          clearable\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <orgSearch label=\"所属机构\" :queryParams=\"queryParams\" compCode=\"deptId\" compName=\"deptName\"></orgSearch>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"primary\"\n          icon=\"el-icon-plus\"\n          size=\"mini\"\n          @click=\"handleAdd\"\n          v-hasPermi=\"['system:room:add']\"\n        >新增\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"success\"\n          icon=\"el-icon-edit\"\n          size=\"mini\"\n          :disabled=\"single\"\n          @click=\"handleUpdate\"\n          v-hasPermi=\"['system:room:edit']\"\n        >修改\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          :disabled=\"multiple\"\n          @click=\"handleDelete\"\n          v-hasPermi=\"['system:room:remove']\"\n        >删除\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"warning\"\n          icon=\"el-icon-upload2\"\n          size=\"mini\"\n          :loading=\"exportLoading\"\n          @click=\"handleExport\"\n          v-hasPermi=\"['system:room:export']\"\n        >导出\n        </el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\n    </el-row>\n    </div>\n    <el-table\n      ref=\"indexTable\"\n      v-loading=\"loading\"\n      :height=\"tableHeight\"\n      :data=\"roomList\"\n      :row-style=\"rowStyle\"\n      @row-click=\"rowClick\"\n      @selection-change=\"handleSelectionChange\"> <!--@selection-change=\"handleSelectionChange\"-->\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\"/>\n      <!--<el-table-column align=\"center\" width=\"80\" label=\"选择\">\n        <template slot-scope=\"scope\">\n          <el-checkbox-group v-model=\"checkList\" class=\"tableCheckbox\">\n          \t<el-checkbox :label=\"scope.row.deptRoomCode\" @change=\"checkBoxChange(scope.row)\">1</el-checkbox>\n          </el-checkbox-group>\n        </template>\n      </el-table-column>-->\n      <el-table-column label=\"科室名称\" align=\"left\" prop=\"deptRoomName\"/>\n      <el-table-column label=\"科室编码\" align=\"center\" prop=\"deptRoomCode\"/>\n      <el-table-column label=\"所属机构\" align=\"left\" prop=\"deptName\"/>\n      <el-table-column label=\"科室类型\" align=\"center\" prop=\"type\" :formatter=\"typeFormat\"/>\n      <el-table-column label=\"负责人\" align=\"left\" prop=\"dutyOfficer\"/>\n      <el-table-column label=\"科室电话\" align=\"right\" prop=\"phone\"/>\n      <el-table-column label=\"版本\" align=\"center\" prop=\"version\"/>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-edit\"\n            @click=\"handleUpdate(scope.row)\"\n            title=\"修改\"\n            v-hasPermi=\"['system:room:edit']\"\n          >\n          </el-button>\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-delete\"\n            @click=\"handleDelete(scope.row)\"\n             title=\"删除\"\n            v-hasPermi=\"['system:room:remove']\"\n          >\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination\n      v-show=\"total>0\"\n      :total=\"total\"\n      :page.sync=\"queryParams.pageNum\"\n      :limit.sync=\"queryParams.pageSize\"\n      @pagination=\"getList\"\n    />\n    <!-- 所属机构search-dialog -->\n    <el-dialog :visible.sync=\"deptSearchDialog\" :close-on-click-modal=\"false\" title=\"选择机构\" append-to-body width=\"500px\" custom-class=\"el-button--primary\">\n      <div style=\"height: 400px;overflow-y: scroll\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"deptName\"\n            placeholder=\"请输入机构名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"deptOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"tree\"\n            :load=\"getTreeSelect\"\n            lazy\n            @node-click=\"handleNodeClick\"\n          />\n        </div>\n      </div>\n    </el-dialog>\n\n    <!-- 添加或修改科室对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"600px\" append-to-body custom-class=\"el-button--primary\">\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-row>\n          <el-col :span=\"12\">\n            <orgSearch label=\"所属机构\" :queryParams=\"form\" compCode=\"deptId\" compName=\"deptName\"></orgSearch>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"科室名称\" prop=\"deptRoomName\">\n              <el-input v-model=\"form.deptRoomName\" placeholder=\"请输入科室名称\"/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"科室编码\" prop=\"deptRoomCode\">\n              <el-input v-model=\"form.deptRoomCode\" placeholder=\"请输入科室编码\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"科室类型\" prop=\"type\">\n              <el-select v-model=\"form.type\" placeholder=\"请选择科室类型\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in typeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"版本\" prop=\"version\">\n              <el-input v-model=\"form.version\" placeholder=\"请输入版本\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"拼音码\" prop=\"pym\">\n              <el-input v-model=\"form.pym\" placeholder=\"请输入拼音码\"/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"负责人\" prop=\"dutyOfficer\">\n              <el-input v-model=\"form.dutyOfficer\" placeholder=\"请输入负责人\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"联系电话\" prop=\"phone\">\n              <el-input v-model=\"form.phone\" placeholder=\"请输入联系电话\"/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"是否核算\" prop=\"isIndependentAccounting\">\n              <el-select v-model=\"form.isIndependentAccounting\" placeholder=\"请选择是否核算\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in isChangeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"是否独立核算\" prop=\"isAccounting\">\n              <el-select v-model=\"form.isAccounting\" placeholder=\"请选择是否独立核算\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in isChangeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"是否采购\" prop=\"isPurchase\">\n              <el-select v-model=\"form.isPurchase\" placeholder=\"请选择是否采购\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in isChangeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"是否服务\" prop=\"isService\">\n              <el-select v-model=\"form.isService\" placeholder=\"请选择是否服务\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in isChangeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"是否末级\" prop=\"isLeaf\">\n              <el-select v-model=\"form.isLeaf\" placeholder=\"请选择是否末级\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in isChangeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"临床科室类别\" prop=\"clinicType\">\n              <el-select v-model=\"form.clinicType\" placeholder=\"请选择临床科室类别\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in clinicTypeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"科室地址\" prop=\"depAddress\">\n              <el-input type=\"textarea\" :rows=\"2\" v-model=\"form.depAddress\" placeholder=\"请输入科室地址\"/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注\" prop=\"remark\">\n              <el-input type=\"textarea\" :rows=\"2\"  v-model=\"form.remark\" placeholder=\"请输入备注\"/>\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\">保 存</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n    <!-- Form所属机构search-dialog -->\n    <el-dialog :visible.sync=\"deptSearchFormDialog\" :close-on-click-modal=\"false\" title=\"选择机构\" append-to-body width=\"500px\" custom-class=\"el-button--primary\">\n      <div style=\"height: 400px;overflow-y: scroll\">\n        <div class=\"head-container\">\n          <el-input\n            v-model=\"deptNameForm\"\n            placeholder=\"请输入机构名称\"\n            clearable\n            size=\"small\"\n            prefix-icon=\"el-icon-search\"\n            style=\"margin-bottom: 20px\"\n          />\n        </div>\n        <div class=\"head-container\">\n          <el-tree\n            :data=\"deptOptions\"\n            :props=\"defaultProps\"\n            :expand-on-click-node=\"false\"\n            :filter-node-method=\"filterNode\"\n            ref=\"treeForm\"\n            :load=\"getTreeSelect\"\n            lazy\n            @node-click=\"handleFormNodeClick\"\n          />\n        </div>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import {\n    listDeptRoom,\n    getDeptRoom,\n    delDeptRoom,\n    addDeptRoom,\n    updateDeptRoom,\n    exportDeptRoom,\n    deptRoomTree,\n    importTemplate\n\n  } from '@/api/basic/deptRoom'\n  import { treeselect } from '@/api/system/dept'\n  import orgSearch from \"@/views/components/orgSearch\";\n\n  export default {\n    name: 'Room',\n    components: {orgSearch},\n    data() {\n      return {\n      \tcheckList:[],\n\n        // 遮罩层\n        loading: true,\n        // 导出遮罩层\n        exportLoading: false,\n        // 选中数组\n        ids: [],\n        // 非单个禁用\n        single: true,\n        // 非多个禁用\n        multiple: true,\n        // 显示搜索条件\n        showSearch: true,\n        // 总条数\n        total: 0,\n        // 科室表格数据\n        roomList: [],\n        // 弹出层标题\n        title: '',\n        // 是否显示弹出层\n        open: false,\n        // 表格上方机构查询dialog\n        deptSearchDialog: false,\n        // 机构树选项\n        deptOptions: undefined,\n        // dialog中search机构名称\n        deptName: undefined,\n        defaultProps: {\n          children: 'children',\n          label: 'label'\n        },\n        // Form表单机构查询dialog\n        deptSearchFormDialog: false,\n        // Form中search机构名称\n        deptNameForm: undefined,\n        tableHeight: \"auto\",\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 30,\n          deptRoomName: null,\n          deptRoomCode: null,\n          deptId: this.$store.state.user.userInfo.deptId,\n          deptName: this.$store.state.user.userInfo.deptName,\n        },\n        // 用于显示查询的机构名称\n        queryShowDeptName: '',\n        // 表单参数\n        form: {},\n        // 表单校验\n        rules: {\n          deptName: [\n            { required: true, message: \"所属机构不能为空\", trigger: \"blur\" }\n          ],\n          deptRoomName: [\n            { required: true, message: \"用户昵称不能为空\", trigger: \"blur\" }\n          ],\n          deptRoomCode: [\n            { required: true, message: \"用户密码不能为空\", trigger: \"blur\" }\n          ]\n        },\n        selectionRow:[],\n        //科室类型\n        typeOptions:[],\n        //是否变更字典\n        isChangeOptions:[],\n        //临床科室类别字典\n        clinicTypeOptions:[],\n      }\n    },\n    computed: {\n      listData() {\n        return this.$store.state.app.sidebar.opened;\n      }\n    },\n    watch: {\n      \"$store.state.dicts\": {\n        handler(val) {\n          // 基础字典\n          let baseDicts = val.baseDicts;\n          // this.assetTypeOptions = baseDicts.hrAssetType;\n          // this.isMeasureOptions = baseDicts.hrIsChange;\n          // this.isDepreciationOptions = baseDicts.hrIsChange;\n          // this.depreciationWayOptions = baseDicts.hrAssetDepreciationPlan;\n          // this.isCostOptions = baseDicts.hrIsChange;\n          // this.isLastOptions = baseDicts.hrIsChange;\n          this.isChangeOptions = baseDicts.hrIsChange;\n          // 特殊\n          // this.supplierOptions = val.supplierInfo;\n          // this.userOptions = val.userOptsInfo;\n        },\n        deep: true,\n        immediate: true\n      },\n      listData(val) {\n      var that = this;\n      setTimeout(function() {\n        that.resizeHandler();\n      }, 300);\n    },\n      // 根据名称筛选部门树\n      deptName(val) {\n        this.$refs.tree.filter(val)\n      },\n      // 根据名称筛选部门树\n      deptNameForm(val) {\n        this.$refs.treeForm.filter(val)\n      }\n    },\n    created() {\n      this.getList()\n      this.getDicts(\"COST_DEPT_TYPE\").then(response => {\n        this.typeOptions = response.data;\n      });\n      this.getDicts(\"clinic_type\").then(response => {\n        this.clinicTypeOptions = response.data;\n      });\n    },\n    mounted(){\n      this.$nextTick(() => {\n        this.resizeHandler();\n        window.addEventListener(\"resize\", this.resizeHandler);\n      });\n    },\n    methods: {\n      resizeHandler() {\n        let a = this.$refs.search.offsetHeight;\n        let h = a + 18 + 45 + 84 + 40 + 10;\n        h = h + \"px\";\n        this.tableHeight = `calc(100vh - ${h})`;\n      },\n    \tcheckBoxChange(val) { // 控制 单选\n    \t\tconsole.log(val.deptRoomCode);\n        if(this.checkList.indexOf(val.deptRoomCode) > -1){\n          this.checkList = [];\n          this.checkList.push(val.deptRoomCode);\n        }\n        console.log(this.checkList);\n\t\t\t},\n\n      // 科室类型字典翻译\n      typeFormat(row, column) {\n        return this.selectDictLabel(this.typeOptions, row.type);\n      },\n\n      /** 查询科室列表 */\n      getList() {\n        this.loading = true\n        listDeptRoom(this.queryParams).then(response => {\n          console.log(response);\n          if (response.code == 200) {\n            this.roomList = response.rows\n            this.total = response.total\n            this.loading = false\n          } else {\n            this.msgError(response.msg);\n          }\n        })\n      },\n      // 取消按钮\n      cancel() {\n        this.open = false\n        this.reset()\n      },\n      // 表单重置\n      reset() {\n        this.form = {\n          deptRoomId: null,\n          parentId: null,\n          deptRoomName: null,\n          deptRoomCode: null,\n          deptId: null,\n          deptName: null,\n          type: null,\n          sort: null,\n          grade: null,\n          dutyOfficer: null,\n          phone: null,\n          depAddress: null,\n          status: '0',\n          remark: null,\n          delFlag: null,\n          version: null,\n          pym: null,\n          createBy: null,\n          createTime: null,\n          updateBy: null,\n          updateTime: null,\n          isIndependentAccounting: \"1\",\n          isAccounting: \"1\",\n          isPurchase: \"1\",\n          isService: \"1\",\n          isLeaf: \"1\",\n          clinicType: \"1\",\n        }\n        this.resetForm('form')\n      },\n      /** 搜索按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1\n        this.getList()\n      },\n      /** 重置按钮操作 */\n      resetQuery() {\n        this.resetForm('queryForm')\n        this.queryShowDeptName = ''\n        this.handleQuery()\n      },\n      rowStyle({\n        row,\n        rowIndex\n      }) {\n        Object.defineProperty(row, 'rowIndex', {\n          value: rowIndex,\n        })\n      },\n      rowClick(row, flag = true) {\n        let refsElTable = this.$refs.indexTable;\n        if (flag) {\n          let findRow = this.selectionRow.find(c => c.rowIndex == row.rowIndex);\n          if (findRow && this.selectionRow.length == 1) {\n            refsElTable.toggleRowSelection(row, false);\n            return;\n          }\n        }\n        refsElTable.clearSelection();\n        refsElTable.toggleRowSelection(row);\n      },\n      // 多选框选中数据\n      handleSelectionChange(selection) {\n        let requirementTable = this.$refs.indexTable;\n      if (selection.length > 1) {\n        requirementTable.clearSelection();\n        requirementTable.toggleRowSelection(\n          selection[selection.length - 1],\n          true\n        );\n        selection = Array(selection[selection.length - 1]);\n      } else if (selection.length === 1) {\n        selection = Array(selection[selection.length - 1]);\n      } else {\n        selection = [];\n      }\n\n      this.selectionRow=selection;\n\n\n        this.ids = selection.map(item => item.deptRoomId)\n        this.single = selection.length !== 1\n        this.multiple = !selection.length\n      },\n      /** 新增按钮操作 */\n      handleAdd() {\n        this.reset()\n        this.open = true\n        this.title = '科室 / 新增'\n      },\n      /** 修改按钮操作 */\n      handleUpdate(row) {\n        this.reset()\n        const deptRoomId = row.deptRoomId || this.ids\n        getDeptRoom(deptRoomId).then(response => {\n          if (response.code == 200) {\n            this.form = response.data\n            this.open = true\n            this.title = '科室 / 修改'\n          } else {\n            this.msgError(response.msg);\n          }\n        })\n      },\n      /** 提交按钮 */\n      submitForm() {\n        this.$refs['form'].validate(valid => {\n          if (valid) {\n            if (this.form.deptRoomId != null) {\n              updateDeptRoom(this.form).then(response => {\n                if (response.code == 200) {\n                  this.msgSuccess('修改成功')\n                  this.open = false\n                  this.getList()\n                } else {\n                  this.msgError(response.msg);\n                }\n              })\n            } else {\n              addDeptRoom(this.form).then(response => {\n                if (response.code == 200) {\n                  this.msgSuccess('新增成功')\n                  this.open = false\n                  this.getList()\n                } else {\n                  this.msgError(response.msg);\n                }\n              })\n            }\n          }\n        })\n      },\n      /** 删除按钮操作 */\n      handleDelete(row) {\n        const deptRoomIds = row.deptRoomId || this.ids\n        this.$confirm('是否确认删除科室编号为\"' + deptRoomIds + '\"的数据项?', '警告', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(function() {\n          return delDeptRoom(deptRoomIds)\n        }).then(() => {\n          this.getList()\n          this.msgSuccess('删除成功')\n        }).catch(() => {\n        })\n      },\n      /** 导出按钮操作 */\n      handleExport() {\n        const queryParams = this.queryParams\n        this.$confirm('是否确认导出所有科室数据项?', '警告', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.exportLoading = true\n          return exportDeptRoom(queryParams)\n        }).then(response => {\n          if (response.code == 200) {\n            this.download(response.msg)\n            this.exportLoading = false\n          } else {\n            this.msgError(response.msg);\n          }\n        }).catch(() => {\n        })\n      },\n      // 获取左侧部门数据\n      getTreeSelect(node, resolve) {\n        let pid = ''\n        if (node.level == 0) {\n          pid = '0'\n        } else {\n          pid = node.data.id\n        }\n        setTimeout(() => {\n          treeselect({ parentId: pid }).then(response => {\n            if (response.code == 200) {\n              if (resolve) {\n                resolve(response.data)\n              } else {\n                this.deptOptions = response.data\n              }\n            } else {\n              this.msgError(response.msg);\n            }\n          })\n        }, 100)\n      },\n      // search筛选节点\n      filterNode(value, data) {\n        if (!value) return true\n        return data.label.indexOf(value) !== -1\n      },\n      // search节点单击事件\n      handleNodeClick(data) {\n        this.queryParams.deptId = data.id\n        this.queryShowDeptName = data.label\n        //this.getList();\n        this.deptSearchDialog = false\n      },\n      // form表单中search节点单击事件\n      handleFormNodeClick(data) {\n        this.form.deptId = data.id\n        this.form.deptName = data.label\n        this.deptSearchFormDialog = false\n      }\n    }\n  }\n</script>\n<style lang=\"scss\">\n.tableCheckbox{\n  .el-checkbox__label{\n    display: none;\n  }\n}\n</style>\n"]}]}