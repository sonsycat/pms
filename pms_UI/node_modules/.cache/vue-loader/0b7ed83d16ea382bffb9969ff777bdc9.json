{"remainingRequest":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\pms_UI\\src\\views\\subsidy\\formDesign\\formMaking\\index.vue?vue&type=style&index=0&id=c61d32de&lang=scss&scoped=true&","dependencies":[{"path":"F:\\pms_UI\\src\\views\\subsidy\\formDesign\\formMaking\\index.vue","mtime":1693362206314},{"path":"F:\\pms_UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693361949271},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693362179282},{"path":"F:\\pms_UI\\node_modules\\postcss-loader\\src\\index.js","mtime":1693362110683},{"path":"F:\\pms_UI\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693362152666},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5keW5hbWljRm9ybSB7CiAgOjp2LWRlZXAgLmVsLWFzaWRlIHsKICAgIHdpZHRoOiAzMTBweCAhaW1wb3J0YW50OwoKICAgICYud2lkZ2V0LWNvbmZpZy1jb250YWluZXIgewogICAgICB3aWR0aDogMzUwcHggIWltcG9ydGFudDsKCiAgICAgIC5lbC1mb3JtLWl0ZW1fX2NvbnRlbnQgewogICAgICAgIG1hcmdpbi1sZWZ0OiAwICFpbXBvcnRhbnQKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/subsidy/formDesign/formMaking","sourcesContent":["<template>\n  <div class=\"dynamicForm\">\n    <!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\n    <fm-making-form\n      ref=\"makingform\"\n      style=\"height:600px;display: block;\"\n      preview\n      generate-code\n      generate-json\n    >\n      <!-- 头部内容自定义，添加提交按钮 -->\n      <template slot=\"action\">\n        <el-button type=\"primary\" @click=\"handleSubmit\">保存</el-button>\n      </template>\n    </fm-making-form>\n\n    <div class=\"list-wraper previewForm\">\n      <fm-generate-form\n        :data=\"jsonData\"\n        ref=\"generateForm\">\n      </fm-generate-form>\n      <!--<el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>-->\n    </div>\n  </div>\n</template>\n\n<script>\nimport {saveDesign, getForm, getFormDesign} from '@/api/subsidy/formProcess'\n\nexport default {\n  data() {\n    return {\n      formName: '',\n      jsonData: {\n        list: [],\n      },\n      formDesignId: \"\",\n\n    }\n  },\n  components: {},\n  created() {\n    this.formDesignId = this.$route.query.formDesignId\n    let data = {\n      formDesignId: this.formDesignId\n    }\n    this.handleFormReady();\n//      getForm(data).then(response => {\n//      \tconsole.log(response);\n//      \tlet jsons = JSON.parse(response.data.formJson)\n//      \tconsole.log(jsons);\n////      \tthis.jsonData = jsons\n//      })\n  },\n  methods: {\n    handleFormReady() {\n      const formDesignId = this.formDesignId;\n      getFormDesign(formDesignId).then(response => {\n        console.log(response)\n        const formJson = response.data.formJson;\n        if (formJson != null && formJson != '') {\n          let data = JSON.parse(formJson);\n          data.size = \"mini\"\n          data.list.forEach(_ => {\n            _.size = \"mini\";\n            _.options.disabled = _.options.disabled == \"false\" ? false : true;\n            _.options.required = _.options.required == \"false\" ? false : true;\n            _.columns && _.columns.forEach(ite => {\n              ite.span = ite.span * 1;\n              ite.list.forEach(item => {\n                item.size = \"mini\";\n                item.options.disabled = item.options.disabled == \"false\" ? false : true;\n                item.options.required = item.options.required == \"false\" ? false : true;\n              })\n            })\n          })\n          try {\n            this.$refs.makingform.setJSON(data)\n          } catch (d) {\n            console.log(d)\n          }\n        }\n      });\n    },\n    handleSubmit() {\n      const json = this.$refs.makingform.getJSON();\n      let saveLoading = this.saveLoading()\n      saveDesign(this.formDesignId, json, this.$refs.makingform.getHtml()).then(response => {\n        this.msgSuccess(\"保存成功\");\n        saveLoading.close()\n        this.close();\n      })\n    },\n    close() {\n      this.$store.dispatch('tagsView/delView', this.$route)\n      this.$router.push({path: '/clbt/CLBTZDY/CLZDYBD', query: {t: Date.now()}})\n    },\n  },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dynamicForm {\n  ::v-deep .el-aside {\n    width: 310px !important;\n\n    &.widget-config-container {\n      width: 350px !important;\n\n      .el-form-item__content {\n        margin-left: 0 !important\n      }\n    }\n  }\n}\n</style>\n"]}]}