{"remainingRequest":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\pms_oracle\\pms_UI\\src\\views\\apport\\apport\\addEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\pms_oracle\\pms_UI\\src\\views\\apport\\apport\\addEdit.vue","mtime":1693362204000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldENvc3RBcHBvcnQgfSBmcm9tICJAL2FwaS9zeXN0ZW0vZGljdC9kYXRhIgppbXBvcnQgeyB2YWxpZEVtYWlsIH0gZnJvbSdAL3V0aWxzL3ZhbGlkYXRlJwppbXBvcnQgeyBsaXN0QXBwb3J0LCBnZXRBcHBvcnQsIGFkZEFwcG9ydEZ0anMsYWRkQXBwb3J0WWpmdGpzLGFkZEFwcG9ydEVqZnRqcyxhZGRBcHBvcnRTamZ0anMsIGFkZFZlcmlmaWNhdGlvbjEsYWRkVmVyaWZpY2F0aW9uMixhZGRWZXJpZmljYXRpb24zLGFkZFZlcmlmaWNhdGlvbiB9IGZyb20gIkAvYXBpL2FwcG9ydC9hcHBvcnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJhZGRFZGl0IiwKICBwcm9wczogewogICAgb3BlbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGlkOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgaWQ6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgdGhpcy5pZCA9IHZhbDsKICAgICAgICAgIHRoaXMudGl0bGUgPSAi5oiQ5pys5YiG5pGKIC8g5YiG5pGK6K6h566XIjsKICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsSW5mbygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvcm0uYXBwb3J0VHlwZT0nMSc7CiAgICAgICAgICB0aGlzLmlkID0gIiI7CiAgICAgICAgICB0aGlzLnRpdGxlID0gIuaIkOacrOWIhuaRiiAvIOWIhuaRiuiuoeeulyI7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBvcGVuOiB7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5vcGVuRGlhbG9nID0gdmFsOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICLliIbmkYrorqHnrpfnrqHnkIYt5paw5aKeIiwKICAgICAgb3BlbkRpYWxvZzogdGhpcy5vcGVuLAogICAgICBzYXZlTG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgYXBwb3J0VHlwZU9wdGlvbnM6IFtdLAogICAgICBjaGVja0RhdGE6W10sCiAgICAgIHByb2dyZXNzU2hvdzpmYWxzZSwKICAgICAgYWN0aXZpdGllczogW10sCiAgICAgIHBlcmNlbnRhZ2U6MCwKCSAgCS8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIG5vd0RhdGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLliIbmkYrlubTmnIjkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF0sCiAgICAgICAgYXBwb3J0VHlwZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuWIhuaRiue6p+WIq+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0RGljdHMoImNvc3RfYXBwb3J0X3R5cGUiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgIH0pOwogICAgdGhpcy5nZXRDb3N0QXBwb3J0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5YiG5pGK6K6h566X5by55qGG5bm05pyI6ZmQ5Yi2CiAgICBnZXRDb3N0QXBwb3J0KCkgewogICAgICBnZXRDb3N0QXBwb3J0KHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uZGVwdElkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgdGhpcy5mb3JtLm5vd0RhdGUgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZvcm0ubm93RGF0ZSA9IGdldFllYXIoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAJZ2V0RGV0YWlsSW5mbygpIHsKICAgICAgZ2V0QXBwb3J0KHRoaXMuaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5p+l6K+i5YiG5pGK6K6h566X5YiX6KGoICovCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsaXN0QXBwb3J0KHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuYXBwb3J0TGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliIbmkYrnuqfliKso5L+d5a2Y5pyA5ZCO55qE57qn5YirKeWtl+WFuOe/u+ivkQogICAgYXBwb3J0VHlwZUZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5hcHBvcnRUeXBlT3B0aW9ucywgcm93LmFwcG9ydFR5cGUpOwogICAgfSwKICAgIC8v5YiG5pGK6K6h566X55qE5aSa6YCJ5YWz6IGUCiAgICBoYW5kbGVyQ2hhbmdlKGUsZWwpewogICAgICBsZXQgYXJyPVtdCiAgICAgIHRoaXMuYXBwb3J0VHlwZU9wdGlvbnMuZm9yRWFjaCgoaXRlLGkpPT57CiAgICAgICAgaWYoZWwudGFyZ2V0LmNoZWNrZWQpewogICAgICAgICAgaWYoaXRlLmRpY3RWYWx1ZTw9ZWwudGFyZ2V0LnZhbHVlKXsKICAgICAgICAgICAgYXJyLnB1c2goaXRlLmRpY3RWYWx1ZSkKICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgIGlmKGl0ZS5kaWN0VmFsdWU8ZWwudGFyZ2V0LnZhbHVlKXsKICAgICAgICAgICAgYXJyLnB1c2goaXRlLmRpY3RWYWx1ZSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICAgIHRoaXMuZm9ybS5hcHBvcnRUeXBlPWFycgogICAgfSwKICAgIC8vIOW8ueahhuWFs+mXrQogICAgaGFuZGxlRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgIH0sCiAgICAvLyDlj5bmtogKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBjb21wQ29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQsCiAgICAgICAgYWNjb3VudENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uYWNjb3VudENvZGUsCiAgICAgICAgYXBwb3J0Q29kZTogbnVsbCwKICAgICAgICBub3dEYXRlOiBudWxsLAogICAgICAgIGFwcG9ydFR5cGU6IFtdLAogICAgICAgIGZvcndhcmQ6IG51bGwsCiAgICAgICAgYmFjazogbnVsbCwKICAgICAgICBhcHBvcnRUaW1lOiBudWxsLAogICAgICAgIGRlbEZsYWc6IG51bGwsCiAgICAgICAgY3JlYXRlQnk6IG51bGwsCiAgICAgICAgY3JlYXRlVGltZTogbnVsbCwKICAgICAgICB1cGRhdGVCeTogbnVsbCwKICAgICAgICB1cGRhdGVUaW1lOiBudWxsLAogICAgICAgIHJlbWFyazogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOwogICAgfSwKICAgIC8qKiDmj5DkuqTmjInpkq4gKi8KICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuYWN0aXZpdGllcyA9IFtdCiAgICAgICAgICB0aGlzLnByb2dyZXNzU2hvdyA9IHRydWUKICAgICAgICAgLy8gdGhpcy5mb3JtLmFwcG9ydFR5cGU9dGhpcy5mb3JtLmFwcG9ydFR5cGUuc29ydCgoYSxiKT0+e3JldHVybiBiLWF9KVswXQoKICAgICAgICAgICAgdGhpcy5zYXZlU3RlcE9uZTEodGhpcy5mb3JtKS50aGVuKCgpPT57CiAgICAgICAgICAgIH0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zYXZlU3RlcE9uZTIodGhpcy5mb3JtKQogICAgICAgICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZVN0ZXBPbmUzKHRoaXMuZm9ybSkKICAgICAgICAgICAgfSkudGhlbigoKT0+ewogICAgICAgICAgICAgIHJldHVybiB0aGlzLnNhdmVTdGVwVG93KHRoaXMuZm9ybSkKICAgICAgICAgICAgfSkudGhlbigoKT0+ewogICAgICAgICAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSkuY2F0Y2goKHJlcyk9PnsKICAgICAgICAgICAgICB0aGlzLnNhdmVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pCgogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2F2ZVN0ZXBPbmUoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkVmVyaWZpY2F0aW9uMShkYXRhKS50aGVuKHJlc3BvbnNlID0+ewogICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSAyMDApewogICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAxNQogICAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogJ+mqjOivgeenkeWupOW/q+eFpycsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnb2snLAogICAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNoZWNrJywKICAgICAgICAgICAgICBmbGFnOnRydWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmVzbG92ZSgpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChyZXMpPT57CiAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAxMAogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICBjb250ZW50OiAn6aqM6K+B56eR5a6k5b+r54WnJywKICAgICAgICAgICAgdGltZXN0YW1wOiAnRXJyb3InLAogICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgY29sb3I6InJlZCIsCiAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNsb3NlJywKICAgICAgICAgICAgZmxhZzpmYWxzZQogICAgICAgICAgfSkKICAgICAgICAgIHJlamVjdChyZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzYXZlU3RlcE9uZTEoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkVmVyaWZpY2F0aW9uMihkYXRhKS50aGVuKHJlc3BvbnNlID0+ewogICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSAyMDApewogICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAzMAogICAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogJ+mqjOivgeWIhuaRiuaWueahiCcsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnb2snLAogICAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNoZWNrJywKICAgICAgICAgICAgICBmbGFnOnRydWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmVzbG92ZSgpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChyZXMpPT57CiAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAyMAogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICBjb250ZW50OiAn6aqM6K+B5YiG5pGK5pa55qGIJywKICAgICAgICAgICAgdGltZXN0YW1wOiAnRXJyb3InLAogICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgY29sb3I6InJlZCIsCiAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNsb3NlJywKICAgICAgICAgICAgZmxhZzpmYWxzZQogICAgICAgICAgfSkKICAgICAgICAgIHJlamVjdChyZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzYXZlU3RlcE9uZTIoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkVmVyaWZpY2F0aW9uMyhkYXRhKS50aGVuKHJlc3BvbnNlID0+ewogICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSAyMDApewogICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSA0NQogICAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogJ+mqjOivgeWIhuaRiuavlOS+iycsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnb2snLAogICAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNoZWNrJywKICAgICAgICAgICAgICBmbGFnOnRydWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmVzbG92ZSgpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChyZXMpPT57CiAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAzMAogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICBjb250ZW50OiAn6aqM6K+B5YiG5pGK5q+U5L6LJywKICAgICAgICAgICAgdGltZXN0YW1wOiAnRXJyb3InLAogICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgY29sb3I6InJlZCIsCiAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNsb3NlJywKICAgICAgICAgICAgZmxhZzpmYWxzZQogICAgICAgICAgfSkKICAgICAgICAgIHJlamVjdChyZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzYXZlU3RlcE9uZTMoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkVmVyaWZpY2F0aW9uKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgICBpZihyZXNwb25zZS5jb2RlID09IDIwMCl7CiAgICAgICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDYwCiAgICAgICAgICAgIHRoaXMuYWN0aXZpdGllcy5wdXNoKHsKICAgICAgICAgICAgICBjb250ZW50OiAn6aqM6K+B5oiQ5pys5pWw5o2uJywKICAgICAgICAgICAgICB0aW1lc3RhbXA6ICdvaycsCiAgICAgICAgICAgICAgc2l6ZTogJ2xhcmdlJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgaWNvbjogJ2VsLWljb24tY2hlY2snLAogICAgICAgICAgICAgIGZsYWc6dHJ1ZQogICAgICAgICAgICB9KQogICAgICAgICAgICByZXNsb3ZlKCkKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICByZWplY3QocmVzcG9uc2UpCiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goKHJlcyk9PnsKICAgICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDQwCiAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgIGNvbnRlbnQ6ICfpqozor4HmiJDmnKzmlbDmja4nLAogICAgICAgICAgICB0aW1lc3RhbXA6ICdFcnJvcicsCiAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInLAogICAgICAgICAgICBjb2xvcjoicmVkIiwKICAgICAgICAgICAgaWNvbjogJ2VsLWljb24tY2xvc2UnLAogICAgICAgICAgICBmbGFnOmZhbHNlCiAgICAgICAgICB9KQogICAgICAgICAgcmVqZWN0KHJlcykKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIHNhdmVTdGVwVG93KGRhdGEpewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc2xvdmUscmVqZWN0KT0+ewogICAgICAgIGFkZEFwcG9ydEZ0anMoZGF0YSkudGhlbihyZXNwb25zZSA9PnsKICAgICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICBpZihyZXNwb25zZS5jb2RlID09IDIwMCl7CiAgICAgICAgICAgIHRoaXMucGVyY2VudGFnZSA9IDEwMAogICAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogJ+W8gOWni+iuoeeul+iuoeWFpeaIkOacrOWIhuaRiuaVsOaNricsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnb2snLAogICAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNoZWNrJywKICAgICAgICAgICAgICBmbGFnOnRydWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmVzbG92ZSgpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChyZXMpPT57CiAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSA1MAogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICBjb250ZW50OiAn5byA5aeL6K6h566X6K6h5YWl5oiQ5pys5YiG5pGK5pWw5o2uJywKICAgICAgICAgICAgdGltZXN0YW1wOiAnRXJyb3InLAogICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgY29sb3I6InJlZCIsCiAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNsb3NlJywKICAgICAgICAgICAgZmxhZzpmYWxzZQogICAgICAgICAgfSkKICAgICAgICAgIHJlamVjdChyZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzYXZlU3RlcFRvdzEoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkQXBwb3J0WWpmdGpzKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSAyMDApewogICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSA4MAogICAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogJ+W8gOWni+iuoeeul+S4gOe6p+WIhuaRiuaVsOaNricsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnb2snLAogICAgICAgICAgICAgIGlkZWExOiAn5LiA57qn5YiG5pGK5pWw5o2u6K6h566X5a6M5oiQJywKICAgICAgICAgICAgICBpZGVhMjogJ+WIhuaRiuWJjemHkeminScrdGhpcy5mb3JtLmZvcndhcmQsCiAgICAgICAgICAgICAgaWRlYTM6ICfliIbmkYrlkI7ph5Hpop0nK3RoaXMuZm9ybS5iYWNrLAogICAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNoZWNrJywKICAgICAgICAgICAgICBmbGFnOnRydWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmVzbG92ZSgpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChyZXMpPT57CiAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSA2MAogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICBjb250ZW50OiAn5byA5aeL6K6h566X5LiA57qn5YiG5pGK5pWw5o2uJywKICAgICAgICAgICAgdGltZXN0YW1wOiAnRXJyb3InLAogICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgY29sb3I6InJlZCIsCiAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNsb3NlJywKICAgICAgICAgICAgZmxhZzpmYWxzZQogICAgICAgICAgfSkKICAgICAgICAgIHJlamVjdChyZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzYXZlU3RlcFRvdzIoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkQXBwb3J0RWpmdGpzKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSAyMDApewogICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSA5MAogICAgICAgICAgICB0aGlzLmFjdGl2aXRpZXMucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogJ+W8gOWni+iuoeeul+S6jOe6p+WIhuaRiuaVsOaNricsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiAnb2snLAogICAgICAgICAgICAgIGlkZWExOiAn5LqM57qn5YiG5pGK5pWw5o2u6K6h566X5a6M5oiQJywKICAgICAgICAgICAgICBpZGVhMjogJ+WIhuaRiuWJjemHkeminScrdGhpcy5mb3JtLmZvcndhcmQsCiAgICAgICAgICAgICAgaWRlYTM6ICfliIbmkYrlkI7ph5Hpop0nK3RoaXMuZm9ybS5iYWNrLAogICAgICAgICAgICAgIHNpemU6ICdsYXJnZScsCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNoZWNrJywKICAgICAgICAgICAgICBmbGFnOnRydWUKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmVzbG92ZSgpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlKQogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKChyZXMpPT57CiAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSA3MAogICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICBjb250ZW50OiAn5byA5aeL6K6h566X5LqM57qn5YiG5pGK5pWw5o2uJywKICAgICAgICAgICAgdGltZXN0YW1wOiAnRXJyb3InLAogICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICB0eXBlOiAnZGFuZ2VyJywKICAgICAgICAgICAgY29sb3I6InJlZCIsCiAgICAgICAgICAgIGljb246ICdlbC1pY29uLWNsb3NlJywKICAgICAgICAgICAgZmxhZzpmYWxzZQogICAgICAgICAgfSkKICAgICAgICAgIHJlamVjdChyZXMpCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCiAgICBzYXZlU3RlcFRvdzMoZGF0YSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzbG92ZSxyZWplY3QpPT57CiAgICAgICAgYWRkQXBwb3J0U2pmdGpzKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT57CiAgICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgaWYocmVzcG9uc2UuY29kZSA9PSAyMDApewogICAgICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgPSAxMDAKICAgICAgICAgICAgdGhpcy5hY3Rpdml0aWVzLnB1c2goewogICAgICAgICAgICAgIGNvbnRlbnQ6ICflvIDlp4vorqHnrpfkuInnuqfliIbmkYrmlbDmja4nLAogICAgICAgICAgICAgIHRpbWVzdGFtcDogJ29rJywKICAgICAgICAgICAgICBpZGVhMTogJ+S4iee6p+WIhuaRiuaVsOaNruiuoeeul+WujOaIkCcsCiAgICAgICAgICAgICAgaWRlYTI6ICfliIbmkYrliY3ph5Hpop0nK3RoaXMuZm9ybS5mb3J3YXJkLAogICAgICAgICAgICAgIGlkZWEzOiAn5YiG5pGK5ZCO6YeR6aKdJyt0aGlzLmZvcm0uYmFjaywKICAgICAgICAgICAgICBzaXplOiAnbGFyZ2UnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBpY29uOiAnZWwtaWNvbi1jaGVjaycsCiAgICAgICAgICAgICAgZmxhZzp0cnVlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJlc2xvdmUoKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSkKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaCgocmVzKT0+ewogICAgICAgICAgdGhpcy5wZXJjZW50YWdlID0gODAKICAgICAgICAgIHRoaXMuYWN0aXZpdGllcy5wdXNoKHsKICAgICAgICAgICAgY29udGVudDogJ+W8gOWni+iuoeeul+S4iee6p+WIhuaRiuaVsOaNricsCiAgICAgICAgICAgIHRpbWVzdGFtcDogJ0Vycm9yJywKICAgICAgICAgICAgc2l6ZTogJ2xhcmdlJywKICAgICAgICAgICAgdHlwZTogJ2RhbmdlcicsCiAgICAgICAgICAgIGNvbG9yOiJyZWQiLAogICAgICAgICAgICBpY29uOiAnZWwtaWNvbi1jbG9zZScsCiAgICAgICAgICAgIGZsYWc6ZmFsc2UKICAgICAgICAgIH0pCiAgICAgICAgICByZWplY3QocmVzKQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAp9fTsK"},{"version":3,"sources":["addEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEdit.vue","sourceRoot":"src/views/apport/apport","sourcesContent":["<template>\n    <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"40%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\">\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"110px\">\n        <el-col :span=\"12\">\n          <el-form-item label=\"分摊编码\" prop=\"apportCode\">\n            <el-input v-model=\"form.apportCode\" placeholder=\"请输入分摊编码\"  maxlength=\"50\" show-word-limit disabled />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"分摊年月\" prop=\"nowDate\">\n            <el-date-picker disabled class=\"w100\"\n              v-model=\"form.nowDate\"\n              type=\"month\"\n              value-format=\"yyyy-MM\"\n              placeholder=\"选择年月\">\n            </el-date-picker>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <div shadow=\"always\" >\n            <el-button type=\"success\" style=\"float:right\" @click=\"submitForm\" :loading=\"saveLoading\">开始计算</el-button>\n          </div>\n        </el-col>\n          <el-col :span=\"24\" class=\"mb20\" style=\"margin:10px 0 0\">\n            <el-progress v-if=\"progressShow\" :text-inside=\"true\" :stroke-width=\"20\" :percentage=\"percentage\"></el-progress>\n          </el-col>\n          <el-col :span=\"24\" style=\"max-height:450px;overflow:auto;padding:10px 0\">\n            <el-timeline>\n              <el-timeline-item\n                v-for=\"(activity, index) in activities\"\n                :key=\"index\"\n                :icon=\"activity.icon\"\n                :type=\"activity.type\"\n                :size=\"activity.size\"\n              >\n                <!-- :timestamp=\"activity.timestamp\" -->\n                {{activity.content}}\n                <div v-if=\"!activity.flag\" class=\"errorStyle\">{{activity.timestamp}}</div>\n                <div v-if=\"activity.flag\" class=\"successStyle\">{{activity.timestamp}}</div>\n                <div v-if=\"activity.flag\" class=\"successStyle\">{{activity.idea1}}</div>\n                <div v-if=\"activity.flag\" class=\"successStyle\">{{activity.idea2}}</div>\n                <div v-if=\"activity.flag\" class=\"successStyle\">{{activity.idea3}}</div>\n              </el-timeline-item>\n            </el-timeline>\n          </el-col>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n</template>\n\n<script>\nimport { getCostApport } from \"@/api/system/dict/data\"\nimport { validEmail } from'@/utils/validate'\nimport { listApport, getApport, addApportFtjs,addApportYjftjs,addApportEjftjs,addApportSjftjs, addVerification1,addVerification2,addVerification3,addVerification } from \"@/api/apport/apport\";\n\nexport default {\n  name: \"addEdit\",\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: \"\"\n    }\n  },\n  watch: {\n    id: {\n      handler(val) {\n        this.reset();\n        if (val) {\n          this.id = val;\n          this.title = \"成本分摊 / 分摊计算\";\n          this.getDetailInfo();\n        } else {\n          this.form.apportType='1';\n          this.id = \"\";\n          this.title = \"成本分摊 / 分摊计算\";\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val;\n      },\n      deep: true\n    }\n  },\n  components: {\n  },\n  data() {\n    return {\n      title: \"分摊计算管理-新增\",\n      openDialog: this.open,\n      saveLoading: false,\n      // 表单参数\n      form: {},\n      apportTypeOptions: [],\n      checkData:[],\n      progressShow:false,\n      activities: [],\n      percentage:0,\n\t  \t// 表单校验\n      rules: {\n        nowDate: [\n          { required: true, message: \"分摊年月不能为空\", trigger: \"blur\" }\n        ],\n        apportType: [\n          { required: true, message: \"分摊级别不能为空\", trigger: \"blur\" }\n        ],\n      }\n    };\n  },\n  created() {\n    this.getList();\n    this.getDicts(\"cost_apport_type\").then(response => {\n    });\n    this.getCostApport()\n  },\n  methods: {\n    //分摊计算弹框年月限制\n    getCostApport() {\n      getCostApport(this.$store.state.user.accountInfo.deptId).then(response => {\n        if (response.data) {\n          this.form.nowDate = response.data;\n        } else {\n          this.form.nowDate = getYear();\n        }\n      });\n    },\n  \tgetDetailInfo() {\n      getApport(this.id).then(response => {\n        console.log(response);\n        this.form = response.data;\n      });\n    },\n    /** 查询分摊计算列表 */\n    getList() {\n      this.loading = true;\n      listApport(this.queryParams).then(response => {\n        this.apportList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n    },\n    // 分摊级别(保存最后的级别)字典翻译\n    apportTypeFormat(row, column) {\n      return this.selectDictLabel(this.apportTypeOptions, row.apportType);\n    },\n    //分摊计算的多选关联\n    handlerChange(e,el){\n      let arr=[]\n      this.apportTypeOptions.forEach((ite,i)=>{\n        if(el.target.checked){\n          if(ite.dictValue<=el.target.value){\n            arr.push(ite.dictValue)\n          }\n        }else{\n          if(ite.dictValue<el.target.value){\n            arr.push(ite.dictValue)\n          }\n        }\n      })\n      this.form.apportType=arr\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit(\"success\", false);\n      this.$emit(\"cancel\", false);\n    },\n    // 取消\n    cancel() {\n      this.$emit(\"success\", false);\n      this.$emit(\"cancel\", false);\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        compCode: this.$store.state.user.userInfo.deptId,\n        accountCode: this.$store.state.user.accountInfo.accountCode,\n        apportCode: null,\n        nowDate: null,\n        apportType: [],\n        forward: null,\n        back: null,\n        apportTime: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null\n      };\n      this.resetForm(\"form\");\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          this.saveLoading = true;\n          this.activities = []\n          this.progressShow = true\n         // this.form.apportType=this.form.apportType.sort((a,b)=>{return b-a})[0]\n\n            this.saveStepOne1(this.form).then(()=>{\n            }).then(()=>{\n              return this.saveStepOne2(this.form)\n            }).then(()=>{\n              return this.saveStepOne3(this.form)\n            }).then(()=>{\n              return this.saveStepTow(this.form)\n            }).then(()=>{\n              this.saveLoading = false;\n            }).catch((res)=>{\n              this.saveLoading = false;\n            })\n\n        }\n      });\n    },\n    saveStepOne(data){\n      return new Promise((reslove,reject)=>{\n        addVerification1(data).then(response =>{\n          if(response.code == 200){\n            this.percentage = 15\n            this.activities.push({\n              content: '验证科室快照',\n              timestamp: 'ok',\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 10\n          this.activities.push({\n            content: '验证科室快照',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepOne1(data){\n      return new Promise((reslove,reject)=>{\n        addVerification2(data).then(response =>{\n          if(response.code == 200){\n            this.percentage = 30\n            this.activities.push({\n              content: '验证分摊方案',\n              timestamp: 'ok',\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 20\n          this.activities.push({\n            content: '验证分摊方案',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepOne2(data){\n      return new Promise((reslove,reject)=>{\n        addVerification3(data).then(response =>{\n          if(response.code == 200){\n            this.percentage = 45\n            this.activities.push({\n              content: '验证分摊比例',\n              timestamp: 'ok',\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 30\n          this.activities.push({\n            content: '验证分摊比例',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepOne3(data){\n      return new Promise((reslove,reject)=>{\n        addVerification(data).then(response =>{\n          if(response.code == 200){\n            this.percentage = 60\n            this.activities.push({\n              content: '验证成本数据',\n              timestamp: 'ok',\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 40\n          this.activities.push({\n            content: '验证成本数据',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepTow(data){\n      return new Promise((reslove,reject)=>{\n        addApportFtjs(data).then(response =>{\n          this.form = response.data;\n          if(response.code == 200){\n            this.percentage = 100\n            this.activities.push({\n              content: '开始计算计入成本分摊数据',\n              timestamp: 'ok',\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 50\n          this.activities.push({\n            content: '开始计算计入成本分摊数据',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepTow1(data){\n      return new Promise((reslove,reject)=>{\n        addApportYjftjs(data).then(response =>{\n          this.form = response.data;\n          if(response.code == 200){\n            this.percentage = 80\n            this.activities.push({\n              content: '开始计算一级分摊数据',\n              timestamp: 'ok',\n              idea1: '一级分摊数据计算完成',\n              idea2: '分摊前金额'+this.form.forward,\n              idea3: '分摊后金额'+this.form.back,\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 60\n          this.activities.push({\n            content: '开始计算一级分摊数据',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepTow2(data){\n      return new Promise((reslove,reject)=>{\n        addApportEjftjs(data).then(response =>{\n          this.form = response.data;\n          if(response.code == 200){\n            this.percentage = 90\n            this.activities.push({\n              content: '开始计算二级分摊数据',\n              timestamp: 'ok',\n              idea1: '二级分摊数据计算完成',\n              idea2: '分摊前金额'+this.form.forward,\n              idea3: '分摊后金额'+this.form.back,\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 70\n          this.activities.push({\n            content: '开始计算二级分摊数据',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n    saveStepTow3(data){\n      return new Promise((reslove,reject)=>{\n        addApportSjftjs(data).then(response =>{\n          this.form = response.data;\n          if(response.code == 200){\n            this.percentage = 100\n            this.activities.push({\n              content: '开始计算三级分摊数据',\n              timestamp: 'ok',\n              idea1: '三级分摊数据计算完成',\n              idea2: '分摊前金额'+this.form.forward,\n              idea3: '分摊后金额'+this.form.back,\n              size: 'large',\n              type: 'success',\n              icon: 'el-icon-check',\n              flag:true\n            })\n            reslove()\n          }else{\n            reject(response)\n          }\n        }).catch((res)=>{\n          this.percentage = 80\n          this.activities.push({\n            content: '开始计算三级分摊数据',\n            timestamp: 'Error',\n            size: 'large',\n            type: 'danger',\n            color:\"red\",\n            icon: 'el-icon-close',\n            flag:false\n          })\n          reject(res)\n        })\n      })\n    },\n}};\n</script>\n<style lang=\"scss\" scoped>\n  ::v-deep .el-dialog {\n    min-height: 20%;\n    overflow: hidden;\n    .el-dialog__body {\n      height: calc(100% - 100px);\n      overflow: auto;\n      padding: 30px 20px 0 !important;\n    }\n  }\n</style>\n"]}]}