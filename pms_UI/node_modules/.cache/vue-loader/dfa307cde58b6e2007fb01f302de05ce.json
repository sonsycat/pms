{"remainingRequest":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hrp\\zjry-pms-ui\\src\\views\\components\\revenuePop\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\hrp\\zjry-pms-ui\\src\\views\\components\\revenuePop\\index.vue","mtime":1682043105511},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IHsgc2VhcmNoRm9yUHJvamVjdCB9IGZyb20gIkAvYXBpL251bS9yZXZlbnVlIjsKLy8gbGFiZWwg5Li656m65pe2ICDosIPnlKjnu4Tku7Yg5aKe5YqgY2xhc3MgbGFiZWxFbXB0eQpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImluZGV4IiwKICBwcm9wczogewogICAgLy8g5piv5ZCm56aB55SoCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOS8oOWPguS4umZvcm3ooajljZUg5pa55L6/5pWw5o2u5Zue5pi+5riy5p+TCiAgICBxdWVyeVBhcmFtczogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheV0KICAgIH0sCiAgICBkYXRhczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHJldmVudWVDb2RlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgY29tcENvZGU6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBzZXRQcm9wOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogInJldmVudWVDb2RlIgogICAgfSwKICAgIGZvcm1Qcm9wOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogInJldmVudWVDb2RlIgogICAgfSwKICAgIHJ1bGVzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbIF07CiAgICAgIH0KICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6KGo5qC85pWw5o2uCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGZvcm1EYXRhOiB0aGlzLnF1ZXJ5UGFyYW1zLAogICAgICBwYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5ncy5wb3BQYWdlU2l6ZSwKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICAgIHByb2plY3RUeXBlT3B0aW9uczpbXSwKCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNldFByb3A6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICBpZiAodmFsICE9ICJyZXZlbnVlQ29kZSIgJiYgdGhpcy5mb3JtUHJvcCA9PSAicmV2ZW51ZUNvZGUiKSB7CiAgICAgICAgICB0aGlzLmZvcm1Qcm9wID0gdmFsOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBjcmVhdGVkKCl7CiAgICAgdGhpcy5nZXREaWN0cygiY29zdF94bV9seCIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMucHJvamVjdFR5cGVPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAgIC8vIOmhueebruexu+Wei+Wtl+WFuOe/u+ivkQogICAgICBwcm9qZWN0VHlwZUZvcm1hdChyb3csIGNvbHVtbikgewogICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnByb2plY3RUeXBlT3B0aW9ucywgcm93LnJldmVudWVUeXBlKTsKICAgICAgfSwKICAgIC8vIOaQnOe0ouaVsOaNrgogICAgaGFuZGxlSW5wdXQoZSkgewogICAgICBpZihlLnRhcmdldCl7CiAgICAgICAgICBsZXQgc2VhcmNoUXVlcnk9ewogICAgICAgICAgY29tcENvZGU6dGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQsCiAgICAgICAgICBkZXB0Q29kZTogdGhpcy5mb3JtRGF0YS5kZXB0Q29kZSwKICAgICAgICAgIG5vd0RhdGU6dGhpcy5mb3JtRGF0YS5ub3dEYXRlLnNwbGl0KCItIilbMF0rJy0nK3RoaXMuZm9ybURhdGEubm93RGF0ZS5zcGxpdCgiLSIpWzFdLAogICAgICAgICAgcXVlcnlTdHJpbmc6ZS50YXJnZXQudmFsdWUKICAgICAgICB9CiAgICAgICAgLy8gc2VhcmNoRm9yUHJvamVjdChzZWFyY2hRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gICAgIHRoaXMudGFibGVEYXRhID0gcmVzcG9uc2Uucm93cwogICAgICAgIC8vICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgLy8gfSk7CiAgICAgIH0KCiAgICB9LAogICAgLy8g54K55Ye76KGo5qC86KGMCiAgICBjbGlja1Jvdyhyb3csIGNvbHVtbiwgY2VsbCwgZXZlbnQpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtc1t0aGlzLnNldFByb3BdID0gcm93LnJldmVudWVDb2RlOwogICAgICB0aGlzLiRlbWl0KCJjbGljayIsIHJvdyk7CiAgICAgIHRoaXMuJHJlZnMucG9wb3Zlci5kb0Nsb3NlKCk7CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/components/revenuePop","sourcesContent":["<template>\n<!-- 货架 -->\n    <el-form-item :label=\"label\" :prop=\"formProp\" :rules=\"rules\">\n        <el-popover\n          placement=\"bottom\"\n          ref=\"popover\"\n          width=\"1000\"\n          trigger=\"click\"\n          :disabled = \"disabled\">\n          <el-table  :data=\"tableData\" @cell-click=\"clickRow\"  border stripe height=\"280px\">\n            <el-table-column label=\"项目编码\" align=\"center\" prop=\"revenueCode\" />\n            <el-table-column label=\"项目名称\" align=\"left\" prop=\"revenueName\" />\n            <el-table-column label=\"项目类型\" align=\"center\" prop=\"revenueType\" :formatter=\"projectTypeFormat\" />\n          </el-table>\n          <pagination\n            layout=\"total, prev, pager, next\"\n            v-show=\"total>0\"\n            :total=\"total\"\n            :page.sync=\"params.pageNum\"\n            :limit.sync=\"params.pageSize\"\n            @pagination=\"handleInput\"\n          />\n          <el-input slot=\"reference\" v-model=\"queryParams[setProp]\" :placeholder=\"'请选择'+label\" @input=\"handleInput\" @keyup.enter.native=\"handleInput\"  @focus=\"handleInput\"/>\n        </el-popover>\n      </el-form-item>\n</template>\n\n<script>\n//import { searchForProject } from \"@/api/num/revenue\";\n// label 为空时  调用组件 增加class labelEmpty\nexport default {\n  name: \"index\",\n  props: {\n    // 是否禁用\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    // 传参为form表单 方便数据回显渲染\n    queryParams: {\n      type: [Object, Array]\n    },\n    datas: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    label: {\n      type: String,\n      default: \"\"\n    },\n    revenueCode: {\n      type: [String, Number],\n      default: \"\"\n    },\n    compCode: {\n      type: [String, Number],\n      default: \"\"\n    },\n    setProp: {\n      type: String,\n      default: \"revenueCode\"\n    },\n    formProp: {\n      type: String,\n      default: \"revenueCode\"\n    },\n    rules: {\n      type: Array,\n      default() {\n        return [ ];\n      }\n    },\n  },\n  data() {\n    return {\n      // 表格数据\n      tableData: [],\n      formData: this.queryParams,\n      params: {\n        pageNum: 1,\n        pageSize: this.$store.state.settings.popPageSize,\n      },\n      total: 0,\n      projectTypeOptions:[],\n\n    };\n  },\n  watch: {\n    setProp: {\n      handler(val) {\n        if (val != \"revenueCode\" && this.formProp == \"revenueCode\") {\n          this.formProp = val;\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  created(){\n     this.getDicts(\"cost_xm_lx\").then(response => {\n        this.projectTypeOptions = response.data;\n      });\n  },\n  methods: {\n      // 项目类型字典翻译\n      projectTypeFormat(row, column) {\n        return this.selectDictLabel(this.projectTypeOptions, row.revenueType);\n      },\n    // 搜索数据\n    handleInput(e) {\n      if(e.target){\n          let searchQuery={\n          compCode:this.$store.state.user.userInfo.deptId,\n          deptCode: this.formData.deptCode,\n          nowDate:this.formData.nowDate.split(\"-\")[0]+'-'+this.formData.nowDate.split(\"-\")[1],\n          queryString:e.target.value\n        }\n        // searchForProject(searchQuery).then(response => {\n        //     this.tableData = response.rows\n        //     this.total = response.total;\n        // });\n      }\n\n    },\n    // 点击表格行\n    clickRow(row, column, cell, event) {\n      this.queryParams[this.setProp] = row.revenueCode;\n      this.$emit(\"click\", row);\n      this.$refs.popover.doClose();\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pagination-container {\n  height: 36px !important;\n}\n\n.labelEmpty {\n  ::v-deep .el-form-item {\n    margin-bottom: 12px;\n  }\n  ::v-deep .el-form-item__content {\n    margin-left: 0 !important;\n  }\n}\n</style>\n"]}]}