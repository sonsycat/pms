{"remainingRequest":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\assets\\assetskind\\addEdit.vue?vue&type=style&index=0&id=ac6e9896&scoped=true&lang=css&","dependencies":[{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\assets\\assetskind\\addEdit.vue","mtime":1693362204000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693361949000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693362179000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\postcss-loader\\src\\index.js","mtime":1693362110000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKOjp2LWRlZXAgLnZ1ZS10cmVlc2VsZWN0X192YWx1ZS1jb250YWluZXIsCjo6di1kZWVwIC52dWUtdHJlZXNlbGVjdF9fY29udHJvbCB7CiAgaGVpZ2h0OiAyN3B4OwogIGxpbmUtaGVpZ2h0OiAyNnB4Owp9Cjo6di1kZWVwIC52dWUtdHJlZXNlbGVjdF9fcGxhY2Vob2xkZXIsCjo6di1kZWVwIC52dWUtdHJlZXNlbGVjdF9fc2luZ2xlLXZhbHVlIHsKICBsaW5lLWhlaWdodDogMjZweDsKfQo6OnYtZGVlcCAudnVlLXRyZWVzZWxlY3RfX2lucHV0LWNvbnRhaW5lciB7CiAgZm9udC1zaXplOiAxM3B4Owp9Cg=="},{"version":3,"sources":["addEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEdit.vue","sourceRoot":"src/views/assets/assetskind","sourcesContent":["<template>\n<el-dialog custom-class=\"el-button--primary\" :title=\"title\" :visible.sync=\"open\" width=\"700px\" append-to-body :close-on-click-modal=\"false\" append-to-body @close=\"handleDialogClose\">\n  <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n    <el-row>\n      <el-col :span=\"12\">\n        <el-form-item label=\"分类编码\" prop=\"kindCode\">\n          <el-input v-model=\"form.kindCode\" placeholder=\"系统自动生成\" disabled/>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"分类名称\" prop=\"kindName\">\n          <el-input v-model=\"form.kindName\" placeholder=\"请输入分类名称\"/>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"上级分类\" prop=\"parentCode\">\n          <!-- <el-input v-model=\"form.parentCode\" placeholder=\"请输入上级分类\"/> -->\n          <treeselect @select=\"handleTreeSelect\"  :normalizer=\"normalizer\"  v-model=\"form.parentCode\" :show-count=\"true\" :options=\"assetsKindOpts\" placeholder=\"请选择上级分类\" no-options-text=\"暂无数据\"/>\n\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"资产类型\" prop=\"assetType\">\n          <el-select v-model=\"form.assetType\" placeholder=\"请选择资产类型\" class=\"w100\">\n            <el-option\n              v-for=\"dict in assetTypeOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"是否计量\" prop=\"isMeasure\">\n          <el-select v-model=\"form.isMeasure\" placeholder=\"请选择是否计量\" class=\"w100\">\n            <el-option\n              v-for=\"dict in isMeasureOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"是否折旧\" prop=\"isDepreciation\">\n          <el-select v-model=\"form.isDepreciation\" placeholder=\"请选择是否折旧\" class=\"w100\" @change=\"handleChangeIsDep\">\n            <el-option\n              v-for=\"dict in isDepreciationOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"折旧年限(院)\" :prop=\"form.isDepreciation == '0'?'yearsInstitutes':''\">\n          <el-input v-model=\"form.yearsInstitutes\" type=\"number\" :min=\"0\" placeholder=\"请输入折旧年限(院)\" :disabled=\"form.isDepreciation != '0'\"/>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"折旧年限(科)\" :prop=\"form.isDepreciation == '0'?'yearsDept':''\">\n          <el-input v-model=\"form.yearsDept\" type=\"number\" :min=\"0\" placeholder=\"请输入折旧年限(科)\" :disabled=\"form.isDepreciation != '0'\"/>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"折旧方法\" :prop=\"form.isDepreciation == '0'?'depreciationWay':''\">\n          <el-select v-model=\"form.depreciationWay\" placeholder=\"请选择折旧方法\" class=\"w100\" :disabled=\"form.isDepreciation != '0'\">\n            <el-option\n              v-for=\"dict in depreciationWayOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"是否分摊\" prop=\"isCost\">\n          <el-select v-model=\"form.isCost\" placeholder=\"请选择是否分摊\" class=\"w100\">\n            <el-option\n              v-for=\"dict in isCostOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"是否末级\" prop=\"isLast\">\n          <el-select v-model=\"form.isLast\" placeholder=\"请选择是否末级\" class=\"w100\">\n            <el-option\n              v-for=\"dict in isLastOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-form-item label=\"是否停用\" prop=\"isStop\">\n          <el-select v-model=\"form.isStop\" placeholder=\"请选择是否停用\" class=\"w100\">\n            <el-option\n              v-for=\"dict in isStopOptions\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-col>\n    </el-row>\n  </el-form>\n  <div slot=\"footer\" class=\"dialog-footer\">\n    <el-button type=\"primary\" @click=\"submitForm\">保 存</el-button>\n    <el-button @click=\"cancel\">取 消</el-button>\n  </div>\n</el-dialog>\n</template>\n\n<script>\nimport {\n  listAssetskind,\n  getAssetskind,\n  delAssetskind,\n  addAssetskind,\n  updateAssetskind,\n  exportAssetskind\n} from \"@/api/assets/assetskind\";\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\nexport default {\n  name: \"addEdit\",\n  components: { Treeselect },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: \"\"\n    },\n    proclnsIds: {\n      type: [String, Number],\n      default: \"\"\n    }\n  },\n  data() {\n    return {\n      title: \"固定资产分类 / 新增\",\n      people: [],\n      openDialog: this.open,\n      form: {\n        id: null,\n        kindCode: null,\n        kindName: null,\n        speel: null,\n        parentCode: null,\n        assetType: null,\n        isMeasure: \"1\",\n        isDepreciation: \"0\",\n        yearsInstitutes: null,\n        yearsDept: null,\n        depreciationWay: null,\n        ancestors: null,\n        isCost: \"1\",\n        isLast: \"0\",\n        isStop: \"1\"\n      },\n      popoverD: false,\n      // 使用日期范围\n      probationRange: [],\n      rules: {\n        kindName: [\n          { required: true, message: \"分类名称不能为空\", trigger: \"blur\" }\n        ],\n        assetType: [\n          { required: true, message: \"资产类型不能为空\", trigger: \"change\" }\n        ],\n        isDepreciation: [\n          { required: true, message: \"是否折旧不能为空\", trigger: \"change\" }\n        ],\n        yearsInstitutes: [\n          { required: true, message: \"折旧年限(院)不能为空\", trigger: \"blur\" }\n        ],\n        yearsDept: [\n          { required: true, message: \"折旧年限(科)不能为空\", trigger: \"blur\" }\n        ],\n        depreciationWay: [\n          { required: true, message: \"折旧方法不能为空\", trigger: \"change\" }\n        ],\n        isLast: [\n          { required: true, message: \"是否末级不能为空\", trigger: \"change\" }\n        ],\n        isStop: [\n          { required: true, message: \"是否停用不能为空\", trigger: \"change\" }\n        ]\n      },\n      // 资产类型字典\n      assetTypeOptions: [],\n      // 是否计量字典\n      isMeasureOptions: [],\n      // 是否折旧字典\n      isDepreciationOptions: [],\n      // 折旧方法字典\n      depreciationWayOptions: [],\n      // 是否分摊字典\n      isCostOptions: [],\n      // 是否末级字典\n      isLastOptions: [],\n      // 是否停用字典\n      isStopOptions: [],\n      assetsKindOpts: []\n    };\n  },\n  computed: {},\n  watch: {\n    \"$store.state.dicts\": {\n      handler(val) {\n        // 基础字典\n        let baseDicts = val.baseDicts;\n        this.assetTypeOptions = baseDicts.hrAssetType;\n        this.isMeasureOptions = baseDicts.hrIsChange;\n        this.isDepreciationOptions = baseDicts.hrIsChange;\n        this.depreciationWayOptions = baseDicts.hrAssetDepreciationPlan;\n        this.isCostOptions = baseDicts.hrIsChange;\n        this.isLastOptions = baseDicts.hrIsChange;\n        this.isStopOptions = baseDicts.hrIsChange;\n        // 特殊\n        // this.supplierOptions = val.supplierInfo;\n        // this.userOptions = val.userOptsInfo;\n      },\n      deep: true,\n      immediate: true\n    },\n    id: {\n      handler(val) {\n        this.reset();\n        if (val) {\n          this.id = val;\n          this.title = \"固定资产分类 / 修改\";\n          this.getDetailInfo(val);\n        } else {\n          this.id = \"\";\n          this.form.id = null;\n          this.title = \"固定资产分类 / 新增\";\n          this.popoverD = false;\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val;\n      },\n      deep: true\n    }\n  },\n  mounted() {\n    this.initDic();\n  },\n\n  methods: {\n    handleTreeSelect(val) {\n      this.form.depreciationWay = val.depreciationWay;\n      this.form.assetType = val.assetType;\n    },\n    handleChangeIsDep(val) {\n      if (val == 0) {\n        this.form.yearsInstitutes = \"\";\n        this.form.yearsDept = \"\";\n      } else {\n        this.form.yearsInstitutes = 0;\n        this.form.yearsDept = 0;\n      }\n    },\n    normalizer(node) {\n      return {\n        id: node.kindCode,\n        label: node.kindName,\n        children: node.children\n      };\n    },\n    getDetailInfo(id) {\n      this.reset();\n      getAssetskind(id).then(response => {\n        if (response.code == 200) {\n          this.popoverD = true;\n          this.form = response.data;\n          if (this.form.parentCode == \"0\") {\n            this.form.parentCode = null;\n          }\n        } else {\n          this.msgError(response.msg);\n        }\n      });\n    },\n    reset() {\n      this.resetForm(\"form\");\n    },\n    initDic() {\n      listAssetskind().then(response => {\n        console.log(response, \"response\");\n        if (response.code == 200) {\n          let data = response.rows;\n          this.assetsKindOpts = this.handleTree(data, \"kindCode\", \"parentCode\");\n        } else {\n          this.msgError(response.msg);\n        }\n      });\n    },\n    // 资产类型字典翻译\n    assetTypeFormat(row, column) {\n      return this.selectDictLabel(this.assetTypeOptions, row.assetType);\n    },\n    // 是否计量字典翻译\n    isMeasureFormat(row, column) {\n      return this.selectDictLabel(this.isMeasureOptions, row.isMeasure);\n    },\n    // 是否折旧字典翻译\n    isDepreciationFormat(row, column) {\n      return this.selectDictLabel(\n        this.isDepreciationOptions,\n        row.isDepreciation\n      );\n    },\n    // 折旧方法字典翻译\n    depreciationWayFormat(row, column) {\n      return this.selectDictLabel(\n        this.depreciationWayOptions,\n        row.depreciationWay\n      );\n    },\n    // 是否分摊字典翻译\n    isCostFormat(row, column) {\n      return this.selectDictLabel(this.isCostOptions, row.isCost);\n    },\n    // 是否末级字典翻译\n    isLastFormat(row, column) {\n      return this.selectDictLabel(this.isLastOptions, row.isLast);\n    },\n    // 是否停用字典翻译\n    isStopFormat(row, column) {\n      return this.selectDictLabel(this.isStopOptions, row.isStop);\n    },\n    // 提交\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateAssetskind(this.form).then(response => {\n              if (response.code == \"200\") {\n                this.msgSuccess(\"修改成功!\");\n                this.$emit(\"success\", false);\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          } else {\n            addAssetskind(this.form).then(response => {\n              if (response.code == \"200\") {\n                this.msgSuccess(\"新增成功!\");\n                this.$emit(\"success\", false);\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          }\n        }\n      });\n    },\n    // 取消\n    cancel() {\n      this.$emit(\"cancel\", false);\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit(\"cancel\", false);\n    }\n  }\n};\n</script>\n\n<style scoped>\n::v-deep .vue-treeselect__value-container,\n::v-deep .vue-treeselect__control {\n  height: 27px;\n  line-height: 26px;\n}\n::v-deep .vue-treeselect__placeholder,\n::v-deep .vue-treeselect__single-value {\n  line-height: 26px;\n}\n::v-deep .vue-treeselect__input-container {\n  font-size: 13px;\n}\n</style>\n"]}]}