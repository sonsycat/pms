{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\deptSearch\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\deptSearch\\index.vue","mtime":1693362205035},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyB0cmVlc2VsZWN0LHRyZWVzZWxlY3QyLHRyZWVzZWxlY3QzIH0gZnJvbSAnQC9hcGkvc3lzdGVtL2RlcHQnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJpbmRleCIsDQogIHByb3BzOiB7DQogICAgcXVlcnlQYXJhbXM6IE9iamVjdCwNCiAgICBsYWJlbDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIuWNleS9jSINCiAgICB9LA0KICAgIHNpemU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICJtaW5pIg0KICAgIH0sDQogICAgY2xlYXJhYmxlOnsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICByZWFkb25seTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBkZXB0SWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICJkZXB0SWQiDQogICAgfSwNCiAgICBkZXB0TmFtZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogImRlcHROYW1lIg0KICAgIH0sDQogICAgLy8g6ZyA6KaB5riF56m657G75Ly8IOenkeWupOeahOWAvA0KICAgIGRlcHRDb2RlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAiZGVwdENvZGUiDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgCWxhenk6ZmFsc2UsDQogICAgICAvL+WumuS5ieeCueWHu+asoeaVsCzpu5jorqQw5qyhDQogICAgICB0cmVlQ2xpY2tDb3VudDogMCwNCiAgICAgIGRlcHRQYXJhbXM6IHRoaXMucXVlcnlQYXJhbXMsDQogICAgICBkZXB0U2VhcmNoRm9ybURpYWxvZzogZmFsc2UsDQogICAgICBkZXB0TmFtZUZvcm06IHVuZGVmaW5lZCwNCiAgICAgIGRlcHRPcHRpb25zOiB1bmRlZmluZWQsDQogICAgICBkZWZhdWx0U2hvd05vZGVzOiBbXSwgDQogICAgICBkZWZhdWx0UHJvcHM6IHsNCiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsDQogICAgICAgIGxhYmVsOiAibGFiZWwiDQogICAgICB9LA0KICAgICAgb3BlbjogZmFsc2UsDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIC8vIOm7mOiupOWxleW8gOaJgOacieiKgueCuQ0KICAgICAgZGVmYXVsdEV4cGFuZDogdHJ1ZQ0KICAgIH07DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgICAgdGhpcy5nZXRUcmVlU2VsZWN0KCk7DQogIH0sDQogIHdhdGNoOiB7DQovLwlkZXB0T3B0aW9uczogew0KLy8JCQloYW5kbGVyICgpIHsNCi8vCQkJCXRoaXMuZGVwdE9wdGlvbnMuZm9yRWFjaChpdGVtID0+IHsNCi8vCQkJCQlpZihpdGVtLmNoaWxkcmVuKXsNCi8vCQkJCQkJaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0yID0+IHsNCi8vCQkJCQkJCXRoaXMuZGVmYXVsdFNob3dOb2Rlcy5wdXNoKGl0ZW0yLmlkKQ0KLy8JCQkJCQl9KQ0KLy8JCQkJCX0NCi8vCQkJCX0pDQovLwkJCX0sDQovLy8vCQkJZGVlcDogdHJ1ZSwNCi8vLy8JCQlpbW1lZGlhdGU6IHRydWUNCi8vCQl9LA0KICAgIC8vIOagueaNruWQjeensOetm+mAiemDqOmXqOagkQ0KLy8gIGRlcHROYW1lRm9ybSh2YWwpIHsNCi8vICAJdHJlZXNlbGVjdCh7ZGVwdE5hbWU6dmFsfSkudGhlbihyZXMgPT4gew0KLy8gIAkJY29uc29sZS5sb2cocmVzKTsNCi8vCQkJCWxldCByZXNzID0gcmVzLmRhdGE7DQovLwkJCQl0aGlzLmRlcHRPcHRpb25zID0gcmVzczsNCi8vLy8JICAgICAgdGhpcy5hcHBlbmQoZGF0YSxyZXNzKTsNCi8vCSAgICB9KTsNCi8vLy8gIAljb25zb2xlLmxvZyh2YWwpOw0KLy8vLyAgICB0aGlzLiRyZWZzLnRyZWVGb3JtLmZpbHRlcih2YWwpOw0KLy8gIH0sDQogICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIHRoaXMuZGVwdFBhcmFtcyA9IHZhbDsNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogIAlkZXB0TmFtZUZvcm0yKCkgew0KICAJCWNvbnNvbGUubG9nKHRoaXMuZGVwdE5hbWVGb3JtKTsNCiAgCQl0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgIAl0cmVlc2VsZWN0Myh7ZGVwdE5hbWU6dGhpcy5kZXB0TmFtZUZvcm19KS50aGVuKHJlcyA9PiB7DQogICAgCQljb25zb2xlLmxvZyhyZXMpOw0KCQkJCWxldCByZXNzID0gcmVzLmRhdGE7DQoJCQkJdGhpcy5kZXB0T3B0aW9ucyA9IHJlc3M7DQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7DQoJICAgIH0pOw0KICAgIH0sDQogICAgLy8g54K55Ye7aW5wdXQNCiAgICBoYW5kbGVDbGlja0lucHV0KCkgew0KICAgICAgaWYgKCF0aGlzLnJlYWRvbmx5KSB7DQogICAgICAgIHRoaXMuZGVwdFNlYXJjaEZvcm1EaWFsb2cgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8gdGhpcy5tc2dFcnJvcign56aB5q2i57yW6L6RJykNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldERlcHREYXRhcyhub2RlLHJlc29sdmUpIHsNCiAgICAgIHZhciBwSWQgPSAiIjsNCiAgICAgIGlmIChub2RlLmxldmVsID09PSAwKSB7DQogICAgICAgIHBJZCA9ICIiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcElkID0gbm9kZS5kYXRhLmlkOw0KICAgICAgfQ0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCiAgICAgICAgdHJlZXNlbGVjdCh7IHBhcmVudElkOiBwSWQgfSkudGhlbihyZXMgPT4gew0KICAgICAgICAJY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICBpZiAocmVzb2x2ZSkgew0KICAgICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuZGVwdE9wdGlvbnMgPSByZXMuZGF0YTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIH0pOw0KICAgICAgfSwgMTAwKTsNCiAgICB9LA0KICAgIC8v6I635Y+W5Y2V5L2N5qCRDQogICAgZ2V0VHJlZVNlbGVjdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICB0cmVlc2VsZWN0MigpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgCWNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgdGhpcy5kZXB0T3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7DQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOw0KICAgICAgfSk7DQogICAgfSwNCglhcHBlbmQoZGF0YSxyZXMpIHsNCgkJaWYoZGF0YS5jaGlsZHJlbil7DQoJCQlkYXRhLmNoaWxkcmVuID0gW107DQoJCX0NCiAgICAgCWZvcihsZXQgaT0wO2k8cmVzLmxlbmd0aDtpKyspew0KICAgICAJCWxldCBuZXdDaGlsZCA9IHsgaWQ6IHJlc1tpXS5pZCwgbGFiZWw6cmVzW2ldLmxhYmVsLCBjaGlsZHJlbjogW10gfQ0KCSAgICAgIAlpZiAoIWRhdGEuY2hpbGRyZW4pIHsNCgkgICAgICAgICAgdGhpcy4kc2V0KGRhdGEsJ2NoaWxkcmVuJyxbXSk7DQoJICAgICAgIAl9DQogICAgICAgIAlkYXRhLmNoaWxkcmVuLnB1c2gobmV3Q2hpbGQpOyAgDQogICAgIAl9DQogIAl9LA0KICAgIC8vIGZvcm3ooajljZXkuK1zZWFyY2joioLngrnljZXlh7vkuovku7YNCiAgICBoYW5kbGVGb3JtTm9kZUNsaWNrKGRhdGEpIHsNCiAgICAJaWYoZGF0YS5jaGlsZHJlbil7DQogICAgCX1lbHNlew0KICAgIAkJZGVsZXRlIGRhdGEuY2hpbGRyZW47DQogICAgCX0NCgkJdHJlZXNlbGVjdCh7IHBhcmVudElkOiBkYXRhLmlkIH0pLnRoZW4ocmVzID0+IHsNCgkJCWxldCByZXNzID0gcmVzLmRhdGE7DQoJICAgICAgCXRoaXMuYXBwZW5kKGRhdGEscmVzcyk7DQoJICAgIH0pOw0KICAgICAgLy/orrDlvZXngrnlh7vmrKHmlbANCiAgICAgIHRoaXMudHJlZUNsaWNrQ291bnQrKzsNCiAgICAgIC8v5Y2V5qyh54K55Ye75qyh5pWw6LaF6L+HMuasoeS4jeS9nOWkhOeQhiznm7TmjqXov5Tlm54s5Lmf5Y+v5Lul5ouT5bGV5oiQ5aSa5Ye75LqL5Lu2DQogICAgICBpZiAodGhpcy50cmVlQ2xpY2tDb3VudCA+PSAyKSB7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIC8v6K6h5pe25ZmoLOiuoeeulzMwMOavq+enkuS4uuWNleS9jSzlj6/oh6rooYzkv67mlLkNCiAgICAgIHRoaXMudGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIGlmICh0aGlzLnRyZWVDbGlja0NvdW50ID09IDEpIHsNCiAgICAgICAgICAvL+aKiuasoeaVsOW9kumbtg0KICAgICAgICAgIHRoaXMudHJlZUNsaWNrQ291bnQgPSAwOw0KICAgICAgICAgIC8v5Y2V5Ye75LqL5Lu25aSE55CGDQogICAgICAgICAgLy8JCQkJCWNvbnNvbGUubG9nKCLljZXlh7vkuovku7YiKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRyZWVDbGlja0NvdW50ID4gMSkgew0KICAgICAgICAgIC8v5oqK5qyh5pWw5b2S6Zu2DQogICAgICAgICAgdGhpcy50cmVlQ2xpY2tDb3VudCA9IDA7DQogICAgICAgICAgLy/lj4zlh7vkuovku7YNCiAgICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zW3RoaXMuZGVwdENvZGVdID0gbnVsbDsNCiAgICAgICAgICB0aGlzLmRlcHRQYXJhbXNbdGhpcy5kZXB0SWRdID0gZGF0YS5pZDsNCiAgICAgICAgICB0aGlzLmRlcHRQYXJhbXNbdGhpcy5kZXB0TmFtZV0gPSBkYXRhLmxhYmVsOw0KICAgICAgICAgIHRoaXMuZGVwdFNlYXJjaEZvcm1EaWFsb2cgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuZGVwdFBhcmFtcyk7DQogICAgICAgIH0NCiAgICAgIH0sIDMwMCk7DQogICAgfSwNCiAgICAvLyBzZWFyY2jnrZvpgInoioLngrkNCiAgICBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7DQogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsNCiAgICAgIHJldHVybiBkYXRhLmxhYmVsLmluZGV4T2YodmFsdWUpICE9PSAtMTsNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZSh2YWx1ZSkgew0KICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICB0aGlzLmRlcHRQYXJhbXNbdGhpcy5kZXB0SWRdID0gIiI7DQogICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5kZXB0UGFyYW1zKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOWIt+aWsOagkeiKgueCuQ0KICAgIGhhbmRsZVJlZnJlc2goKSB7DQogICAgCXRoaXMuZGVwdE5hbWVGb3JtID0gIiI7DQogICAgICB0aGlzLmdldFRyZWVTZWxlY3QoKTsNCi8vICAgIHRoaXMuZ2V0RGVwdERhdGFzKCk7DQogICAgfSwNCiAgICAvLyDlsZXlvIDmlLbnvKnmoJHnu5PngrkNCiAgICBoYW5kbGVFeHBhbmQoZmxhZykgew0KICAgICAgLy8g5bCG5rKh5pyJ6L2s5o2i5oiQ5qCR55qE5Y6f5pWw5o2uDQogICAgICBsZXQgdHJlZUxpc3QgPSB0aGlzLmRlcHRPcHRpb25zOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlTGlzdC5sZW5ndGg7IGkrKykgew0KICAgICAgICB0aGlzLiRyZWZzLnRyZWVGb3JtLnN0b3JlLm5vZGVzTWFwW3RyZWVMaXN0W2ldLmlkXS5leHBhbmRlZCA9IGZsYWc7DQogICAgICB9DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/components/deptSearch","sourcesContent":["<template>\r\n  <div class=\"deptSearch el-form-item\" >\r\n  \t\t<el-form-item :label=\"label\" :prop=\"deptName\">\r\n       \t<el-input :size=\"size\" :readonly=\"readonly\" :clearable=\"clearable\" @keyup.enter.native=\"handleQuery\" v-on:click.native=\"handleClickInput\" :placeholder=\"`请选择${label}`\" v-model=\"deptParams[deptName]\" @change=\"handleChange\" style=\"width:100%\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"\" :prop=\"deptId\" style=\"display:none\">\r\n\t      <el-input type=\"text\" v-model=\"deptParams[deptId]\" @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-dialog custom-class=\"el-button--primary\" :visible.sync=\"deptSearchFormDialog\" id=\"deptDialog\" :close-on-click-modal=\"false\" :title=\"`选择${label}`\" append-to-body\r\n               width=\"500px\" height=\"80%\">\r\n        <div>\r\n          <div class=\"head-container\">\r\n            <el-row>\r\n              <el-col :span=\"16\" class=\"pr5\">\r\n                <el-input\r\n                \t@input = \"deptNameForm2\"\r\n                    v-model=\"deptNameForm\"\r\n                    placeholder=\"请输入机构名称\"\r\n                    clearable\r\n                    size=\"small\"\r\n                    prefix-icon=\"el-icon-search\"\r\n                    style=\"margin-bottom: 20px;\"\r\n                  />\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                  <el-button\r\n                      size=\"mini\"\r\n                      type=\"text\"\r\n                      icon=\"el-icon-refresh\"\r\n                      @click=\"handleRefresh\"\r\n                    >刷新</el-button>\r\n                    <el-button\r\n                      size=\"mini\"\r\n                      type=\"text\"\r\n                      icon=\"el-icon-arrow-down\"\r\n                      @click=\"handleExpand(true)\"\r\n                    >展开</el-button>\r\n                    <el-button\r\n                      size=\"mini\"\r\n                      type=\"text\"\r\n                      icon=\"el-icon-arrow-up\"\r\n                      @click=\"handleExpand(false)\"\r\n                    >折叠</el-button>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n          <div class=\"head-container\">\r\n            <el-tree\r\n            \t:lazy=\"lazy\"\r\n              node-key=\"id\"\r\n              v-loading=\"loading\"\r\n              :data=\"deptOptions\"\r\n              :load=\"getDeptDatas\"\r\n              :props=\"defaultProps\"\r\n              :filter-node-method=\"filterNode\"\r\n              :default-expand-all=\"defaultExpand\"\r\n              ref=\"treeForm\"\r\n              :default-expanded-keys=\"defaultShowNodes\"\r\n              @node-click=\"handleFormNodeClick\"\r\n            />\r\n          </div>\r\n        </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { treeselect,treeselect2,treeselect3 } from '@/api/system/dept'\r\nexport default {\r\n  name: \"index\",\r\n  props: {\r\n    queryParams: Object,\r\n    label: {\r\n      type: String,\r\n      default: \"单位\"\r\n    },\r\n    size: {\r\n      type: String,\r\n      default: \"mini\"\r\n    },\r\n    clearable:{\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    readonly: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    deptId: {\r\n      type: String,\r\n      default: \"deptId\"\r\n    },\r\n    deptName: {\r\n      type: String,\r\n      default: \"deptName\"\r\n    },\r\n    // 需要清空类似 科室的值\r\n    deptCode: {\r\n      type: String,\r\n      default: \"deptCode\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n    \tlazy:false,\r\n      //定义点击次数,默认0次\r\n      treeClickCount: 0,\r\n      deptParams: this.queryParams,\r\n      deptSearchFormDialog: false,\r\n      deptNameForm: undefined,\r\n      deptOptions: undefined,\r\n      defaultShowNodes: [], \r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\"\r\n      },\r\n      open: false,\r\n      loading: false,\r\n      // 默认展开所有节点\r\n      defaultExpand: true\r\n    };\r\n  },\r\n  mounted() {\r\n       this.getTreeSelect();\r\n  },\r\n  watch: {\r\n//\tdeptOptions: {\r\n//\t\t\thandler () {\r\n//\t\t\t\tthis.deptOptions.forEach(item => {\r\n//\t\t\t\t\tif(item.children){\r\n//\t\t\t\t\t\titem.children.forEach(item2 => {\r\n//\t\t\t\t\t\t\tthis.defaultShowNodes.push(item2.id)\r\n//\t\t\t\t\t\t})\r\n//\t\t\t\t\t}\r\n//\t\t\t\t})\r\n//\t\t\t},\r\n////\t\t\tdeep: true,\r\n////\t\t\timmediate: true\r\n//\t\t},\r\n    // 根据名称筛选部门树\r\n//  deptNameForm(val) {\r\n//  \ttreeselect({deptName:val}).then(res => {\r\n//  \t\tconsole.log(res);\r\n//\t\t\t\tlet ress = res.data;\r\n//\t\t\t\tthis.deptOptions = ress;\r\n////\t      this.append(data,ress);\r\n//\t    });\r\n////  \tconsole.log(val);\r\n////    this.$refs.treeForm.filter(val);\r\n//  },\r\n    queryParams: {\r\n      handler(val) {\r\n        this.deptParams = val;\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n  \tdeptNameForm2() {\r\n  \t\tconsole.log(this.deptNameForm);\r\n  \t\tthis.loading = true;\r\n    \ttreeselect3({deptName:this.deptNameForm}).then(res => {\r\n    \t\tconsole.log(res);\r\n\t\t\t\tlet ress = res.data;\r\n\t\t\t\tthis.deptOptions = ress;\r\n\t\t\t\tthis.loading = false;\r\n\t    });\r\n    },\r\n    // 点击input\r\n    handleClickInput() {\r\n      if (!this.readonly) {\r\n        this.deptSearchFormDialog = true;\r\n      } else {\r\n        // this.msgError('禁止编辑')\r\n      }\r\n    },\r\n    getDeptDatas(node,resolve) {\r\n      var pId = \"\";\r\n      if (node.level === 0) {\r\n        pId = \"\";\r\n      } else {\r\n        pId = node.data.id;\r\n      }\r\n      setTimeout(() => {\r\n          this.loading = true;\r\n        treeselect({ parentId: pId }).then(res => {\r\n        \tconsole.log(res);\r\n          if (resolve) {\r\n            resolve(res.data);\r\n          } else {\r\n            this.deptOptions = res.data;\r\n          }\r\n          this.loading = false;\r\n        });\r\n      }, 100);\r\n    },\r\n    //获取单位树\r\n    getTreeSelect() {\r\n      this.loading = true;\r\n      treeselect2().then(response => {\r\n      \tconsole.log(response);\r\n        this.deptOptions = response.data;\r\n        this.loading = false;\r\n      });\r\n    },\r\n\tappend(data,res) {\r\n\t\tif(data.children){\r\n\t\t\tdata.children = [];\r\n\t\t}\r\n     \tfor(let i=0;i<res.length;i++){\r\n     \t\tlet newChild = { id: res[i].id, label:res[i].label, children: [] }\r\n\t      \tif (!data.children) {\r\n\t          this.$set(data,'children',[]);\r\n\t       \t}\r\n        \tdata.children.push(newChild);  \r\n     \t}\r\n  \t},\r\n    // form表单中search节点单击事件\r\n    handleFormNodeClick(data) {\r\n    \tif(data.children){\r\n    \t}else{\r\n    \t\tdelete data.children;\r\n    \t}\r\n\t\ttreeselect({ parentId: data.id }).then(res => {\r\n\t\t\tlet ress = res.data;\r\n\t      \tthis.append(data,ress);\r\n\t    });\r\n      //记录点击次数\r\n      this.treeClickCount++;\r\n      //单次点击次数超过2次不作处理,直接返回,也可以拓展成多击事件\r\n      if (this.treeClickCount >= 2) {\r\n        return;\r\n      }\r\n      //计时器,计算300毫秒为单位,可自行修改\r\n      this.timer = window.setTimeout(() => {\r\n        if (this.treeClickCount == 1) {\r\n          //把次数归零\r\n          this.treeClickCount = 0;\r\n          //单击事件处理\r\n          //\t\t\t\t\tconsole.log(\"单击事件\");\r\n        } else if (this.treeClickCount > 1) {\r\n          //把次数归零\r\n          this.treeClickCount = 0;\r\n          //双击事件\r\n          this.queryParams[this.deptCode] = null;\r\n          this.deptParams[this.deptId] = data.id;\r\n          this.deptParams[this.deptName] = data.label;\r\n          this.deptSearchFormDialog = false;\r\n          this.$emit(\"input\", this.deptParams);\r\n        }\r\n      }, 300);\r\n    },\r\n    // search筛选节点\r\n    filterNode(value, data) {\r\n      if (!value) return true;\r\n      return data.label.indexOf(value) !== -1;\r\n    },\r\n    handleChange(value) {\r\n      if (!value) {\r\n        this.deptParams[this.deptId] = \"\";\r\n        this.$emit(\"input\", this.deptParams);\r\n      }\r\n    },\r\n    // 刷新树节点\r\n    handleRefresh() {\r\n    \tthis.deptNameForm = \"\";\r\n      this.getTreeSelect();\r\n//    this.getDeptDatas();\r\n    },\r\n    // 展开收缩树结点\r\n    handleExpand(flag) {\r\n      // 将没有转换成树的原数据\r\n      let treeList = this.deptOptions;\r\n      for (let i = 0; i < treeList.length; i++) {\r\n        this.$refs.treeForm.store.nodesMap[treeList[i].id].expanded = flag;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.deptSearch {\r\n  margin-bottom: 0 !important;\r\n}\r\n// 单位弹框样式更改\r\n#deptDialog {\r\n  ::v-deep .el-dialog {\r\n    height: 80%;\r\n    overflow: hidden;\r\n    .el-dialog__body {\r\n      height: calc(100% - 54px);\r\n      overflow: hidden;\r\n      > div {\r\n        height: 100%;\r\n        .head-container:last-of-type {\r\n          height: calc(100% - 54px);\r\n          overflow-y: auto;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}