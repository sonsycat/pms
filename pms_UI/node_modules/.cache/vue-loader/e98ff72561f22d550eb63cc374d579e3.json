{"remainingRequest":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hrp\\zjry-pms-ui\\src\\views\\subsidy\\formDesign\\formMaking\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\hrp\\zjry-pms-ui\\src\\views\\subsidy\\formDesign\\formMaking\\index.vue","mtime":1682043104773},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7c2F2ZURlc2lnbiwgZ2V0Rm9ybSwgZ2V0Rm9ybURlc2lnbn0gZnJvbSAnQC9hcGkvc3Vic2lkeS9mb3JtUHJvY2VzcycKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybU5hbWU6ICcnLAogICAgICBqc29uRGF0YTogewogICAgICAgIGxpc3Q6IFtdLAogICAgICB9LAogICAgICBmb3JtRGVzaWduSWQ6ICIiLAoKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZvcm1EZXNpZ25JZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmZvcm1EZXNpZ25JZAogICAgbGV0IGRhdGEgPSB7CiAgICAgIGZvcm1EZXNpZ25JZDogdGhpcy5mb3JtRGVzaWduSWQKICAgIH0KICAgIHRoaXMuaGFuZGxlRm9ybVJlYWR5KCk7Ci8vICAgICAgZ2V0Rm9ybShkYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKLy8gICAgICAJY29uc29sZS5sb2cocmVzcG9uc2UpOwovLyAgICAgIAlsZXQganNvbnMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuZm9ybUpzb24pCi8vICAgICAgCWNvbnNvbGUubG9nKGpzb25zKTsKLy8vLyAgICAgIAl0aGlzLmpzb25EYXRhID0ganNvbnMKLy8gICAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRm9ybVJlYWR5KCkgewogICAgICBjb25zdCBmb3JtRGVzaWduSWQgPSB0aGlzLmZvcm1EZXNpZ25JZDsKICAgICAgZ2V0Rm9ybURlc2lnbihmb3JtRGVzaWduSWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIGNvbnN0IGZvcm1Kc29uID0gcmVzcG9uc2UuZGF0YS5mb3JtSnNvbjsKICAgICAgICBpZiAoZm9ybUpzb24gIT0gbnVsbCAmJiBmb3JtSnNvbiAhPSAnJykgewogICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGZvcm1Kc29uKTsKICAgICAgICAgIGRhdGEuc2l6ZSA9ICJtaW5pIgogICAgICAgICAgZGF0YS5saXN0LmZvckVhY2goXyA9PiB7CiAgICAgICAgICAgIF8uc2l6ZSA9ICJtaW5pIjsKICAgICAgICAgICAgXy5vcHRpb25zLmRpc2FibGVkID0gXy5vcHRpb25zLmRpc2FibGVkID09ICJmYWxzZSIgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgIF8ub3B0aW9ucy5yZXF1aXJlZCA9IF8ub3B0aW9ucy5yZXF1aXJlZCA9PSAiZmFsc2UiID8gZmFsc2UgOiB0cnVlOwogICAgICAgICAgICBfLmNvbHVtbnMgJiYgXy5jb2x1bW5zLmZvckVhY2goaXRlID0+IHsKICAgICAgICAgICAgICBpdGUuc3BhbiA9IGl0ZS5zcGFuICogMTsKICAgICAgICAgICAgICBpdGUubGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgaXRlbS5zaXplID0gIm1pbmkiOwogICAgICAgICAgICAgICAgaXRlbS5vcHRpb25zLmRpc2FibGVkID0gaXRlbS5vcHRpb25zLmRpc2FibGVkID09ICJmYWxzZSIgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgICAgICBpdGVtLm9wdGlvbnMucmVxdWlyZWQgPSBpdGVtLm9wdGlvbnMucmVxdWlyZWQgPT0gImZhbHNlIiA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICAgfSkKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubWFraW5nZm9ybS5zZXRKU09OKGRhdGEpCiAgICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGQpCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIGNvbnN0IGpzb24gPSB0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uZ2V0SlNPTigpOwogICAgICBsZXQgc2F2ZUxvYWRpbmcgPSB0aGlzLnNhdmVMb2FkaW5nKCkKICAgICAgc2F2ZURlc2lnbih0aGlzLmZvcm1EZXNpZ25JZCwganNvbiwgdGhpcy4kcmVmcy5tYWtpbmdmb3JtLmdldEh0bWwoKSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLkv53lrZjmiJDlip8iKTsKICAgICAgICBzYXZlTG9hZGluZy5jbG9zZSgpCiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB9KQogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvZGVsVmlldycsIHRoaXMuJHJvdXRlKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9jbGJ0L0NMQlRaRFkvQ0xaRFlCRCcsIHF1ZXJ5OiB7dDogRGF0ZS5ub3coKX19KQogICAgfSwKICB9LAoKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/subsidy/formDesign/formMaking","sourcesContent":["<template>\n  <div class=\"dynamicForm\">\n    <!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\n    <fm-making-form\n      ref=\"makingform\"\n      style=\"height:600px;display: block;\"\n      preview\n      generate-code\n      generate-json\n    >\n      <!-- 头部内容自定义，添加提交按钮 -->\n      <template slot=\"action\">\n        <el-button type=\"primary\" @click=\"handleSubmit\">保存</el-button>\n      </template>\n    </fm-making-form>\n\n    <div class=\"list-wraper previewForm\">\n      <fm-generate-form\n        :data=\"jsonData\"\n        ref=\"generateForm\">\n      </fm-generate-form>\n      <!--<el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>-->\n    </div>\n  </div>\n</template>\n\n<script>\nimport {saveDesign, getForm, getFormDesign} from '@/api/subsidy/formProcess'\n\nexport default {\n  data() {\n    return {\n      formName: '',\n      jsonData: {\n        list: [],\n      },\n      formDesignId: \"\",\n\n    }\n  },\n  components: {},\n  created() {\n    this.formDesignId = this.$route.query.formDesignId\n    let data = {\n      formDesignId: this.formDesignId\n    }\n    this.handleFormReady();\n//      getForm(data).then(response => {\n//      \tconsole.log(response);\n//      \tlet jsons = JSON.parse(response.data.formJson)\n//      \tconsole.log(jsons);\n////      \tthis.jsonData = jsons\n//      })\n  },\n  methods: {\n    handleFormReady() {\n      const formDesignId = this.formDesignId;\n      getFormDesign(formDesignId).then(response => {\n        console.log(response)\n        const formJson = response.data.formJson;\n        if (formJson != null && formJson != '') {\n          let data = JSON.parse(formJson);\n          data.size = \"mini\"\n          data.list.forEach(_ => {\n            _.size = \"mini\";\n            _.options.disabled = _.options.disabled == \"false\" ? false : true;\n            _.options.required = _.options.required == \"false\" ? false : true;\n            _.columns && _.columns.forEach(ite => {\n              ite.span = ite.span * 1;\n              ite.list.forEach(item => {\n                item.size = \"mini\";\n                item.options.disabled = item.options.disabled == \"false\" ? false : true;\n                item.options.required = item.options.required == \"false\" ? false : true;\n              })\n            })\n          })\n          try {\n            this.$refs.makingform.setJSON(data)\n          } catch (d) {\n            console.log(d)\n          }\n        }\n      });\n    },\n    handleSubmit() {\n      const json = this.$refs.makingform.getJSON();\n      let saveLoading = this.saveLoading()\n      saveDesign(this.formDesignId, json, this.$refs.makingform.getHtml()).then(response => {\n        this.msgSuccess(\"保存成功\");\n        saveLoading.close()\n        this.close();\n      })\n    },\n    close() {\n      this.$store.dispatch('tagsView/delView', this.$route)\n      this.$router.push({path: '/clbt/CLBTZDY/CLZDYBD', query: {t: Date.now()}})\n    },\n  },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dynamicForm {\n  ::v-deep .el-aside {\n    width: 310px !important;\n\n    &.widget-config-container {\n      width: 350px !important;\n\n      .el-form-item__content {\n        margin-left: 0 !important\n      }\n    }\n  }\n}\n</style>\n"]}]}