{"remainingRequest":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\evaluate\\set\\bonusIndex.vue?vue&type=style&index=0&id=e216a068&lang=scss&scoped=true&","dependencies":[{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\evaluate\\set\\bonusIndex.vue","mtime":1693362205000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693361949000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693362179000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\postcss-loader\\src\\index.js","mtime":1693362110000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693362152000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCjo6di1kZWVwIC5tYjEwIHsKICBoZWlnaHQ6IDEwMCU7CiAgLmVsLWNhcmRfX2JvZHkgewogICAgcGFkZGluZzogMTBweDsKICAgIGhlaWdodDogMTAwJTsKICB9CiAgLmVsLXRhYmxlewogICAgaGVpZ2h0OiBjYWxjKDEwMHZoIC0gMjIwcHgpOwogIH0KfQouYXBwLWNvbnRhaW5lcntwYWRkaW5nOiAwcHg7fQo="},{"version":3,"sources":["bonusIndex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bonusIndex.vue","sourceRoot":"src/views/evaluate/set","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div ref=\"search\">\n      <el-form ref=\"queryForm\" :inline=\"true\" v-show=\"showSearch\">\n        <el-form-item label=\"科室类别\" prop=\"deptRoomType\" >\n          <el-select class=\"w100\" v-model=\"deptRoomType\" @change=\"switchDeptRoomType($event)\"  placeholder=\"请选择科室类别\">\n            <el-option\n              v-for=\"dict in deptRoomTypeDict\"\n              :key=\"dict.dictValue\"\n              :label=\"dict.dictLabel\"\n              :value=\"dict.dictValue\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" icon=\"el-icon-document\" size=\"mini\" @click=\"submitForm\">保 存</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"12\" class=\"mb10\">\n        <el-card>\n          <el-col :span=\"12\">\n            <span style=\"font-size:16px\">待选指标</span>\n          </el-col>\n          <el-table\n            v-loading=\"indexListLoading\"\n            :data=\"indexUnSelectedList\"\n            :row-class-name=\"tableRowClassName\"\n            @select=\"selectIndex\"\n            @row-dblclick=\"rowClickWaitClass\"\n            height=\"calc('100% - 48px')\"\n          >\n            <el-table-column type=\"index\" width=\"50\"> </el-table-column>\n            <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n            <el-table-column label=\"指标名称\" align=\"left\" prop=\"indexName\" show-overflow-tooltip/>\n          </el-table>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\" class=\"mb10\">\n        <el-card>\n          <el-col :span=\"10\">\n            <span style=\"font-size:16px\">已选指标</span>\n          </el-col>\n          <el-table\n            v-loading=\"indexSelectedLoading\"\n            :data=\"indexSelectedList\"\n            :row-class-name=\"tableRowClassName\"\n            @row-dblclick=\"rowClickHasClass\"\n            @select=\"unselectIndex\"\n            height=\"calc('100% - 48px')\"\n          >\n            <el-table-column type=\"index\" width=\"50\"> </el-table-column>\n            <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\n            <el-table-column label=\"指标名称\" align=\"left\" prop=\"indexName\" show-overflow-tooltip/>\n          </el-table>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport {listBonusIndex, saveBonusIndex} from \"@/api/evaluate/index\";\n\nexport default {\n  name: 'BonusIndex',\n  props: {\n\n  },\n  data() {\n    return {\n      indexSelectedLoading:false,\n      indexListLoading:false,\n      form:{},\n      rules:{},\n      showSearch:true,\n      deptRoomTypeDict:[],\n      deptRoomType: null,\n      indexList: [],\n      // 未选指标\n      indexUnSelectedList: [],\n      // 已选指标\n      indexSelectedList: [],\n      dataLists:[],\n    };\n  },\n\n  created(){\n    this.getDicts(\"JXGL_JJ_KSLB\").then(response=>{\n      this.deptRoomTypeDict = response.data;\n      this.deptRoomType = this.deptRoomTypeDict[0].dictValue;\n    })\n    this.getBonusIndexList();\n  },\n\n  mounted() {\n\n  },\n\n  methods: {\n    /** 获取奖金指标列表 */\n    getBonusIndexList(){\n      let param = {orgType: \"2\"};//科\n      listBonusIndex(param).then(response => {\n        this.indexList = response.data;\n        this.getBonusIndexListSelected(this.deptRoomType)\n        this.indexSelectedLoading = false\n      });\n    },\n    /** 获取已选指标列表 */\n    getBonusIndexListSelected(deptRoomType){\n      this.indexUnSelectedList = [];\n      this.indexSelectedList = [];\n      this.indexList.forEach(item=>{\n        if(deptRoomType == '0'){\n          // 独立核算\n          if(item.deptType != '2'){\n\n          }\n        }else if(deptRoomType == '1'){\n          // 平均奖\n          if(item.deptType == '2'){\n\n          }\n        }\n        if((deptRoomType == '0' && item.deptType != '2') || deptRoomType == '1' && item.deptType == '2'){\n          if(!item.deptRoomType){\n            this.indexUnSelectedList.push(item);\n          }else if(item.deptRoomType == deptRoomType){\n            this.indexSelectedList.push(item);\n          }\n        }\n      })\n    },\n\n    tableRowClassName({ row, rowIndex }) {\n      row.index = rowIndex;\n    },\n    // 待选角色多选框选中数据\n    selectIndex(selection, row) {\n      this.rowClickWaitClass(selection[0])\n    },\n    //待选角色 点击行\n    rowClickWaitClass(selection){\n      this.indexSelectedList.push(selection);\n      this.indexUnSelectedList.splice(selection.index, 1);\n    },\n    // 已选角色多选框选中数据\n    unselectIndex(selection, row) {\n      this.rowClickHasClass(selection[0])\n    },\n    // 已经选择点击行\n    rowClickHasClass(selection){\n      this.indexUnSelectedList.push(selection);\n      this.indexSelectedList.splice(selection.index, 1);\n    },\n    switchDeptRoomType(all){\n      this.getBonusIndexListSelected(all);\n    },\n\n    submitForm(){\n      if(!this.deptRoomType){\n        this.msgError(\"未选择科室类别\");\n        return;\n      }\n      let data = {\n        compCode: this.$store.state.user.userInfo.deptId,\n        deptRoomType: this.deptRoomType,\n        evaluateIndexBonusList: this.indexSelectedList.map(item=>{\n          this.dataLists.forEach(ite=>{\n            if(ite.indexName==item.indexName){\n              item.indexCode=ite.indexCode\n            }\n          })\n          return item\n        })\n      }\n      const saveLoading=this.saveLoading()\n      saveBonusIndex(data).then(response=>{\n        if(response.code==200){\n          this.msgSuccess(\"保存成功\");\n          this.$emit(\"success\", false);\n          this.getBonusIndexList();\n          saveLoading.close()\n        }\n      })\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n::v-deep .mb10 {\n  height: 100%;\n  .el-card__body {\n    padding: 10px;\n    height: 100%;\n  }\n  .el-table{\n    height: calc(100vh - 220px);\n  }\n}\n.app-container{padding: 0px;}\n</style>\n"]}]}