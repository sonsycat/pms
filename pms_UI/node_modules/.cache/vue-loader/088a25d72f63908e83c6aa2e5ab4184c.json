{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\evaluate\\set\\addBonus.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\evaluate\\set\\addBonus.vue","mtime":1693362205627},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHZhbGlkRW1haWwgfSBmcm9tJ0AvdXRpbHMvdmFsaWRhdGUnCmltcG9ydCB7IGxpc3RCb251cywgZ2V0U2V0LCBkZWxTZXQsIGFkZEJvbnVzLCB1cGRhdGVTZXQsIGV4cG9ydFNldCwgc2V0VHlwZSB9IGZyb20gIkAvYXBpL2V2YWx1YXRlL3NldCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZEVkaXQiLAogIHByb3BzOiB7CiAgICBvcGVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBpZDogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICB0aGlzLmlkID0gdmFsOwogICAgICAgICAgdGhpcy50aXRsZSA9ICLlpZbph5HmjIfmoIfpm4bnrqHnkIYt57yW6L6RIjsKICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsSW5mbygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmlkID0gIiI7CiAgICAgICAgICB0aGlzLnRpdGxlID0gIuWllumHkeaMh+agh+mbhueuoeeQhi3mlrDlop4iOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgb3BlbjogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMub3BlbkRpYWxvZyA9IHZhbDsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAi5oyH5qCH6ZuG566h55CGLeaWsOWiniIsCiAgICAgIG9wZW5EaWFsb2c6IHRoaXMub3BlbiwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHt9LAogICAgICBvcmdUeXBlT3B0aW9uczogW10sCiAgICAgIHBhcnRZZWFyT3B0aW9uczogW10sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICAgIG9uZUNvZGU6WwogICAgICAgICAgeyByZXF1aXJlZDp0cnVlLG1lc3NhZ2U6J+S4gOe6p+WIhuexu+S4jeiDveS4uuepuicsdHJpZ2dlcjpbJ2JsdXInLCdjaGFuZ2UnXSB9CiAgICAgICAgXSwKICAgICAgICBzZWNvbmRDb2RlOlsKICAgICAgICAgIHsgcmVxdWlyZWQ6dHJ1ZSxtZXNzYWdlOifkuoznuqfliIbnsbvkuI3og73kuLrnqbonLHRyaWdnZXI6WydibHVyJywnY2hhbmdlJ10gfQogICAgICAgIF0sCiAgICAgICAgc2V0TmFtZTpbCiAgICAgICAgICB7IHJlcXVpcmVkOnRydWUsbWVzc2FnZTon5oyH5qCH6ZuG5ZCN56ew5LiN6IO95Li656m6Jyx0cmlnZ2VyOlsnYmx1cicsJ2NoYW5nZSddIH0KICAgICAgICBdLAogICAgICAgIG9yZ1R5cGU6WwogICAgICAgICAgeyByZXF1aXJlZDp0cnVlLG1lc3NhZ2U6J+mAgueUqOWvueixoeS4jeiDveS4uuepuicsdHJpZ2dlcjpbJ2JsdXInLCdjaGFuZ2UnXSB9CiAgICAgICAgXSwKICAgICAgICBwYXJ0WWVhcjpbCiAgICAgICAgICB7IHJlcXVpcmVkOnRydWUsbWVzc2FnZTon6YCC55So5bm05Lu95LiN6IO95Li656m6Jyx0cmlnZ2VyOlsnYmx1cicsJ2NoYW5nZSddIH0KICAgICAgICBdLAoKICAgICAgfSwKICAgICAgLy/kuIDnuqfliIbnsbsKICAgICAgb25lQ29kZU9wdGlvbnM6W10sCiAgICAgIHNlY29uZENvZGVPcHRpb25zOltdLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0RGljdHMoInBtc196Yl96eiIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLm9yZ1R5cGVPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogICAgdGhpcy5nZXREaWN0cygicG1zX3pial9uZiIpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLnBhcnRZZWFyT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuc2V0VHlwZSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREZXRhaWxJbmZvKCkgewogICAgICBnZXRTZXQodGhpcy5pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5zZXRUeXBlKHRoaXMuZm9ybS5vbmVDb2RlKQogICAgICB9KTsKICAgIH0sCiAgICBzZXRUeXBlKHZhbCl7CiAgICAgIGxldCBwYXJhbXM9ewogICAgICAgIHBhcmVudENvZGU6dmFsP3ZhbDowCiAgICAgIH0KICAgICAgaWYoIXZhbCl7CiAgICAgICAgdGhpcy5mb3JtLnNlY29uZENvZGU9bnVsbDsKICAgICAgICB0aGlzLm9uZUNvZGVPcHRpb25zPVtdOwogICAgICAgIHRoaXMuc2Vjb25kQ29kZU9wdGlvbnM9W107CiAgICAgIH0KCiAgICAgIHNldFR5cGUocGFyYW1zKS50aGVuKHJlcz0+ewogICAgICAgIGlmKHJlcy5jb2RlPT0yMDApewogICAgICAgICAgaWYodmFsKXsKICAgICAgICAgICAgdGhpcy5zZWNvbmRDb2RlT3B0aW9ucz1yZXMuZGF0YTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICB0aGlzLm9uZUNvZGVPcHRpb25zPXJlcy5kYXRhOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvKiog5p+l6K+i5oyH5qCH6ZuG566h55CG5YiX6KGoICovCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsaXN0Qm9udXModGhpcy5xdWVyeVBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5zZXRMaXN0ID0gcmVzcG9uc2Uucm93czsKICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOe7hOe7h+exu+WIqyjpgILnlKjlr7nosaEp5a2X5YW457+76K+RCiAgICBvcmdUeXBlRm9ybWF0KHJvdywgY29sdW1uKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLm9yZ1R5cGVPcHRpb25zLCByb3cub3JnVHlwZSk7CiAgICB9LAogICAgLy8g6YCC55So5bm05Lu95a2X5YW457+76K+RCiAgICBwYXJ0WWVhckZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5wYXJ0WWVhck9wdGlvbnMsIHJvdy5wYXJ0WWVhcik7CiAgICB9LAogICAgLy8g5by55qGG5YWz6ZetCiAgICBoYW5kbGVEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgfSwKICAgIC8vIOWPlua2iAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiLCBmYWxzZSk7CiAgICB9LAogICAgLy8g6KGo5Y2V6YeN572uCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGNvbXBDb2RlOnRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8uZGVwdElkLAogICAgICAgIGFjY291bnRDb2RlOiBudWxsLAogICAgICAgIHNldENvZGU6IG51bGwsCiAgICAgICAgc2V0TmFtZTogbnVsbCwKICAgICAgICBvbmVDb2RlOiBudWxsLAogICAgICAgIHNlY29uZENvZGU6IG51bGwsCiAgICAgICAgZGVwdFR5cGU6IG51bGwsCiAgICAgICAgb3JnVHlwZTogbnVsbCwKICAgICAgICBwYXJ0WWVhcjogbnVsbCwKICAgICAgICBkZWxGbGFnOiBudWxsLAogICAgICAgIGNyZWF0ZUJ5OiBudWxsLAogICAgICAgIGNyZWF0ZVRpbWU6IG51bGwsCiAgICAgICAgdXBkYXRlQnk6IG51bGwsCiAgICAgICAgdXBkYXRlVGltZTogbnVsbCwKICAgICAgICByZW1hcms6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY29uc3Qgc2F2ZUxvYWRpbmc9dGhpcy5zYXZlTG9hZGluZygpCiAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkICE9IG51bGwpIHsKICAgICAgICAgICAgdXBkYXRlU2V0KHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJzdWNjZXNzIiwgZmFsc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWRkQm9udXModGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7CiAgICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9fTsK"},{"version":3,"sources":["addBonus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addBonus.vue","sourceRoot":"src/views/evaluate/set","sourcesContent":["<template>\n  <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"30%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\">\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\">\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form-item label=\"一级分类\" prop=\"oneCode\">\n            <el-select class=\"w90\" :disabled=\"id!=''\" clearable filterable remote v-model=\"form.oneCode\" placeholder=\"请选择一级分类\" @change=\"setType\">\n              <el-option\n                v-for=\"dict in oneCodeOptions\"\n                :key=\"dict.bscCode\"\n                :label=\"dict.bscName\"\n                :value=\"dict.bscCode\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"二级分类\" prop=\"secondCode\">\n            <el-select class=\"w90\" :disabled=\"id!=''\" clearable filterable remote v-model=\"form.secondCode\" placeholder=\"请选择二级分类\">\n              <el-option\n                v-for=\"dict in secondCodeOptions\"\n                :key=\"dict.bscCode\"\n                :label=\"dict.bscName\"\n                :value=\"dict.bscCode\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"指标集名称\" prop=\"setName\">\n            <el-input class=\"w90\" v-model=\"form.setName\" placeholder=\"请输入指标集名称\"  maxlength=\"100\" show-word-limit  />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"适用年份\" prop=\"partYear\">\n            <el-select class=\"w90\" v-model=\"form.partYear\" placeholder=\"请选择适用年份\">\n              <el-option\n                v-for=\"dict in partYearOptions\"\n                :key=\"dict.dictValue\"\n                :label=\"dict.dictLabel\"\n                :value=\"dict.dictValue\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"适用对象\" prop=\"orgType\">\n            <el-select class=\"w90\" v-model=\"form.orgType\" placeholder=\"请选择适用对象\">\n              <el-option\n                v-for=\"dict in orgTypeOptions\"\n                :key=\"dict.dictValue\"\n                :label=\"dict.dictLabel\"\n                :value=\"dict.dictValue\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button type=\"primary\" @click=\"submitForm\">保 存</el-button>\n      <el-button @click=\"cancel\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  import { validEmail } from'@/utils/validate'\n  import { listBonus, getSet, delSet, addBonus, updateSet, exportSet, setType } from \"@/api/evaluate/set\";\n\n  export default {\n    name: \"addEdit\",\n    props: {\n      open: {\n        type: Boolean,\n        default: false\n      },\n      id: {\n        type: [String, Number],\n        default: \"\"\n      }\n    },\n    watch: {\n      id: {\n        handler(val) {\n          this.reset();\n          if (val) {\n            this.id = val;\n            this.title = \"奖金指标集管理-编辑\";\n            this.getDetailInfo();\n          } else {\n            this.id = \"\";\n            this.title = \"奖金指标集管理-新增\";\n          }\n        },\n        deep: true,\n        immediate: true\n      },\n      open: {\n        handler(val) {\n          this.openDialog = val;\n        },\n        deep: true\n      }\n    },\n    components: {\n    },\n    data() {\n      return {\n        title: \"指标集管理-新增\",\n        openDialog: this.open,\n        // 表单参数\n        form: {},\n        orgTypeOptions: [],\n        partYearOptions: [],\n        // 表单校验\n        rules: {\n          oneCode:[\n            { required:true,message:'一级分类不能为空',trigger:['blur','change'] }\n          ],\n          secondCode:[\n            { required:true,message:'二级分类不能为空',trigger:['blur','change'] }\n          ],\n          setName:[\n            { required:true,message:'指标集名称不能为空',trigger:['blur','change'] }\n          ],\n          orgType:[\n            { required:true,message:'适用对象不能为空',trigger:['blur','change'] }\n          ],\n          partYear:[\n            { required:true,message:'适用年份不能为空',trigger:['blur','change'] }\n          ],\n\n        },\n        //一级分类\n        oneCodeOptions:[],\n        secondCodeOptions:[],\n      };\n    },\n    created() {\n      this.getList();\n      this.getDicts(\"pms_zb_zz\").then(response => {\n        this.orgTypeOptions = response.data;\n      });\n      this.getDicts(\"pms_zbj_nf\").then(response => {\n        this.partYearOptions = response.data;\n      });\n      this.setType()\n    },\n    methods: {\n      getDetailInfo() {\n        getSet(this.id).then(response => {\n          // console.log(response);\n          this.form = response.data;\n          this.setType(this.form.oneCode)\n        });\n      },\n      setType(val){\n        let params={\n          parentCode:val?val:0\n        }\n        if(!val){\n          this.form.secondCode=null;\n          this.oneCodeOptions=[];\n          this.secondCodeOptions=[];\n        }\n\n        setType(params).then(res=>{\n          if(res.code==200){\n            if(val){\n              this.secondCodeOptions=res.data;\n            }else{\n              this.oneCodeOptions=res.data;\n            }\n          }\n        })\n      },\n      /** 查询指标集管理列表 */\n      getList() {\n        this.loading = true;\n        listBonus(this.queryParams).then(response => {\n          this.setList = response.rows;\n          this.total = response.total;\n          this.loading = false;\n        });\n      },\n      // 组织类别(适用对象)字典翻译\n      orgTypeFormat(row, column) {\n        return this.selectDictLabel(this.orgTypeOptions, row.orgType);\n      },\n      // 适用年份字典翻译\n      partYearFormat(row, column) {\n        return this.selectDictLabel(this.partYearOptions, row.partYear);\n      },\n      // 弹框关闭\n      handleDialogClose() {\n        this.$emit(\"cancel\", false);\n      },\n      // 取消\n      cancel() {\n        this.$emit(\"cancel\", false);\n      },\n      // 表单重置\n      reset() {\n        this.form = {\n          id: null,\n          compCode:this.$store.state.user.userInfo.deptId,\n          accountCode: null,\n          setCode: null,\n          setName: null,\n          oneCode: null,\n          secondCode: null,\n          deptType: null,\n          orgType: null,\n          partYear: null,\n          delFlag: null,\n          createBy: null,\n          createTime: null,\n          updateBy: null,\n          updateTime: null,\n          remark: null\n        };\n        this.resetForm(\"form\");\n      },\n      /** 提交按钮 */\n      submitForm() {\n        this.$refs[\"form\"].validate(valid => {\n          if (valid) {\n            const saveLoading=this.saveLoading()\n            if (this.form.id != null) {\n              updateSet(this.form).then(response => {\n                this.msgSuccess(\"修改成功\");\n                this.$emit(\"success\", false);\n              });\n              saveLoading.close()\n            } else {\n              addBonus(this.form).then(response => {\n                this.msgSuccess(\"新增成功\");\n                this.$emit(\"success\", false);\n                saveLoading.close()\n              });\n            }\n          }\n        });\n      },\n    }};\n</script>\n<style lang=\"scss\" scoped>\n  ::v-deep .el-dialog {\n    min-height: 10%;\n    overflow: hidden;\n    .el-dialog__body {\n      height: calc(100% - 100px);\n      overflow: auto;\n    }\n  }\n</style>\n"]}]}