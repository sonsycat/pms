{"remainingRequest":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hrp\\zjry-pms-ui\\src\\views\\workload\\workload\\addEdit.vue?vue&type=style&index=0&id=096ff521&lang=scss&scoped=true&","dependencies":[{"path":"D:\\hrp\\zjry-pms-ui\\src\\views\\workload\\workload\\addEdit.vue","mtime":1682043106834},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1682058377861},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1682058382042},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1682058378631},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1682058378517},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKOjp2LWRlZXAgLmVsLWRpYWxvZyB7CiAgbWluLWhlaWdodDogMjAlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgLmVsLWRpYWxvZ19fYm9keSB7CiAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDEwMHB4KTsKICAgIG92ZXJmbG93OiBhdXRvOwogICAgLmVsLWlucHV0LS1taW5pLC5lbC1pbnB1dC1udW1iZXItLW1pbmksLmVsLXNlbGVjdC0tbWluaSwuZWwtZGF0ZS1waWNrZXItLW1pbml7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgfQogIH0KfQo="},{"version":3,"sources":["addEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEdit.vue","sourceRoot":"src/views/workload/workload","sourcesContent":["<template>\n  <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"40%\" custom-class=\"el-button--primary\" append-to-body\n             :close-on-click-modal=\"false\" @close=\"handleDialogClose\"\n  >\n    <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\n      <el-row>\n        <el-col :span=\"12\">\n          <el-form-item label=\"年月\" prop=\"workloadDate\">\n            <el-date-picker clearable size=\"mini\"\n                            v-model=\"form.workloadDate\"\n                            type=\"month\"\n                            value-format=\"yyyy-MM-dd\"\n                            placeholder=\"选择年月\"\n            >\n            </el-date-picker>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"项目编码\" prop=\"projectCode\">\n            <el-input v-model=\"form.projectCode\" placeholder=\"请输入项目编码\" maxlength=\"50\" show-word-limit/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"项目名称\" prop=\"projectName\">\n            <el-input v-model=\"form.projectName\" placeholder=\"请输入项目名称\" maxlength=\"50\" show-word-limit @blur=\"getPym\"/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"类别\" prop=\"type\">\n            <el-select v-model=\"form.type\" placeholder=\"请选择类别\">\n              <el-option label=\"请选择字典生成\" :value=\"item.typeCode\" v-for=\"item in typeList\" :label=\"item.typeName\"/>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"拼音码\" prop=\"spell\">\n            <el-input v-model=\"form.spell\" placeholder=\"请输入拼音码\" disabled maxlength=\"50\" show-word-limit/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"住院积分\" prop=\"hospitalPoints\">\n            <el-input-number :precision=\"2\" :step=\"0.01\" :min=\"0\" controls-position=\"right\" v-model=\"form.hospitalPoints\"\n                             placeholder=\"请输入住院积分\" show-word-limit/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item label=\"门诊积分\" prop=\"outpatientPoints\">\n            <el-input-number :precision=\"2\" :step=\"0.01\" :min=\"0\" controls-position=\"right\" v-model=\"form.outpatientPoints\"\n                             placeholder=\"请输入门诊积分\" show-word-limit/>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button type=\"primary\" @click=\"submitForm\" :loading=\"saveLoading\">确 定</el-button>\n      <el-button @click=\"cancel\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { addWorkload, getWorkload, listWorkload, updateWorkload } from '@/api/workload/workload'\nimport { listType } from '@/api/workload/type'\nimport pinyin from 'js-pinyin'\n\nexport default {\n  name: 'addEdit',\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: ''\n    }\n  },\n  watch: {\n    id: {\n      handler(val) {\n        this.reset()\n        if (val) {\n          this.id = val\n          this.title = '工作量管理-编辑'\n          this.getDetailInfo()\n        } else {\n          this.id = ''\n          this.title = '工作量管理-新增'\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val\n      },\n      deep: true\n    }\n  },\n  components: {},\n  data() {\n    return {\n      title: '工作量管理-新增',\n      openDialog: this.open,\n      typeList: [],\n      saveLoading: false,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        workloadDate: [\n          { required: true, message: '年月', trigger: ['blur', 'change'] }\n        ],\n        projectCode: [\n          {required: true, message: '项目编码', trigger: ['blur', 'change'] }\n        ],\n        projectName: [\n          { required: true, message: '项目名称', trigger: ['blur', 'change'] }\n        ],\n        type: [\n          { required: true, message: '类型', trigger: ['blur', 'change'] }\n        ],\n        hospitalPoints: [\n          { required: true, message: '住院积分', trigger: ['blur', 'change'] }\n        ],\n        outpatientPoints: [\n          { required: true, message: '门诊', trigger: ['blur', 'change'] }\n        ]\n      }\n    }\n  },\n  created() {\n\n    listType(null).then(response => {\n      this.typeList = response.rows\n    })\n    this.getList()\n  },\n  methods: {\n    getDetailInfo() {\n      getWorkload(this.id).then(response => {\n        console.log(response)\n        this.form = response.data\n      })\n    },\n    /** 查询工作量列表 */\n    getList() {\n      this.loading = true\n      listWorkload(this.queryParams).then(response => {\n        this.workloadList = response.rows\n        this.total = response.total\n        this.loading = false\n      })\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit('cancel', false)\n    },\n    // 取消\n    cancel() {\n      this.$emit('cancel', false)\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        compCode: null,\n        accountCode: null,\n        projectCode: null,\n        projectName: null,\n        type: null,\n        spell: null,\n        hospitalPoints: null,\n        outpatientPoints: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null,\n        workloadDate: null\n      }\n      this.resetForm('form')\n    },\n    getPym() {\n      // 全是字母的情况下,拼音码等于所有字母\n      if (/^[a-zA-Z]*$/.test(this.form.projectName)) {\n        this.form.spell = this.form.projectName\n        return\n      }\n      // 有汉字的情况下,转为首字母\n      let fullName = pinyin.getCamelChars(this.form.projectName).toUpperCase()\n      let pym = ''\n      for (var i = 0; i < fullName.length; i++) {\n        var c = fullName.charAt(i)\n        if (/^[A-Z]+$/.test(c)) {\n          pym += c\n        }\n      }\n      this.form.spell = pym\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs['form'].validate(valid => {\n        if (valid) {\n          this.saveLoading = true\n          if (this.form.id != null) {\n            updateWorkload(this.form).then(response => {\n              this.msgSuccess('修改成功')\n              this.$emit('success', false)\n              this.saveLoading = false\n            }).catch((err)=>{\n              this.saveLoading = false;\n            });\n          } else {\n            addWorkload(this.form).then(response => {\n              this.msgSuccess('新增成功')\n              this.$emit('success', false)\n              this.saveLoading = false\n            }).catch((err)=>{\n              this.saveLoading = false;\n            });\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n::v-deep .el-dialog {\n  min-height: 20%;\n  overflow: hidden;\n  .el-dialog__body {\n    height: calc(100% - 100px);\n    overflow: auto;\n    .el-input--mini,.el-input-number--mini,.el-select--mini,.el-date-picker--mini{\n      width: 100%;\n    }\n  }\n}\n</style>\n"]}]}