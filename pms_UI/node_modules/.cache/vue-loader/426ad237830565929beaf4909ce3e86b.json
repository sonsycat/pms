{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\quality\\detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\quality\\detail\\index.vue","mtime":1693362205760},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0RGV0YWlsLCBnZXREZXRhaWwsIGRlbERldGFpbCwgYWRkRGV0YWlsLCB1cGRhdGVEZXRhaWwsIGV4cG9ydERldGFpbCB9IGZyb20gIkAvYXBpL3F1YWxpdHkvZGV0YWlsIjsNCmltcG9ydCBhZGRFZGl0IGZyb20gIi4vYWRkRWRpdCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIkRldGFpbCIsDQogIHByb3BzOiB7DQogICAgb3Blbjogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBpZDogew0KICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwNCiAgICAgIGRlZmF1bHQ6ICIiDQogICAgfSwNCiAgICBkYXRhczp7DQogICAgICB0eXBlOkFycmF5LA0KICAgICAgZGVmYXVsdDpbXQ0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBpZDogew0KICAgICAgaGFuZGxlcih2YWwpIHsNCiAgICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgICBpZiAodmFsKSB7DQogICAgICAgICAgdGhpcy5pZCA9IHZhbDsNCiAgICAgICAgICB0aGlzLnRpdGxlID0gIui0qOmHj+iAg+ivhOaMh+agh+iuvue9riAvIOe8lui+keaMh+agh+WGheWuuSI7DQogICAgICAgICAgLy8gdGhpcy5nZXREZXRhaWxJbmZvKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5pZCA9ICIiOw0KICAgICAgICAgIHRoaXMudGl0bGUgPSAi6LSo6YeP6ICD6K+E5oyH5qCH6K6+572uIC8g57yW6L6R5oyH5qCH5YaF5a65IjsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIG9wZW46IHsNCiAgICAgIGhhbmRsZXIodmFsKSB7DQogICAgICAgIHRoaXMub3BlbkRpYWxvZyA9IHZhbDsNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlDQogICAgfSwNCiAgfSwNCiAgY29tcG9uZW50czogew0KICAgIGFkZEVkaXQNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgb3BlbkRpYWxvZzogdGhpcy5vcGVuLA0KICAgICAgLy8g5a+85Ye66YGu572p5bGCDQogICAgICBleHBvcnRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIC8vIOmAieS4reaVsOe7hA0KICAgICAgaWRzOiBbXSwNCiAgICAgIC8vIOmdnuWNleS4quemgeeUqA0KICAgICAgc2luZ2xlOiB0cnVlLA0KICAgICAgLy8g6Z2e5aSa5Liq56aB55SoDQogICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tg0KICAgICAgc2hvd1NlYXJjaDogZmFsc2UsDQogICAgICAvLyDmgLvmnaHmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g6LSo6YeP6ICD6K+E5oyH5qCH5piO57uG6KGo5qC85pWw5o2uDQogICAgICBkZXRhaWxMaXN0OiBbXSwNCiAgICAgIHNlbGVjdGlvblJvdzogW10sDQogICAgICAvLyDlvLnlh7rlsYLmoIfpopgNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIC8vIOaYr+WQpuaYvuekuuW8ueWHuuWxgg0KICAgICAgYWRkT3BlbjogZmFsc2UsDQogICAgICAvLyDmmK/lkKZLUEnlrZflhbgNCiAgICAgIGlzS3BpT3B0aW9uczogW10sDQogICAgICAvLyDmn6Xor6Llj4LmlbANCiAgICAgIHF1ZXJ5UGFyYW1zOiB7DQogICAgICAgIHBhZ2VOdW06IDEsDQogICAgICAgIHBhZ2VTaXplOiAzMCwNCiAgICAgICAgY29tcENvZGU6dGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQsDQogICAgICAgIGluZGV4Q29kZTogdGhpcy5kYXRhc1swXS5pbmRleENvZGUsDQogICAgICAgIGV2YUNvbnQ6IG51bGwsDQogICAgICAgIGV2YUNyaXRlcmlhOiBudWxsLA0KICAgICAgICBldmFNZXRob2Q6IG51bGwsDQogICAgICAgIGlzS3BpOiBudWxsLA0KICAgICAgfSwNCiAgICAgIC8vIOihqOWNleWPguaVsA0KICAgICAgZm9ybToge30sDQogICAgICAvLyDooajljZXmoKHpqowNCiAgICAgIHJ1bGVzOiB7DQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCk7DQogICAgdGhpcy5nZXREaWN0cygiaHJfaXNfY2hhbmdlIikudGhlbihyZXNwb25zZSA9PiB7DQogICAgICB0aGlzLmlzS3BpT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7DQogICAgfSk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVDbGlja1RhYmxlTmFtZShkYXRhKSB7DQogICAgICAgIC8vIOmAieS4reW9k+WJjeihjA0KICAgICAgICB0aGlzLnJvd0NsaWNrKGRhdGEsIGZhbHNlKTsNCiAgICAgICAgdGhpcy5oYW5kbGVVcGRhdGUoZGF0YSk7DQogICAgfSwNCiAgICAvKiog5p+l6K+i6LSo6YeP6ICD6K+E5oyH5qCH5piO57uG5YiX6KGoICovDQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICBsaXN0RGV0YWlsKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICBpZihyZXNwb25zZS5jb2RlPT09MjAwKXsNCiAgICAgICAgICB0aGlzLmRldGFpbExpc3QgPSByZXNwb25zZS5yb3dzOw0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDmmK/lkKZLUEnlrZflhbjnv7vor5ENCiAgICBpc0twaUZvcm1hdChyb3csIGNvbHVtbikgew0KICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGljdExhYmVsKHRoaXMuaXNLcGlPcHRpb25zLCByb3cuaXNLcGkpOw0KICAgIH0sDQogICAgc3VjY2Vzc1N1Ym1pdChmbGFnKSB7DQogICAgICB0aGlzLmFkZE9wZW4gPSBmbGFnOw0KICAgICAgdGhpcy5nZXRMaXN0KCk7DQogICAgfSwNCiAgICAvLyDlj5bmtojmjInpkq4NCiAgICBjYW5jZWwoKSB7DQogICAgICB0aGlzLmFkZE9wZW4gPSBmYWxzZTsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgLy8g5by55qGG5YWz6ZetDQogICAgaGFuZGxlRGlhbG9nQ2xvc2UoKSB7DQogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiLCBmYWxzZSk7DQogICAgfSwNCiAgICAvLyDooajljZXph43nva4NCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHsNCiAgICAgICAgaWQ6IG51bGwsDQogICAgICAgIGluZGV4Q29kZTogbnVsbCwNCiAgICAgICAgZXZhQ29udDogbnVsbCwNCiAgICAgICAgZXZhQ3JpdGVyaWE6IG51bGwsDQogICAgICAgIGV2YU1ldGhvZDogbnVsbCwNCiAgICAgICAgaXNLcGk6ICIwIiwNCiAgICAgICAgZGVsRmxhZzogbnVsbCwNCiAgICAgICAgY3JlYXRlQnk6IG51bGwsDQogICAgICAgIGNyZWF0ZVRpbWU6IG51bGwsDQogICAgICAgIHVwZGF0ZUJ5OiBudWxsLA0KICAgICAgICB1cGRhdGVUaW1lOiBudWxsLA0KICAgICAgICByZW1hcms6IG51bGwNCiAgICAgIH07DQogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOw0KICAgIH0sDQogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLw0KICAgIHJlc2V0UXVlcnkoKSB7DQogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7DQogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7DQogICAgfSwNCiAgICAvLyDlpJrpgInmoYbpgInkuK3mlbDmja4NCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7DQogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLmlkKQ0KICAgICAgdGhpcy5zaW5nbGUgPSBzZWxlY3Rpb24ubGVuZ3RoIT09MQ0KICAgICAgdGhpcy5tdWx0aXBsZSA9ICFzZWxlY3Rpb24ubGVuZ3RoDQogICAgICB0aGlzLnNlbGVjdGlvblJvdz1zZWxlY3Rpb24NCiAgICB9LA0KICAgIHJvd0NsaWNrKHJvdywgY29sdW1uLCBldmVudCkgew0KICAgICAgbGV0IHJlZnNFbFRhYmxlID0gdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlOw0KICAgICAgbGV0IGZpbmRSb3cgPSB0aGlzLnNlbGVjdGlvblJvdy5maW5kKGMgPT4gYy5yb3dJbmRleCA9PSByb3cucm93SW5kZXgpOw0KICAgICAgaWYgKGZpbmRSb3cgJiYgdGhpcy5zZWxlY3Rpb25Sb3cubGVuZ3RoID09IDEpIHsNCiAgICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgZmFsc2UpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICByZWZzRWxUYWJsZS5jbGVhclNlbGVjdGlvbigpOw0KICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7DQogICAgfSwNCiAgICByb3dTdHlsZSh7DQogICAgICByb3csDQogICAgICByb3dJbmRleA0KICAgIH0pIHsNCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3csICdyb3dJbmRleCcsIHsNCiAgICAgICAgdmFsdWU6IHJvd0luZGV4LA0KICAgICAgICB3cml0YWJsZTogdHJ1ZSwNCiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UNCiAgICAgIH0pDQogICAgfSwNCiAgICByb3dDbGFzc05hbWUoew0KICAgICAgcm93LA0KICAgICAgcm93SW5kZXgNCiAgICB9KSB7DQogICAgICBsZXQgcm93TmFtZSA9ICIiLA0KICAgICAgICBmaW5kUm93ID0gdGhpcy5zZWxlY3Rpb25Sb3cuZmluZChjID0+IGMucm93SW5kZXggPT09IHJvdy5yb3dJbmRleCk7DQogICAgICBpZiAoZmluZFJvdykgew0KICAgICAgICByb3dOYW1lID0gImN1cnJlbnQtcm93ICI7DQogICAgICB9DQogICAgICByZXR1cm4gcm93TmFtZTsNCiAgICB9LA0KICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVBZGQoKSB7DQogICAgICB0aGlzLmFkZE9wZW4gPSB0cnVlOyAvLyDlvLnmoYbngrnlvIANCiAgICAgIHRoaXMuYWRkRWRpdElkID0gIiI7IC8vIGFkZEVkaXRJZCDmmK/mlrDlop4gIOWOu+WtkOe7hOS7tuaWueS+v+WMuuWIhuaWsOWinue8lui+kQ0KICAgIH0sDQogICAgaGFuZGxlVXBkYXRlKHJvdykgew0KICAgICAgdGhpcy5yZXNldCgpOw0KICAgICAgY29uc3QgaWQgPSByb3cuaWQgfHwgdGhpcy5pZHNbMF07DQogICAgICB0aGlzLmFkZE9wZW4gPSB0cnVlOw0KICAgICAgdGhpcy5hZGRFZGl0SWQgPSBpZDsgLy8gaWTotYvlgLwNCiAgICAgIGNvbnNvbGUubG9nKCJhZGRFZGl0SWQtLS0iICsgYWRkRWRpdCk7DQogICAgfSwNCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRGVsZXRlKHJvdykgew0KICAgICAgY29uc3QgaWRzID0gcm93LmlkIHx8IHRoaXMuaWRzOw0KICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6Zmk6LSo6YeP6ICD6K+E5oyH5qCH5piO57uG57yW5Y+35Li6IicgKyBpZHMgKyAnIueahOaVsOaNrumhuT8nLCAi6K2m5ZGKIiwgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwNCiAgICAgICAgICB0eXBlOiAid2FybmluZyINCiAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgICByZXR1cm4gZGVsRGV0YWlsKGlkcyk7DQogICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgICAgIHRoaXMubXNnU3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7DQogICAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsNCiAgICB9LA0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/quality/detail","sourcesContent":["<template>\r\n  <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"60%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\">\r\n      <div ref=\"btns\">\r\n        <el-row :gutter=\"10\" class=\"mb8\">\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-plus\"\r\n              size=\"mini\"\r\n              @click=\"handleAdd\"\r\n              v-hasPermi=\"['quality:index:add']\"\r\n            >新增</el-button>\r\n          </el-col>\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              type=\"success\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              :disabled=\"single\"\r\n              @click=\"handleUpdate\"\r\n              v-hasPermi=\"['quality:index:edit']\"\r\n            >修改</el-button>\r\n          </el-col>\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              :disabled=\"multiple\"\r\n              @click=\"handleDelete\"\r\n              v-hasPermi=\"['quality:index:remove']\"\r\n            >删除</el-button>\r\n          </el-col>\r\n          <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n        </el-row>\r\n      </div>\r\n    \r\n      <el-table style=\"overflow:hidden\" border stripe min-height=\"100px\" max-height=\"600px\" v-loading=\"loading\" :data=\"detailList\" @selection-change=\"handleSelectionChange\" ref=\"multipleTable\" @row-click=\"rowClick\" :row-style=\"rowStyle\" :row-class-name=\"rowClassName\">\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n        <el-table-column show-overflow-tooltip sortable label=\"考评内容\" align=\"left\" prop=\"evaCont\">\r\n          <template slot-scope=\"scope\">\r\n            <el-link type=\"primary\" :underline=\"false\" v-html=\"scope.row.evaCont\" @click.stop=\"handleClickTableName(scope.row)\" class=\"displayBlock text-ellipsis \"></el-link>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column show-overflow-tooltip sortable label=\"考评标准\" align=\"left\" prop=\"evaCriteria\" />\r\n        <el-table-column show-overflow-tooltip sortable label=\"考评办法\" align=\"left\" prop=\"evaMethod\" />\r\n      </el-table>\r\n\r\n    <addEdit v-if=\"addOpen\" :open=\"addOpen\" :indexCodeDatas=\"datas\" :id=\"addEditId\" @cancel=\"cancel\" @success=\"successSubmit\"></addEdit>\r\n    \r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleDialogClose\">关 闭</el-button>\r\n      </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { listDetail, getDetail, delDetail, addDetail, updateDetail, exportDetail } from \"@/api/quality/detail\";\r\nimport addEdit from \"./addEdit\";\r\n\r\nexport default {\r\n  name: \"Detail\",\r\n  props: {\r\n    open: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    id: {\r\n      type: [String, Number],\r\n      default: \"\"\r\n    },\r\n    datas:{\r\n      type:Array,\r\n      default:[]\r\n    }\r\n  },\r\n  watch: {\r\n    id: {\r\n      handler(val) {\r\n        this.reset();\r\n        if (val) {\r\n          this.id = val;\r\n          this.title = \"质量考评指标设置 / 编辑指标内容\";\r\n          // this.getDetailInfo();\r\n        } else {\r\n          this.id = \"\";\r\n          this.title = \"质量考评指标设置 / 编辑指标内容\";\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    open: {\r\n      handler(val) {\r\n        this.openDialog = val;\r\n      },\r\n      deep: true\r\n    },\r\n  },\r\n  components: {\r\n    addEdit\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      openDialog: this.open,\r\n      // 导出遮罩层\r\n      exportLoading: false,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 显示搜索条件\r\n      showSearch: false,\r\n      // 总条数\r\n      total: 0,\r\n      // 质量考评指标明细表格数据\r\n      detailList: [],\r\n      selectionRow: [],\r\n      // 弹出层标题\r\n      title: \"\",\r\n      // 是否显示弹出层\r\n      addOpen: false,\r\n      // 是否KPI字典\r\n      isKpiOptions: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 30,\r\n        compCode:this.$store.state.user.userInfo.deptId,\r\n        indexCode: this.datas[0].indexCode,\r\n        evaCont: null,\r\n        evaCriteria: null,\r\n        evaMethod: null,\r\n        isKpi: null,\r\n      },\r\n      // 表单参数\r\n      form: {},\r\n      // 表单校验\r\n      rules: {\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n    this.getDicts(\"hr_is_change\").then(response => {\r\n      this.isKpiOptions = response.data;\r\n    });\r\n  },\r\n  methods: {\r\n    handleClickTableName(data) {\r\n        // 选中当前行\r\n        this.rowClick(data, false);\r\n        this.handleUpdate(data);\r\n    },\r\n    /** 查询质量考评指标明细列表 */\r\n    getList() {\r\n      this.loading = true;\r\n      listDetail(this.queryParams).then(response => {\r\n        if(response.code===200){\r\n          this.detailList = response.rows;\r\n          this.total = response.total;\r\n          this.loading = false;\r\n        }\r\n      });\r\n    },\r\n    // 是否KPI字典翻译\r\n    isKpiFormat(row, column) {\r\n      return this.selectDictLabel(this.isKpiOptions, row.isKpi);\r\n    },\r\n    successSubmit(flag) {\r\n      this.addOpen = flag;\r\n      this.getList();\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.addOpen = false;\r\n      this.reset();\r\n      this.getList();\r\n    },\r\n    // 弹框关闭\r\n    handleDialogClose() {\r\n      this.$emit(\"cancel\", false);\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        id: null,\r\n        indexCode: null,\r\n        evaCont: null,\r\n        evaCriteria: null,\r\n        evaMethod: null,\r\n        isKpi: \"0\",\r\n        delFlag: null,\r\n        createBy: null,\r\n        createTime: null,\r\n        updateBy: null,\r\n        updateTime: null,\r\n        remark: null\r\n      };\r\n      this.resetForm(\"form\");\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageNum = 1;\r\n      this.getList();\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.resetForm(\"queryForm\");\r\n      this.handleQuery();\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.id)\r\n      this.single = selection.length!==1\r\n      this.multiple = !selection.length\r\n      this.selectionRow=selection\r\n    },\r\n    rowClick(row, column, event) {\r\n      let refsElTable = this.$refs.multipleTable;\r\n      let findRow = this.selectionRow.find(c => c.rowIndex == row.rowIndex);\r\n      if (findRow && this.selectionRow.length == 1) {\r\n        refsElTable.toggleRowSelection(row, false);\r\n        return;\r\n      }\r\n      refsElTable.clearSelection();\r\n      refsElTable.toggleRowSelection(row);\r\n    },\r\n    rowStyle({\r\n      row,\r\n      rowIndex\r\n    }) {\r\n      Object.defineProperty(row, 'rowIndex', {\r\n        value: rowIndex,\r\n        writable: true,\r\n        enumerable: false\r\n      })\r\n    },\r\n    rowClassName({\r\n      row,\r\n      rowIndex\r\n    }) {\r\n      let rowName = \"\",\r\n        findRow = this.selectionRow.find(c => c.rowIndex === row.rowIndex);\r\n      if (findRow) {\r\n        rowName = \"current-row \";\r\n      }\r\n      return rowName;\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.addOpen = true; // 弹框点开\r\n      this.addEditId = \"\"; // addEditId 是新增  去子组件方便区分新增编辑\r\n    },\r\n    handleUpdate(row) {\r\n      this.reset();\r\n      const id = row.id || this.ids[0];\r\n      this.addOpen = true;\r\n      this.addEditId = id; // id赋值\r\n      console.log(\"addEditId---\" + addEdit);\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const ids = row.id || this.ids;\r\n      this.$confirm('是否确认删除质量考评指标明细编号为\"' + ids + '\"的数据项?', \"警告\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\"\r\n        }).then(function() {\r\n          return delDetail(ids);\r\n        }).then(() => {\r\n          this.getList();\r\n          this.msgSuccess(\"删除成功\");\r\n        }).catch(() => {});\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  ::v-deep .el-dialog {\r\n    min-height: 20%;\r\n    overflow: hidden;\r\n    .el-dialog__body {\r\n      height: calc(100% - 100px);\r\n      overflow: auto;\r\n      .app-container{\r\n        .el-form-item{\r\n          width: 100%;\r\n        }\r\n        .el-form-item__content{\r\n          margin-left: 0 !important;\r\n          width:70%;\r\n        }\r\n        .el-select{\r\n          width: 100%;\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\r\n"]}]}