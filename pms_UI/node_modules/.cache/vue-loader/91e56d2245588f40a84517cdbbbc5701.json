{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\components\\revenuePop\\index.vue?vue&type=style&index=0&id=3eed0c07&lang=scss&scoped=true&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\components\\revenuePop\\index.vue","mtime":1682043105511},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1682058377861},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1682058382042},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\postcss-loader\\src\\index.js","mtime":1682058378631},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1682058378517},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGFnaW5hdGlvbi1jb250YWluZXIgewogIGhlaWdodDogMzZweCAhaW1wb3J0YW50Owp9CgoubGFiZWxFbXB0eSB7CiAgOjp2LWRlZXAgLmVsLWZvcm0taXRlbSB7CiAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogIH0KICA6OnYtZGVlcCAuZWwtZm9ybS1pdGVtX19jb250ZW50IHsKICAgIG1hcmdpbi1sZWZ0OiAwICFpbXBvcnRhbnQ7CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/components/revenuePop","sourcesContent":["<template>\n<!-- 货架 -->\n    <el-form-item :label=\"label\" :prop=\"formProp\" :rules=\"rules\">\n        <el-popover\n          placement=\"bottom\"\n          ref=\"popover\"\n          width=\"1000\"\n          trigger=\"click\"\n          :disabled = \"disabled\">\n          <el-table  :data=\"tableData\" @cell-click=\"clickRow\"  border stripe height=\"280px\">\n            <el-table-column label=\"项目编码\" align=\"center\" prop=\"revenueCode\" />\n            <el-table-column label=\"项目名称\" align=\"left\" prop=\"revenueName\" />\n            <el-table-column label=\"项目类型\" align=\"center\" prop=\"revenueType\" :formatter=\"projectTypeFormat\" />\n          </el-table>\n          <pagination\n            layout=\"total, prev, pager, next\"\n            v-show=\"total>0\"\n            :total=\"total\"\n            :page.sync=\"params.pageNum\"\n            :limit.sync=\"params.pageSize\"\n            @pagination=\"handleInput\"\n          />\n          <el-input slot=\"reference\" v-model=\"queryParams[setProp]\" :placeholder=\"'请选择'+label\" @input=\"handleInput\" @keyup.enter.native=\"handleInput\"  @focus=\"handleInput\"/>\n        </el-popover>\n      </el-form-item>\n</template>\n\n<script>\n//import { searchForProject } from \"@/api/num/revenue\";\n// label 为空时  调用组件 增加class labelEmpty\nexport default {\n  name: \"index\",\n  props: {\n    // 是否禁用\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    // 传参为form表单 方便数据回显渲染\n    queryParams: {\n      type: [Object, Array]\n    },\n    datas: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    label: {\n      type: String,\n      default: \"\"\n    },\n    revenueCode: {\n      type: [String, Number],\n      default: \"\"\n    },\n    compCode: {\n      type: [String, Number],\n      default: \"\"\n    },\n    setProp: {\n      type: String,\n      default: \"revenueCode\"\n    },\n    formProp: {\n      type: String,\n      default: \"revenueCode\"\n    },\n    rules: {\n      type: Array,\n      default() {\n        return [ ];\n      }\n    },\n  },\n  data() {\n    return {\n      // 表格数据\n      tableData: [],\n      formData: this.queryParams,\n      params: {\n        pageNum: 1,\n        pageSize: this.$store.state.settings.popPageSize,\n      },\n      total: 0,\n      projectTypeOptions:[],\n\n    };\n  },\n  watch: {\n    setProp: {\n      handler(val) {\n        if (val != \"revenueCode\" && this.formProp == \"revenueCode\") {\n          this.formProp = val;\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  created(){\n     this.getDicts(\"cost_xm_lx\").then(response => {\n        this.projectTypeOptions = response.data;\n      });\n  },\n  methods: {\n      // 项目类型字典翻译\n      projectTypeFormat(row, column) {\n        return this.selectDictLabel(this.projectTypeOptions, row.revenueType);\n      },\n    // 搜索数据\n    handleInput(e) {\n      if(e.target){\n          let searchQuery={\n          compCode:this.$store.state.user.userInfo.deptId,\n          deptCode: this.formData.deptCode,\n          nowDate:this.formData.nowDate.split(\"-\")[0]+'-'+this.formData.nowDate.split(\"-\")[1],\n          queryString:e.target.value\n        }\n        // searchForProject(searchQuery).then(response => {\n        //     this.tableData = response.rows\n        //     this.total = response.total;\n        // });\n      }\n\n    },\n    // 点击表格行\n    clickRow(row, column, cell, event) {\n      this.queryParams[this.setProp] = row.revenueCode;\n      this.$emit(\"click\", row);\n      this.$refs.popover.doClose();\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pagination-container {\n  height: 36px !important;\n}\n\n.labelEmpty {\n  ::v-deep .el-form-item {\n    margin-bottom: 12px;\n  }\n  ::v-deep .el-form-item__content {\n    margin-left: 0 !important;\n  }\n}\n</style>\n"]}]}