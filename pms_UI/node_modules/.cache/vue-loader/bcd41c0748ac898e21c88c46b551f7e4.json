{"remainingRequest":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\pms_UI\\src\\views\\revenue\\revenue\\revenueDept.vue?vue&type=style&index=0&id=94d3121e&lang=scss&scoped=true&","dependencies":[{"path":"F:\\pms_UI\\src\\views\\revenue\\revenue\\revenueDept.vue","mtime":1693362205876},{"path":"F:\\pms_UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693361949271},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693362179282},{"path":"F:\\pms_UI\\node_modules\\postcss-loader\\src\\index.js","mtime":1693362110683},{"path":"F:\\pms_UI\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693362152666},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQo6OnYtZGVlcCAuZWwtZGlhbG9new0KICAgIC5lbC1mb3JtLWl0ZW1fX2xhYmVsew0KICAgICAgICB3aWR0aDogODBweCAhaW1wb3J0YW50Ow0KICAgIH0NCiAgICAuZWwtZm9ybS1pdGVtX19jb250ZW50ew0KICAgICAgICBtYXJnaW4tbGVmdDogODBweCAhaW1wb3J0YW50DQogICAgfQ0KICAgIC5lbC10YWJzX19pdGVtLmlzLXRvcHsNCiAgICAgICAgZm9udC1zaXplOjE2cHg7DQogICAgfQ0KfQ0KLnRyYW5zZmVyew0KICAgIHdpZHRoOiAxMDAlOw0KICAgIC50cmFuc2Zlcl9sZWZ0ew0KICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjY2NjOw0KICAgICAgICBib3JkZXItcmFkaXVzOiAyJTsNCiAgICAgICAgd2lkdGg6IDQ1JTsNCiAgICAgICAgZmxvYXQ6IGxlZnQ7DQogICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgIGhlaWdodDo1MDBweDsNCiAgICAgICAgLnRyYW5zZmVyX2xlZnRfdG9wew0KICAgICAgICAgICAgcGFkZGluZzogMCAxMHB4Ow0KICAgICAgICAgICAgcHsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgICAgICAgICAgbGFiZWx7DQogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsNCiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHgNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3BhbnsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICAgICAgcmlnaHQ6IDEwcHgNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICAudHJhbnNmZXJfbWFpbnsNCiAgICAgICAgd2lkdGg6IDEwJTsNCiAgICAgICAgZmxvYXQ6IGxlZnQ7DQogICAgICAgIGxpbmUtaGVpZ2h0OiA1MDBweDsNCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgOjp2LWRlZXAgLmVsLWJ1dHRvbi1ncm91cCAuZWwtYnV0dG9uLS1wcmltYXJ5OmZpcnN0LWNoaWxkew0KICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgIHRvcDo0MCU7DQogICAgICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTsNCiAgICAgICAgICAgYm9yZGVyOiAwOw0KICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgIH0NCiAgICAgICAgOjp2LWRlZXAgLmVsLWJ1dHRvbi1ncm91cCAuZWwtYnV0dG9uLS1wcmltYXJ5Omxhc3QtY2hpbGR7DQogICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgdG9wOjUwJTsNCiAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLC01MCUpOw0KICAgICAgICAgICBib3JkZXI6IDA7DQogICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCg0KICAgICAgICB9DQogICAgfQ0KICAgIC50cmFuc2Zlcl9yaWdodHsNCiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjY2NjYzsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogMiU7DQogICAgICAgIHdpZHRoOiA0NSU7DQogICAgICAgIGhlaWdodDogNTAwcHg7DQogICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgIGZsb2F0OiByaWdodDsNCiAgICAgICAgLnRyYW5zZmVyX3JpZ2h0X3RvcHsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsgICAgICAgICAgICANCiAgICAgICAgICAgIHB7DQogICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgICAgIGxhYmVsew0KICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7IA0KICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzcGFuew0KICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAxMHB4DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIC5jaGVja2JveF9sZWZ0ew0KICAgICAgICBtYXJnaW4tdG9wOiAxMHB4Ow0KICAgICAgICBwYWRkaW5nOjAgNHB4Ow0KICAgICAgICBvdmVyZmxvdzogYXV0bzsNCiAgICAgICAgbWluLWhlaWdodDozMDBweDsNCiAgICB9DQp9DQo="},{"version":3,"sources":["revenueDept.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"revenueDept.vue","sourceRoot":"src/views/revenue/revenue","sourcesContent":["<template>\r\n    <!-- 科室设置 -->\r\n  <el-dialog custom-class=\"el-button--primary\" :title=\"title\" :close-on-click-modal=\"false\" @close=\"handleDialogClose\" :visible.sync=\"openDialog\" width=\"50%\" append-to-body>\r\n      <el-form ref=\"queryForm\" :model=\"queryParams\" :rules=\"rules\" label-width=\"80px\">\r\n        <el-row :gutter=\"24\">\r\n          <el-col :span=\"10\">\r\n            <el-form-item label=\"项目编码\" prop=\"revenueCode\">\r\n              <el-input v-model=\"queryParams.revenueCode\" placeholder=\"系统自动生成\"  maxlength=\"50\" show-word-limit disabled />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"10\">\r\n            <el-form-item label=\"项目名称\" prop=\"revenueName\">\r\n              <el-input v-model=\"queryParams.revenueName\" placeholder=\"请输入项目名称\"  maxlength=\"100\" show-word-limit disabled />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-tabs v-model=\"activeName\"  @tab-click=\"handleClick\" >\r\n                <el-tab-pane label=\"门诊\" name=\"outPatient\">\r\n                    <el-col :span=\"24\">\r\n                        <div class=\"hello\">\r\n                            <div class=\"transfer\">\r\n                                <div class=\"transfer_left\">\r\n                                    <div class=\"transfer_left_top\">\r\n                                        <p>\r\n                                            <label for=\"\">待选科室</label>\r\n                                            <span>{{num(selectionRowoutpatientLeft)}}/{{form.outpatientServiceLeft.length}}</span>\r\n                                        </p>\r\n                                        <el-select v-model=\"queryParams.deptCode1\" @change=\"changeDept\" @click=\"changeDept\" clearable automatic-dropdown=\"\" :filterable=\"true\" :remote=\"true\" placeholder=\"请选择科室\" size=\"small\">\r\n                                            <el-option\r\n                                            v-for=\"item in deptDatas\"\r\n                                            :key=\"item.dictValue\"\r\n                                            :label=\"item.dictLabel\"\r\n                                            :value=\"item.dictLabel\"\r\n                                            ></el-option>\r\n                                        </el-select>\r\n                                    </div>\r\n                                    <div class=\"checkbox_left\">\r\n                                        <el-form  ref=\"outPatientLeft\" :model=\"form\">\r\n                                            <el-table ref=\"multipleTable\" height=\"410\" :style=\"{width: '100%'}\" :show-overflow-tooltip=\"true\" tooltip-effect=\"dark\" stripe v-loading=\"loading\" :data=\"form.outpatientServiceLeft\" @selection-change=\"handleSelectionOutpatientChange\" @row-click=\"rowClick\">\r\n                                                <el-table-column type=\"selection\" width=\"55\" align=\"center\" fixed />\r\n                                                <el-table-column label=\"科室名称\" align=\"center\" prop=\"dictLabel\" />\r\n                                            </el-table>\r\n                                        </el-form>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"transfer_main\">\r\n                                    <el-button-group>\r\n                                        <el-button type=\"primary\" size=\"small\" icon=\"el-icon-arrow-right\" @click=\"outpatientToright\" :disabled=\"patToRightBool\"></el-button>\r\n                                        <el-button type=\"primary\"  size=\"small\" @click=\"outpatientToleft\" icon=\"el-icon-arrow-left\" :disabled=\"patToLeftBool\"></el-button>\r\n                                    </el-button-group>\r\n                                </div>\r\n                                <div class=\"transfer_right\">\r\n                                    <div class=\"transfer_right_top\">\r\n                                        <p>\r\n                                            <label for=\"\">已选科室</label> \r\n                                            <span>{{num1(selectionRowOutpatientRight)}}/{{form.outpatientServiceRight.length}}</span>\r\n                                        </p>                        \r\n                                    </div>\r\n                                    <div class=\"checkbox_left\">\r\n                                        <el-form  ref=\"outPatientRight\" :model=\"form\">\r\n                                            <el-table ref=\"multipleTableRight\" v-loading=\"loading1\" :style=\"{width: '100%'}\" height=\"450\" tooltip-effect=\"dark\" stripe :data=\"form.outpatientServiceRight\" @selection-change=\"handleSelectionChangeRight\" @row-click=\"rowClickPatRight\">\r\n                                                <el-table-column type=\"selection\" width=\"55\" align=\"center\" fixed />\r\n                                                <el-table-column label=\"科室名称\" align=\"center\" prop=\"dictLabel\" />\r\n                                                <el-table-column label=\"分摊比例\" align=\"center\" prop=\"ratio\">\r\n                                                    <template slot-scope=\"scope\">\r\n                                                        <el-input-number v-model=\"scope.row.ratio\" :min=\"0\" :max=\"100\" :precision=\"2\" />\r\n                                                    </template>\r\n                                                </el-table-column>\r\n                                            </el-table>\r\n                                        </el-form>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </el-col>\r\n                </el-tab-pane>\r\n                <!-- 住院 -->\r\n                <el-tab-pane label=\"住院\" name=\"hospital\">\r\n                    <el-col :span=\"24\">\r\n                        <div class=\"hello\">\r\n                            <div class=\"transfer\">\r\n                                <div class=\"transfer_left\">\r\n                                    <div class=\"transfer_left_top\">\r\n                                        <p>\r\n                                            <label for=\"\">待选科室</label>\r\n                                            <span>{{num2(selectionRowhospitalLeft)}}/{{form.hospitalServiceLeft.length}}</span>\r\n                                        </p>\r\n                                        <el-select v-model=\"queryParams.deptCode2\" @change=\"changeDept\" clearable automatic-dropdown=\"\" :filterable=\"true\" :remote=\"true\" placeholder=\"请选择科室\" size=\"small\">\r\n                                            <el-option\r\n                                            v-for=\"item in deptDatasHos\"\r\n                                            :key=\"item.dictValue\"\r\n                                            :label=\"item.dictLabel\"\r\n                                            :value=\"item.dictLabel\"\r\n                                            ></el-option>\r\n                                        </el-select>\r\n                                    </div>\r\n                                    <div class=\"checkbox_left\">\r\n                                        <el-table ref=\"multipleTableHos\" height=\"410\" :style=\"{width: '100%'}\" :show-overflow-tooltip=\"true\" tooltip-effect=\"dark\" stripe v-loading=\"loading2\" :data=\"form.hospitalServiceLeft\"  @selection-change=\"handleSelectionHospitalChange\" @row-click=\"rowClickHos\">\r\n                                            <el-table-column type=\"selection\" width=\"55\" align=\"center\" fixed />\r\n                                            <el-table-column label=\"科室名称\" align=\"center\" prop=\"dictLabel\" />\r\n                                        </el-table>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"transfer_main\">\r\n                                    <el-button-group>\r\n                                        <el-button type=\"primary\" size=\"small\" icon=\"el-icon-arrow-right\" @click=\"hospitalToright\" :disabled=\"hosToRightBool\"></el-button>\r\n                                        <el-button type=\"primary\"  size=\"small\" @click=\"hospitalToLeft\" icon=\"el-icon-arrow-left\" :disabled=\"hosToLeftBool\"></el-button>\r\n                                    </el-button-group>\r\n                                </div>\r\n                                <div class=\"transfer_right\">\r\n                                    <div class=\"transfer_right_top\">\r\n                                        <p>\r\n                                            <label for=\"\">已选科室</label> \r\n                                            <span>{{num3(selectionRowhospitalRight)}}/{{form.hospitalServiceRight.length}}</span>\r\n                                        </p>                        \r\n                                    </div>\r\n                                    <div class=\"checkbox_left\">\r\n                                        <el-table v-loading=\"loading3\" ref=\"multipleTableRightHos\" :style=\"{width: '100%'}\" height=\"450\" tooltip-effect=\"dark\" stripe :data=\"form.hospitalServiceRight\" @selection-change=\"handleSelectionHospitalChangeRight\" @row-click=\"rowClickHosRight\">\r\n                                            <el-table-column type=\"selection\" width=\"55\" align=\"center\" fixed />\r\n                                            <el-table-column label=\"科室名称\" align=\"center\" prop=\"dictLabel\" />\r\n                                            <el-table-column label=\"分摊比例\" align=\"center\" prop=\"ratio\">\r\n                                                <template slot-scope=\"scope\">\r\n                                                    <el-input-number v-model=\"scope.row.ratio\" :min=\"0\" :max=\"100\" :precision=\"2\" />\r\n                                                </template>\r\n                                            </el-table-column>\r\n                                        </el-table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </el-col>\r\n                </el-tab-pane>\r\n            </el-tabs>\r\n          </el-col>                \r\n        </el-row>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submitFormDept()\" >保 存</el-button>\r\n        <el-button @click=\"cancel\">取 消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getRevenueDept,getDeptList,addDeptList } from \"@/api/revenue/revenue\";\r\n\r\n\r\nexport default {\r\n    name: 'revenueDept',\r\n    props:{\r\n        // 传参为form表单 方便数据回显渲染\r\n        queryParams: {\r\n            type: [Object, Array]\r\n        },\r\n        open: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        id: {\r\n            type: [String, Number],\r\n            default: \"\"\r\n        },\r\n    },\r\n    watch:{\r\n         open: {\r\n            handler(val) {\r\n                this.openDialog = val;\r\n            },\r\n            deep: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            title:'收入核算方案-第三方科室',        \r\n            openDialog: this.open,  \r\n            loading:false,\r\n            loading1:false,\r\n            loading2:false,\r\n            loading3:false,\r\n            clickCount:0,\r\n            activeName: \"outPatient\", \r\n            patToRightBool:true,\r\n            patToLeftBool:true,\r\n            hosToRightBool:true,\r\n            hosToLeftBool:true,\r\n            form:{\r\n                outpatientServiceLeft:[],//门诊左侧数据\r\n                outpatientServiceRight:[],//门诊右侧数据\r\n                hospitalServiceLeft:[],//住院左侧数据\r\n                hospitalServiceRight:[],//住院右侧数据\r\n            },        \r\n            rules:{},\r\n            deptDatas:[],//门诊科室列表数据\r\n            deptDatasLength:0,//门诊科室列表数据用于比较全选数据\r\n            changeDeptList1:[],\r\n            changeDeptList:[],\r\n            deptDatasHos:[],//门诊科室列表数据\r\n            changeHosDeptList:[],\r\n            changeHosDeptList1:[],\r\n            outpatientRightLength:[],\r\n            hospitalRightLength:[],\r\n            selectionRowoutpatientLeft:[],//门诊左侧复选框数据\r\n            selectionRowOutpatientRight:[],//门诊右侧复选框数据\r\n            selectionRowhospitalLeft:[],//住院左侧复选框数据\r\n            selectionRowhospitalRight:[],//住院右侧复选框数据\r\n        };\r\n    },\r\n    computed:{\r\n        num(){//计算属性传递参数，根据传入的数组返回符合条件的长度\r\n\t\t  return data =>  this.form.outpatientServiceLeft&&this.selectionRowoutpatientLeft.length\r\n        },\r\n        num1(){//计算属性传递参数，根据传入的数组返回符合条件的长度\r\n            return data =>  this.form.hospitalServiceLeft&&this.selectionRowOutpatientRight.length\r\n        },\r\n        num2(){//计算属性传递参数，根据传入的数组返回符合条件的长度\r\n            return data =>  this.form.hospitalServiceLeft&&this.selectionRowhospitalLeft.length\r\n        },\r\n        num3(){//计算属性传递参数，根据传入的数组返回符合条件的长度\r\n            return data =>  this.form.hospitalServiceLeft&&this.selectionRowhospitalRight.length\r\n        }\r\n    },\r\n    created(){\r\n         this.getDetail(1)        \r\n         this.getTreeDept({ compCode: this.$store.state.user.accountInfo.deptId ,clinicType:1})\r\n    },\r\n    mounted() {\r\n    },\r\n    methods: {\r\n        //科室查询下拉框事件\r\n        changeDept(e){\r\n            if(this.activeName=='outPatient'){\r\n                let data\r\n                if(e){\r\n                    data = { compCode: this.$store.state.user.accountInfo.deptId ,clinicType:1,deptName:e};\r\n                }else{\r\n                    data = { compCode: this.$store.state.user.accountInfo.deptId ,clinicType:1};      \r\n                }\r\n                this.getTreeDept(data)\r\n            }\r\n            if(this.activeName=='hospital'){\r\n               let data\r\n                if(e){\r\n                    data = { compCode: this.$store.state.user.accountInfo.deptId ,clinicType:2,deptName:e};\r\n                }else{\r\n                    data = { compCode: this.$store.state.user.accountInfo.deptId ,clinicType:2};      \r\n                } \r\n                this.getTreeDept(data)                       \r\n            }\r\n        },\r\n        //tab切换事件\r\n       async handleClick(tab){\r\n            if(tab.label==\"住院\"){\r\n                this.changeHosDeptList=[]\r\n                this.changeHosDeptList1=[]\r\n                // this.form.hospitalServiceLeft=[]                \r\n                this.activeName='hospital'\r\n                if(this.clickCount==0){\r\n                 await this.getDetail(2)  \r\n                }\r\n                this.clickCount+=1\r\n                await this.getTreeDept({ compCode: this.$store.state.user.accountInfo.deptId ,clinicType:2})\r\n            }\r\n            if(tab.label=='门诊'){\r\n                // this.form.outpatientServiceLeft=[]\r\n                this.changeDeptList1=[]\r\n                this.changeDeptList=[]\r\n                this.activeName='outPatient'   \r\n               await this.getTreeDept({ compCode: this.$store.state.user.accountInfo.deptId ,clinicType:1}) \r\n            }\r\n        },\r\n        //获取门诊及住院右侧列表数据\r\n        async getDetail(type){\r\n            let params={\r\n                compCode:this.queryParams.compCode,\r\n                revenueCode:this.queryParams.revenueCode,\r\n                deptType:type\r\n            }\r\n            if(type==1){\r\n                this.loading1=true\r\n                let arr=[]\r\n                await getRevenueDept(params).then(response => {       \r\n                    for(let i=0;i<response.total;i++){\r\n                        arr.indexOf(response.rows[i])===-1?arr.push({ratio:response.rows[i].ratio,dictValue:response.rows[i].deptCode,dictLabel:response.rows[i].deptName}):arr\r\n                    } \r\n                    this.form.outpatientServiceRight = JSON.parse(JSON.stringify(arr));\r\n                    this.outpatientRightLength=response.total\r\n                    this.loading1=false \r\n                });\r\n                return\r\n            }\r\n            if(type==2){\r\n                this.loading3=true\r\n                let arr=[]\r\n               await getRevenueDept(params).then(response => {\r\n                   for(let i=0;i<response.total;i++){\r\n                        arr.indexOf(response.rows[i])===-1?arr.push({ratio:response.rows[i].ratio,dictValue:response.rows[i].deptCode,dictLabel:response.rows[i].deptName}):arr\r\n                    } \r\n                    this.form.hospitalServiceRight = JSON.parse(JSON.stringify(arr));\r\n                    this.hospitalRightLength=response.total \r\n                    this.loading3=false                                                       \r\n                });\r\n                return\r\n            }\r\n             \r\n        },\r\n        //获取科室列表及门诊和住院左侧数据\r\n        async getTreeDept(data) {\r\n             this.loading=true\r\n             this.loading2=true\r\n             if(this.clickCount==0){\r\n                await this.getDetail(2)\r\n            }\r\n            this.clickCount+=1\r\n            await getDeptList(data).then(response => {\r\n                if (response.code == 200) {\r\n                    this.deptDatasLength=response.data.length\r\n                    if(data.clinicType==1){\r\n                        // this.form.outpatientServiceLeft=[]\r\n                        this.changeDeptList1=[]\r\n                        this.changeDeptList=[]\r\n                        this.deptDatas=JSON.parse(JSON.stringify(response.data.map(ite=>{\r\n                            ite.ratio=0\r\n                            return ite\r\n                        })));\r\n                        if(this.outpatientRightLength!==0 || this.form.outpatientServiceRight.length==1){\r\n                            this.changeDeptList1=JSON.parse(JSON.stringify(response.data.map(ite=>{\r\n                            ite.ratio=0\r\n                            return ite\r\n                        })));\r\n                            for(let i in this.form.outpatientServiceRight){\r\n                                    for(let k in this.changeDeptList1){\r\n                                    if(this.form.outpatientServiceRight[i].dictValue == this.changeDeptList1[k].dictValue){\r\n                                        this.changeDeptList1.splice(k,1)\r\n                                    }\r\n                                }\r\n                            }\r\n                           this.form.outpatientServiceLeft=JSON.parse(JSON.stringify(this.changeDeptList1))\r\n                           this.loading=false\r\n                           return\r\n                        }else if(this.outpatientRightLength>1){\r\n                            this.changeDeptList=JSON.parse(JSON.stringify(response.data.map(ite=>{\r\n                            ite.ratio=0\r\n                            return ite\r\n                        })));\r\n                            for(let i in this.form.outpatientServiceRight){\r\n                                    for(let k in this.changeDeptList){\r\n                                    if(this.form.outpatientServiceRight[i].dictValue == this.changeDeptList[k].dictValue){\r\n                                        this.changeDeptList.splice(k,1)\r\n                                    }\r\n                                }\r\n                            }\r\n                           this.form.outpatientServiceLeft=JSON.parse(JSON.stringify(this.changeDeptList))\r\n                           this.loading=false\r\n                           return\r\n                        }else if(this.outpatientRightLength==0&&this.form.outpatientServiceRight.length==0){\r\n                            this.form.outpatientServiceLeft=JSON.parse(JSON.stringify(this.deptDatas))\r\n                            this.loading=false\r\n                            return\r\n                        }\r\n                    }\r\n                    if(data.clinicType==2){\r\n                        this.changeHosDeptList=[]\r\n                        this.changeHosDeptList1=[]\r\n                        // this.form.hospitalServiceLeft=[]\r\n                        this.deptDatasHos=JSON.parse(JSON.stringify(response.data.map(ite=>{\r\n                            ite.ratio=0\r\n                            return ite\r\n                        })));\r\n                        if(this.hospitalRightLength!==0 || this.form.hospitalServiceRight.length==1){\r\n                             this.changeHosDeptList1=JSON.parse(JSON.stringify(response.data.map(ite=>{\r\n                            ite.ratio=0\r\n                            return ite\r\n                        })));\r\n                            for(let i in this.form.hospitalServiceRight){\r\n                                    for(let k in this.changeHosDeptList1){\r\n                                    if(this.form.hospitalServiceRight[i].dictValue == this.changeHosDeptList1[k].dictValue){\r\n                                        this.changeHosDeptList1.splice(k,1)\r\n                                    }\r\n                                }\r\n                            }\r\n                            this.form.hospitalServiceLeft=JSON.parse(JSON.stringify(this.changeHosDeptList1))\r\n                            this.loading2=false        \r\n                            return                   \r\n                        }else if(this.form.hospitalServiceRight.length>1){              \r\n                            this.changeHosDeptList=JSON.parse(JSON.stringify(response.data.map(ite=>{\r\n                            ite.ratio=0\r\n                            return ite\r\n                        })));\r\n                            for(let i in this.form.hospitalServiceRight){\r\n                                    for(let k in this.changeHosDeptList){\r\n                                    if(this.form.hospitalServiceRight[i].dictValue == this.changeHosDeptList[k].dictValue){\r\n                                        this.changeHosDeptList.splice(k,1)\r\n                                    }\r\n                                }\r\n                            }\r\n                            this.loading2=false\r\n                            this.form.hospitalServiceLeft=JSON.parse(JSON.stringify(this.changeHosDeptList))\r\n                            return                                              \r\n                        }else if(this.hospitalRightLength==0 && this.form.hospitalServiceRight.length==0){\r\n                            this.form.hospitalServiceLeft=JSON.parse(JSON.stringify(this.deptDatasHos))\r\n                            this.loading2=false\r\n                            return                                               \r\n                        }\r\n                        \r\n                    }\r\n\r\n                } else {\r\n                    this.msgError(response.msg);\r\n                }\r\n            });\r\n            \r\n            \r\n        },\r\n        hospitalToright(){\r\n            //将过滤后的数组需要添加到右边的数组中\r\n            for(let i = 0;i<this.selectionRowhospitalLeft.length;i++){\r\n                 this.form.hospitalServiceRight.indexOf(this.selectionRowhospitalLeft[i]) === -1 ?  this.form.hospitalServiceRight.push(this.selectionRowhospitalLeft[i]) :  this.form.hospitalServiceRight\r\n            };        \r\n            //剩余左边数据\r\n            for(let i=0;i<this.form.hospitalServiceLeft.length;i++){\r\n                 this.form.hospitalServiceRight.forEach(ite=>{\r\n                    if(this.form.hospitalServiceLeft[i]&&this.form.hospitalServiceLeft[i].dictValue==ite.dictValue){        \r\n                          this.form.hospitalServiceLeft.splice(i,1)\r\n                          i-=1\r\n                          i<0?0:i\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        hospitalToLeft(){\r\n            for(let i = 0;i<this.selectionRowhospitalRight.length;i++){\r\n                this.form.hospitalServiceLeft.indexOf(this.selectionRowhospitalRight[i]) === -1 ?  this.form.hospitalServiceLeft.push(this.selectionRowhospitalRight[i]) :  this.form.hospitalServiceLeft\r\n            };\r\n            //剩余右边数据\r\n            for(let i=0;i<this.form.hospitalServiceRight.length;i++){\r\n                 this.form.hospitalServiceLeft.forEach(ite=>{\r\n                    if(this.form.hospitalServiceRight[i]&&this.form.hospitalServiceRight[i].dictValue==ite.dictValue){     \r\n                          this.form.hospitalServiceRight.splice(i,1)\r\n                          i-=1\r\n                          i<0?0:i\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        outpatientToright(){\r\n          //将过滤后的数组需要添加到右边的数组中\r\n            for(let i = 0;i<this.selectionRowoutpatientLeft.length;i++){\r\n                 this.form.outpatientServiceRight.indexOf(this.selectionRowoutpatientLeft[i]) === -1 ?  this.form.outpatientServiceRight.push(this.selectionRowoutpatientLeft[i]) :  this.form.outpatientServiceRight\r\n            };    \r\n            //剩余左边数据\r\n            for(let i=0;i<this.form.outpatientServiceLeft.length;i++){\r\n                 this.form.outpatientServiceRight.forEach(ite=>{\r\n                    if(this.form.outpatientServiceLeft[i]&&this.form.outpatientServiceLeft[i].dictValue==ite.dictValue){\r\n                          this.form.outpatientServiceLeft.splice(i,1)\r\n                          i-=1\r\n                          i<0?0:i\r\n                    }\r\n                })\r\n            }\r\n\t\t},\r\n        //将右边数据放到左边\r\n        outpatientToleft(){\r\n            for(let i = 0;i<this.selectionRowOutpatientRight.length;i++){\r\n                 this.form.outpatientServiceLeft.indexOf(this.selectionRowOutpatientRight[i]) === -1 ?  this.form.outpatientServiceLeft.push(this.selectionRowOutpatientRight[i]) :  this.form.outpatientServiceLeft\r\n            };\r\n            //剩余右边数据\r\n            for(let i=0;i<this.form.outpatientServiceRight.length;i++){\r\n                 this.form.outpatientServiceLeft.forEach(ite=>{\r\n                    if(this.form.outpatientServiceRight[i]&&this.form.outpatientServiceRight[i].dictValue==ite.dictValue){         \r\n                          this.form.outpatientServiceRight.splice(i,1)\r\n                          i-=1\r\n                          i<0?i=0:i\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        // 门诊多选框选中数据\r\n        handleSelectionOutpatientChange(selection) {\r\n            this.selectionRowoutpatientLeft=selection.map(ite=>{\r\n                ite.ratio=0\r\n                return ite\r\n            });\r\n            if(selection.length!==0){\r\n                this.patToRightBool=false;\r\n            }else{\r\n                this.patToRightBool=true;\r\n            }\r\n        },\r\n        //门诊右侧多选框数据\r\n        handleSelectionChangeRight(selection){\r\n            this.selectionRowOutpatientRight=selection;\r\n            if(selection.length!==0){\r\n                this.patToLeftBool=false;\r\n            }else{\r\n                this.patToLeftBool=true;\r\n            }\r\n        },\r\n        //住院左侧多选框\r\n        handleSelectionHospitalChange(selection){\r\n            this.selectionRowhospitalLeft=selection.map(ite=>{\r\n                ite.ratio=0\r\n                return ite\r\n            });\r\n            if(selection.length!==0){\r\n                this.hosToRightBool=false;\r\n            }else{\r\n                this.hosToRightBool=true;\r\n            }\r\n        },\r\n        //住院右侧多选框\r\n        handleSelectionHospitalChangeRight(selection){\r\n            this.selectionRowhospitalRight=selection;\r\n            if(selection.length!==0){\r\n                this.hosToLeftBool=false;\r\n            }else{\r\n               this.hosToLeftBool=true;\r\n            }\r\n        },\r\n        rowClick(row, column, event) {\r\n            let refsElTable = this.$refs.multipleTable;\r\n            let findRow = this.selectionRowoutpatientLeft.find(c => c.rowIndex == row.rowIndex);\r\n            if (findRow && this.selectionRowoutpatientLeft.length == 1) {\r\n                refsElTable.toggleRowSelection(row, false);\r\n                return;\r\n            }\r\n            refsElTable.clearSelection();\r\n            refsElTable.toggleRowSelection(row);\r\n        },\r\n        rowClickPatRight(row, column, event){\r\n            let refsElTable = this.$refs.multipleTableRight;\r\n            let findRow = this.selectionRowOutpatientRight.find(c => c.rowIndex == row.rowIndex);\r\n            if (findRow && this.selectionRowOutpatientRight.length == 1) {\r\n                refsElTable.toggleRowSelection(row, false);\r\n                return;\r\n            }\r\n            refsElTable.clearSelection();\r\n            refsElTable.toggleRowSelection(row);\r\n        },\r\n        rowClickHos(row, column, event){\r\n            let refsElTable = this.$refs.multipleTableHos;\r\n            let findRow = this.selectionRowhospitalLeft.find(c => c.rowIndex == row.rowIndex);\r\n            if (findRow && this.selectionRowhospitalLeft.length == 1) {\r\n                refsElTable.toggleRowSelection(row, false);\r\n                return;\r\n            }\r\n            refsElTable.clearSelection();\r\n            refsElTable.toggleRowSelection(row);\r\n        },\r\n        rowClickHosRight(row, column, event){\r\n            let refsElTable = this.$refs.multipleTableRightHos;\r\n            let findRow = this.selectionRowhospitalRight.find(c => c.rowIndex == row.rowIndex);\r\n            if (findRow && this.selectionRowhospitalRight.length == 1) {\r\n                refsElTable.toggleRowSelection(row, false);\r\n                return;\r\n            }\r\n            refsElTable.clearSelection();\r\n            refsElTable.toggleRowSelection(row);\r\n        },\r\n        reset(){\r\n            this.form={\r\n                outpatientServiceLeft:[],//门诊左侧数据\r\n                outpatientServiceRight:[],//门诊右侧数据\r\n                hospitalServiceLeft:[],//住院左侧数据\r\n                hospitalServiceRight:[],//住院右侧数据\r\n            };\r\n            this.clickCount=0\r\n        },\r\n        /** 科室提交按钮 */\r\n        submitFormDept() {\r\n            this.$refs[\"queryForm\"].validate(valid => {\r\n                if (valid) {\r\n                let params,arr=[],arr1=[],sum=0,sum1=0;\r\n                    if(this.form.outpatientServiceRight.length==0 && this.form.hospitalServiceRight==0){\r\n                        params={\r\n                            revenueCode:this.queryParams.revenueCode,\r\n                            pmsRevenueDepts:[],\r\n                            compCode:this.queryParams.compCode,\r\n                        }\r\n                        let saveLoading = this.saveLoading();\r\n                            addDeptList(params).then(response => {\r\n                                this.msgSuccess(\"收入核算科室设置成功\");\r\n                                this.$emit(\"success\", false);\r\n                                saveLoading.close();\r\n                        });\r\n                    }\r\n                    if(this.form.outpatientServiceRight.length==0 && this.form.hospitalServiceRight!=0){\r\n                        this.form.hospitalServiceRight.forEach(ite=>{\r\n                            sum1+=Number(ite.ratio)                        \r\n                            arr1.push({\r\n                                deptName:ite.dictLabel,\r\n                                deptCode:ite.dictValue,\r\n                                ratio:ite.ratio\r\n                            })\r\n                        })\r\n                        params={\r\n                            revenueCode:this.queryParams.revenueCode,\r\n                            pmsRevenueDepts:arr1,\r\n                            compCode:this.queryParams.compCode,\r\n                        }\r\n                        if(sum1>100){\r\n                            this.msgError(\"住院已选科室分摊比例的总和应小于或等于100\")\r\n                            return\r\n                        }else{\r\n                            let saveLoading = this.saveLoading();\r\n                            addDeptList(params).then(response => {\r\n                                this.msgSuccess(\"收入核算科室设置成功\");\r\n                                this.$emit(\"success\", false);\r\n                                saveLoading.close();\r\n                            });\r\n                        }\r\n                    }\r\n                    if(this.form.outpatientServiceRight.length!=0 && this.form.hospitalServiceRight==0){\r\n                        this.form.outpatientServiceRight.forEach(ite=>{\r\n                            sum+=Number(ite.ratio)\r\n                            arr.push({\r\n                                deptName:ite.dictLabel,\r\n                                deptCode:ite.dictValue,\r\n                                ratio:ite.ratio\r\n                            })\r\n                        })\r\n                        params={\r\n                            revenueCode:this.queryParams.revenueCode,\r\n                            pmsRevenueDepts:arr,\r\n                            compCode:this.queryParams.compCode,\r\n                        }\r\n                        if(sum>100){\r\n                            this.msgError(\"门诊已选科室分摊比例的总和应小于或等于100\")\r\n                            return\r\n                        }else{\r\n                            let saveLoading = this.saveLoading();\r\n                            addDeptList(params).then(response => {\r\n                                this.msgSuccess(\"收入核算科室设置成功\");\r\n                                this.$emit(\"success\", false);\r\n                                saveLoading.close();\r\n                            });\r\n                        }\r\n                    }\r\n                    if(this.form.outpatientServiceRight.length!=0 && this.form.hospitalServiceRight.length!=0){\r\n                        this.form.outpatientServiceRight.forEach(ite=>{\r\n                            sum+=Number(ite.ratio)\r\n                            arr.push({\r\n                                deptName:ite.dictLabel,\r\n                                deptCode:ite.dictValue,\r\n                                ratio:ite.ratio\r\n                            })\r\n                        })\r\n                        this.form.hospitalServiceRight.forEach(ite=>{\r\n                            sum1+=Number(ite.ratio)                        \r\n                            arr1.push({\r\n                                deptName:ite.dictLabel,\r\n                                deptCode:ite.dictValue,\r\n                                ratio:ite.ratio\r\n                            })\r\n                        })\r\n                        params={\r\n                            revenueCode:this.queryParams.revenueCode,\r\n                            pmsRevenueDepts:[...arr1,...arr],\r\n                            compCode:this.queryParams.compCode,\r\n                        }\r\n                        if(sum>100||sum1>100){\r\n                            this.msgError(\"门诊及住院已选科室分摊比例的总和应分别小于或等于100\")\r\n                            return\r\n                        }else{\r\n                            let saveLoading = this.saveLoading();\r\n                            addDeptList(params).then(response => {\r\n                                this.msgSuccess(\"收入核算科室设置成功\");\r\n                                this.$emit(\"success\", false);\r\n                                saveLoading.close();\r\n                            });\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n            });\r\n        },\r\n      // 弹框关闭\r\n        handleDialogClose() {\r\n            this.$emit(\"cancel\", false);\r\n            this.reset()\r\n        },\r\n        // 取消\r\n        cancel() {\r\n            this.$emit(\"cancel\", false);\r\n            this.reset()\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-dialog{\r\n    .el-form-item__label{\r\n        width: 80px !important;\r\n    }\r\n    .el-form-item__content{\r\n        margin-left: 80px !important\r\n    }\r\n    .el-tabs__item.is-top{\r\n        font-size:16px;\r\n    }\r\n}\r\n.transfer{\r\n    width: 100%;\r\n    .transfer_left{\r\n        border: 1px solid #cccccc;\r\n        border-radius: 2%;\r\n        width: 45%;\r\n        float: left;\r\n        overflow: hidden;\r\n        height:500px;\r\n        .transfer_left_top{\r\n            padding: 0 10px;\r\n            p{\r\n                position: relative;\r\n                label{\r\n                    font-size: 16px;\r\n                    font-weight: normal;\r\n                    margin-left: 10px\r\n                }\r\n                span{\r\n                position: absolute;\r\n                right: 10px\r\n            }\r\n            }\r\n        }\r\n    }\r\n    .transfer_main{\r\n        width: 10%;\r\n        float: left;\r\n        line-height: 500px;\r\n        text-align: center;\r\n        position: relative;\r\n       ::v-deep .el-button-group .el-button--primary:first-child{\r\n           position: absolute;\r\n           top:40%;\r\n           left: 50%;\r\n           transform: translate(-50%,-50%);\r\n           border: 0;\r\n           border-radius: 4px;\r\n        }\r\n        ::v-deep .el-button-group .el-button--primary:last-child{\r\n           position: absolute;\r\n           top:50%;\r\n           left: 50%;\r\n           transform: translate(-50%,-50%);\r\n           border: 0;\r\n           border-radius: 4px;\r\n\r\n        }\r\n    }\r\n    .transfer_right{\r\n        border: 1px solid #cccccc;\r\n        border-radius: 2%;\r\n        width: 45%;\r\n        height: 500px;\r\n        overflow: hidden;\r\n        float: right;\r\n        .transfer_right_top{\r\n            padding: 0 10px;            \r\n            p{\r\n                position: relative;\r\n                label{\r\n                    font-weight: normal;\r\n                    font-size: 16px; \r\n                    margin-left: 10px\r\n                }\r\n                span{\r\n                    position: absolute;\r\n                    right: 10px\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .checkbox_left{\r\n        margin-top: 10px;\r\n        padding:0 4px;\r\n        overflow: auto;\r\n        min-height:300px;\r\n    }\r\n}\r\n</style>"]}]}