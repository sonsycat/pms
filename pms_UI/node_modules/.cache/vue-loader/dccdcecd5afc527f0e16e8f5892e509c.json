{"remainingRequest":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\pms_oracle\\pms_UI\\src\\views\\components\\formDesignAdd\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\pms_oracle\\pms_UI\\src\\views\\components\\formDesignAdd\\index.vue","mtime":1693362205000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNhdmVEZXNpZ24sZ2V0Rm9ybSxnZXRGb3JtRGVzaWduIH0gZnJvbSAnQC9hcGkvdXRpbHMnCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6J2FkZEZvcm0nLAoJcHJvcHM6IHsKCQlvcGVuOiB7CgkJCXR5cGU6IEJvb2xlYW4sCgkJCWRlZmF1bHQ6IGZhbHNlCgkJfSwKCQlmb3JtTWFya2luZ0lkOiB7CgkJCXR5cGU6IFN0cmluZywKCQkJZGVmYXVsdDogIiIKCQl9Cgl9LAoJd2F0Y2g6IHsKCQlmb3JtTWFya2luZ0lkOiB7CgkJCWhhbmRsZXIodmFsKSB7CgkJCQlpZiAodmFsKSB7CgkJCQkJdGhpcy5mb3JtTWFya2luZ0lkID0gdmFsOwoJCQkJCXRoaXMudGl0bGUgPSAi5qih5p2/566h55CGLee8lui+keaooeadvy3mqKHmnb/lrZfmrrUt5paw5aKeIjsKCQkJCX0KCQkJfSwKCQkJZGVlcDogdHJ1ZSwKCQkJaW1tZWRpYXRlOiB0cnVlCgkJfSwKCQlvcGVuOiB7CgkJCWhhbmRsZXIodmFsKSB7CgkJCQl0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CgkJCX0sCgkJCWRlZXA6IHRydWUsCgkJCWltbWVkaWF0ZTogdHJ1ZQoJCX0KICAJfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CgkJICBvcGVuRGlhbG9nOmZhbHNlLAoJCSAgdGl0bGU6J+aooeadv+euoeeQhi3nvJbovpHmqKHmnb8t5qih5p2/5a2X5q61LeaWsOWinicsCiAgICAgICAgICBmb3JtTmFtZTonJywKICAgICAgICAgIGpzb25EYXRhOnsKICAgICAgICAgIAlsaXN0OltdLAoJCSAgfSwKCQkgIGxpc3Q6W10sCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6e30sCiAgICBjcmVhdGVkKCkgewoJCXRoaXMuJG5leHRUaWNrKCgpPT57CgkJCXRoaXMuaGFuZGxlRm9ybVJlYWR5KCk7CgkJfSkKICAgIH0sCiAgICBtZXRob2RzOnsKCQkvLyDlvLnmoYblhbPpl60KCQloYW5kbGVEaWFsb2dDbG9zZSgpIHsKCQkJdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwoJCX0sCiAgICAJaGFuZGxlRm9ybVJlYWR5ICgpIHsKCSAgICAgICAgY29uc3QgZm9ybURlc2lnbklkID0gdGhpcy5mb3JtTWFya2luZ0lkOwoJICAgICAgICBnZXRGb3JtRGVzaWduKGZvcm1EZXNpZ25JZCkudGhlbihyZXNwb25zZSA9PiB7CgkgICAgICAgICAgICBjb25zdCBmb3JtSnNvbiA9IHJlc3BvbnNlLmRhdGEuZm9ybUpzb247CgkgICAgICAgICAgICBpZihmb3JtSnNvbiAhPSBudWxsICYmIGZvcm1Kc29uICE9ICcnKSB7CgkJCQkJbGV0IGRhdGE9SlNPTi5wYXJzZShmb3JtSnNvbik7CgkJCQkJZGF0YS5zaXplPSJtaW5pIgoJCQkJCWRhdGEubGlzdC5mb3JFYWNoKF89PnsKCQkJCQkJXy5zaXplPSJtaW5pIjsKCQkJCQkJXy5vcHRpb25zLmRpc2FibGVkPV8ub3B0aW9ucy5kaXNhYmxlZD09ImZhbHNlIj9mYWxzZTp0cnVlOwoJCQkJCQlfLm9wdGlvbnMucmVxdWlyZWQ9Xy5vcHRpb25zLnJlcXVpcmVkPT0iZmFsc2UiP2ZhbHNlOnRydWU7CgkJCQkJCV8uY29sdW1ucyAmJiBfLmNvbHVtbnMuZm9yRWFjaChpdGU9PnsKCQkJCQkJCWl0ZS5zcGFuPWl0ZS5zcGFuICogMTsKCQkJCQkJCWl0ZS5saXN0LmZvckVhY2goaXRlbT0+ewoJCQkJCQkJCWl0ZW0uc2l6ZT0ibWluaSI7CgkJCQkJCQkJaXRlbS5vcHRpb25zLmRpc2FibGVkPWl0ZW0ub3B0aW9ucy5kaXNhYmxlZD09ImZhbHNlIj9mYWxzZTp0cnVlOwoJCQkJCQkJCWl0ZW0ub3B0aW9ucy5yZXF1aXJlZD1pdGVtLm9wdGlvbnMucmVxdWlyZWQ9PSJmYWxzZSI/ZmFsc2U6dHJ1ZTsKCQkJCQkJCX0pCgkJCQkJCX0pCgkJCQkJfSkKCQkJCQkvLyBjb25zb2xlLmxvZyhkYXRhLCdkYXRhJykKCQkJCQl0cnkgewoJCQkJCQl0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uc2V0SlNPTihkYXRhKQoJCQkJCX0gY2F0Y2ggKGQpIHsKCQkJCQkJY29uc29sZS5sb2coZCkKCQkJCQl9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgIH0sCgkJc2F2ZURhdGEoKXsKCQkJbGV0IHNhdmVMb2FkaW5nPXRoaXMuc2F2ZUxvYWRpbmcoKQoJCQkJY29uc3QganNvbiA9IHRoaXMuJHJlZnMubWFraW5nZm9ybS5nZXRKU09OKCk7CgkJCQlzYXZlRGVzaWduKHRoaXMuZm9ybU1hcmtpbmdJZCwganNvbiwgdGhpcy4kcmVmcy5tYWtpbmdmb3JtLmdldEh0bWwoKSkudGhlbigocmVzKT0+ewoJCQkJCWlmKHJlcy5jb2RlPT0yMDApewoJCQkJCXRoaXMubXNnU3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIik7CgkJCQkJdGhpcy5oYW5kbGVEaWFsb2dDbG9zZSgpOwoJCQkJCXNhdmVMb2FkaW5nLmNsb3NlKCkKCQkJCQl9CgkJCQl9KQoJCX0sCiAgICAgICAgaGFuZGxlU3VibWl0ICgpIHsKCQkJdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k6KaG55uW5Y6f5pyJ6YWN572u5pWw5o2uPycsICLorablkYoiLCB7CgkJCQljb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCgkJCQljYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKCQkJCXR5cGU6ICJ3YXJuaW5nIgoJCQl9KS50aGVuKCgpPT4gewoJCQkJcmV0dXJuIHRoaXMuc2F2ZURhdGEoKQoJCQl9KS5jYXRjaCgoKSA9PiB7fSk7CgogICAgICAgIH0sCiAgICAgICAgLy8gY2xvc2UoKSB7CiAgICAgICAgLy8gCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxWaWV3JywgdGhpcy4kcm91dGUpCiAgICAgICAgLy8gCXRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDonL3Rvb2wvZm9ybURlc2lnbicsIHF1ZXJ5OiB7IHQ6IERhdGUubm93KCkgfSB9KQogICAgICAJLy8gfSwKICAgIH0sCgp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/components/formDesignAdd","sourcesContent":["<template>\n\t<div class=\"add_form_dialog\">\n\t\t<el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"80%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"true\" @close=\"handleDialogClose\">\n\t\t\t<div class=\"dynamicForm\">\n\t\t\t\t<!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\n\t\t\t\t<fm-making-form\n\t\t\t\t\tref=\"makingform\"\n\t\t\t\t\tstyle=\"height:700px;display: block;\"\n\t\t\t\t\tpreview\n\t\t\t\t\tgenerate-code\n\t\t\t\t\tgenerate-json\n\t\t\t\t>\n\t\t\t\t<!-- 头部内容自定义，添加提交按钮 -->\n\t\t\t\t\t<template slot=\"action\">\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-upload\" size=\"mini\" @click=\"handleSubmit\">保存</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</fm-making-form>\n\t\t\t\t<div class=\"list-wraper previewForm\">\n\t\t\t\t\t<fm-generate-form\n\t\t\t\t\t\t:data=\"jsonData\"\n\t\t\t\t\t\tref=\"generateForm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</fm-generate-form>\n\t\t\t\t\t<!-- <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button> -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\nimport { saveDesign,getForm,getFormDesign } from '@/api/utils'\nexport default {\n\tname:'addForm',\n\tprops: {\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tformMarkingId: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t}\n\t},\n\twatch: {\n\t\tformMarkingId: {\n\t\t\thandler(val) {\n\t\t\t\tif (val) {\n\t\t\t\t\tthis.formMarkingId = val;\n\t\t\t\t\tthis.title = \"模板管理-编辑模板-模板字段-新增\";\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true,\n\t\t\timmediate: true\n\t\t},\n\t\topen: {\n\t\t\thandler(val) {\n\t\t\t\tthis.openDialog = val;\n\t\t\t},\n\t\t\tdeep: true,\n\t\t\timmediate: true\n\t\t}\n  \t},\n    data(){\n        return{\n\t\t  openDialog:false,\n\t\t  title:'模板管理-编辑模板-模板字段-新增',\n          formName:'',\n          jsonData:{\n          \tlist:[],\n\t\t  },\n\t\t  list:[],\n        }\n    },\n    components:{},\n    created() {\n\t\tthis.$nextTick(()=>{\n\t\t\tthis.handleFormReady();\n\t\t})\n    },\n    methods:{\n\t\t// 弹框关闭\n\t\thandleDialogClose() {\n\t\t\tthis.$emit(\"cancel\", false);\n\t\t},\n    \thandleFormReady () {\n\t        const formDesignId = this.formMarkingId;\n\t        getFormDesign(formDesignId).then(response => {\n\t            const formJson = response.data.formJson;\n\t            if(formJson != null && formJson != '') {\n\t\t\t\t\tlet data=JSON.parse(formJson);\n\t\t\t\t\tdata.size=\"mini\"\n\t\t\t\t\tdata.list.forEach(_=>{\n\t\t\t\t\t\t_.size=\"mini\";\n\t\t\t\t\t\t_.options.disabled=_.options.disabled==\"false\"?false:true;\n\t\t\t\t\t\t_.options.required=_.options.required==\"false\"?false:true;\n\t\t\t\t\t\t_.columns && _.columns.forEach(ite=>{\n\t\t\t\t\t\t\tite.span=ite.span * 1;\n\t\t\t\t\t\t\tite.list.forEach(item=>{\n\t\t\t\t\t\t\t\titem.size=\"mini\";\n\t\t\t\t\t\t\t\titem.options.disabled=item.options.disabled==\"false\"?false:true;\n\t\t\t\t\t\t\t\titem.options.required=item.options.required==\"false\"?false:true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t// console.log(data,'data')\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.$refs.makingform.setJSON(data)\n\t\t\t\t\t} catch (d) {\n\t\t\t\t\t\tconsole.log(d)\n\t\t\t\t\t}\n\t            }\n\t        });\n\t    },\n\t\tsaveData(){\n\t\t\tlet saveLoading=this.saveLoading()\n\t\t\t\tconst json = this.$refs.makingform.getJSON();\n\t\t\t\tsaveDesign(this.formMarkingId, json, this.$refs.makingform.getHtml()).then((res)=>{\n\t\t\t\t\tif(res.code==200){\n\t\t\t\t\tthis.msgSuccess(\"保存成功\");\n\t\t\t\t\tthis.handleDialogClose();\n\t\t\t\t\tsaveLoading.close()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n        handleSubmit () {\n\t\t\tthis.$confirm('是否确认覆盖原有配置数据?', \"警告\", {\n\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\tcancelButtonText: \"取消\",\n\t\t\t\ttype: \"warning\"\n\t\t\t}).then(()=> {\n\t\t\t\treturn this.saveData()\n\t\t\t}).catch(() => {});\n\n        },\n        // close() {\n        // \tthis.$store.dispatch('tagsView/delView', this.$route)\n        // \tthis.$router.push({ path:'/tool/formDesign', query: { t: Date.now() } })\n      \t// },\n    },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.add_form_dialog{\n\t::v-deep .el-dialog {\n\t\tmin-height: 10%;\n\t\toverflow: hidden;\n\t\t.el-dialog__body {\n\t\t\tmax-height: auto !important;\n\t\t\toverflow: auto;\n\t\t}\n\t}\n}\n.dynamicForm{\n\t::v-deep .el-aside{\n\t\twidth: 310px !important;\n\t\t&.widget-config-container{\n\t\t\twidth: 350px !important;\n\t\t\t.el-form-item__content{\n\t\t\t\tmargin-left: 0 !important\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n"]}]}