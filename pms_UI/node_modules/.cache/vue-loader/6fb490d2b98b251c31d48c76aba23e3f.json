{"remainingRequest":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hrp\\zjry-pms-ui\\src\\views\\components\\loginCheck\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\hrp\\zjry-pms-ui\\src\\views\\components\\loginCheck\\index.vue","mtime":1682043105501},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7YWN0aXZlfSBmcm9tICdAL2FwaS9saWNlbnNlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczp7CiAgICBvcGVuOnsKICAgICAgdHlwZTpCb29sZWFuLAogICAgICBkZWZhdWx0OmZhbHNlCiAgICB9LAogICAgbWNvZGU6ewogICAgICB0eXBlOltTdHJpbmcsTnVtYmVyXSwKICAgICAgZGVmYXVsdDoiIgogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoZWNrT3Blbjp0aGlzLm9wZW4sCiAgICAgIGRpYWxvZ09wZW46ZmFsc2UsCiAgICAgIGFjdGl2ZUZvcm1SdWxlczogewogICAgICAgIGNvZGU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIHRyaWdnZXI6ICJibHVyIiwgbWVzc2FnZTogIuaOiOadg+eggeS4jeiDveS4uuepuiIgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgLy8g5o6I5p2D5a6a5LmJCiAgICAgIGFjdGl2ZUZvcm06IHsKICAgICAgICBtY29kZToiIiwKICAgICAgICBjb2RlOiIiCiAgICAgIH0sCgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOehruWumua/gOa0uwogICAgc3VibWl0Q2hlY2soKXsKICAgICAgdGhpcy5kaWFsb2dPcGVuID0gdHJ1ZTsKICAgICAgdGhpcy5yZXNldEZvcm0oJ2FjdGl2ZUZvcm0nKTsKICAgICAgdGhpcy5hY3RpdmVGb3JtLm1jb2RlID0gdGhpcy5tY29kZTsKICAgIH0sCiAgICAvLyDmjojmnYPmv4DmtLsg56Gu6K6kCiAgICBzdWJtaXRBY3RpdmVGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmFjdGl2ZUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgYWN0aXZlKHRoaXMuYWN0aXZlRm9ybS5jb2RlKS50aGVuKHIgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZygnYWN0aXZlIHJldHVybiBjb2RlOicgKyByLmNvZGUpOwogICAgICAgICAgICBpZihyLmNvZGUgPT0gMCkgewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiKQogICAgICAgICAgICAgIHRoaXMuZGlhbG9nT3BlbiA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJGVtaXQoImVycm9yIiwgci5tc2cpCiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dPcGVuID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5o+Q56S65YWz6ZetCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FuY2VsJyk7CiAgICB9LAogICAgLy8g5o6I5p2D5r+A5rS75YWz6ZetCiAgICBjbG9zZUFjdGl2ZUZvcm0oKXsKICAgICAgdGhpcy5kaWFsb2dPcGVuID0gZmFsc2U7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/components/loginCheck","sourcesContent":["<template>\n  <div>\n    <el-theme-dialog title=\"提示\" :visible.sync=\"checkOpen\" width=\"300px\" append-to-body @close=\"close\">\n      <span>系统未授权，请激活！</span>\n      <span slot=\"footer\">\n        <el-button type=\"primary\" @click=\"submitCheck\">确 定</el-button>\n        <el-button @click=\"close\">取 消</el-button>\n      </span>\n    </el-theme-dialog>\n    <!-- 填写授权码对话框 -->\n    <el-theme-dialog title=\"授权激活\" :visible.sync=\"dialogOpen\" width=\"500px\" append-to-body>\n      <el-form ref=\"activeForm\" :model=\"activeForm\" :rules=\"activeFormRules\" label-width=\"100px\">\n        <el-form-item label=\"机器码\" prop=\"mcode\">\n          <el-input v-model=\"activeForm.mcode\" readonly=\"readonly\" />\n        </el-form-item>\n        <el-form-item label=\"授权码\" prop=\"code\">\n          <el-input type=\"textarea\" v-model=\"activeForm.code\" placeholder=\"请输入授权码\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitActiveForm\">确认激活</el-button>\n        <el-button @click=\"closeActiveForm\">关 闭</el-button>\n      </div>\n    </el-theme-dialog>\n  </div>\n</template>\n\n<script>\n  import {active} from '@/api/license';\n\n  export default {\n    props:{\n      open:{\n        type:Boolean,\n        default:false\n      },\n      mcode:{\n        type:[String,Number],\n        default:\"\"\n      }\n    },\n    data() {\n      return {\n        checkOpen:this.open,\n        dialogOpen:false,\n        activeFormRules: {\n          code: [\n            { required: true, trigger: \"blur\", message: \"授权码不能为空\" }\n          ]\n        },\n        // 授权定义\n        activeForm: {\n          mcode:\"\",\n          code:\"\"\n        },\n\n      };\n    },\n    methods: {\n      // 确定激活\n      submitCheck(){\n        this.dialogOpen = true;\n        this.resetForm('activeForm');\n        this.activeForm.mcode = this.mcode;\n      },\n      // 授权激活 确认\n      submitActiveForm() {\n        this.$refs.activeForm.validate(valid => {\n          if (valid) {\n            active(this.activeForm.code).then(r => {\n              console.log('active return code:' + r.code);\n              if(r.code == 0) {\n                this.$emit(\"success\")\n                this.dialogOpen = false;\n              } else {\n                this.$emit(\"error\", r.msg)\n                this.dialogOpen = false;\n              }\n            });\n          }\n        });\n      },\n      // 提示关闭\n      close() {\n        this.$emit('cancel');\n      },\n      // 授权激活关闭\n      closeActiveForm(){\n        this.dialogOpen = false;\n      }\n    }\n  };\n</script>\n"]}]}