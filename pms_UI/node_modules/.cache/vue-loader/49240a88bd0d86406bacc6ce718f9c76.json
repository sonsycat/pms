{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\revenue\\revenuenum\\addEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\revenue\\revenuenum\\addEdit.vue","mtime":1682043106447},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHZhbGlkRW1haWwgfSBmcm9tJ0AvdXRpbHMvdmFsaWRhdGUnCmltcG9ydCB7IGxpc3RSZXZlbnVlbnVtLCBnZXRSZXZlbnVlbnVtLCBkZWxSZXZlbnVlbnVtLCBhZGRSZXZlbnVlbnVtLCB1cGRhdGVSZXZlbnVlbnVtLCBleHBvcnRSZXZlbnVlbnVtIH0gZnJvbSAiQC9hcGkvcmV2ZW51ZS9yZXZlbnVlbnVtIjsKaW1wb3J0IHtsaXN0UmV2ZW51ZX0gZnJvbSAiQC9hcGkvcmV2ZW51ZS9yZXZlbnVlIjsKaW1wb3J0IHt0cmVlUm9vbX0gZnJvbSAnQC9hcGkvdW50aWwnOwppbXBvcnQgcmV2ZW51ZVBvcCBmcm9tICJAL3ZpZXdzL2NvbXBvbmVudHMvcmV2ZW51ZVBvcCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYWRkRWRpdCIsCiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpZDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHF1ZXJ5UGFyYW1zOnsKICAgICAgdHlwZTpPYmplY3QsCiAgICAgIGRlZmF1bHQ6bnVsbAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGlkOiB7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMuaWQgPSB2YWw7CiAgICAgICAgICB0aGlzLnRpdGxlID0gIuaUtuWFpeW9leWFpeeuoeeQhi3nvJbovpEiOwogICAgICAgICAgdGhpcy5nZXREZXRhaWxJbmZvKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaWQgPSAiIjsKICAgICAgICAgIHRoaXMudGl0bGUgPSAi5pS25YWl5b2V5YWl566h55CGLeaWsOWiniI7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBvcGVuOiB7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5vcGVuRGlhbG9nID0gdmFsOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICByZXZlbnVlUG9wCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlzYWJsZUNhcmU6IGZhbHNlLAogICAgICB0aXRsZTogIuaUtuWFpeW9leWFpeeuoeeQhi3mlrDlop4iLAogICAgICBvcGVuRGlhbG9nOiB0aGlzLm9wZW4sCiAgICAgIGxvYWRpbmc6ZmFsc2UsCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgcmV2ZW51ZVR5cGVPcHRpb25zOiBbXSwKICAgICAgc2V0dGxlTWFya09wdGlvbnM6IFtdLAogICAgICBwcm9qZWN0TGlzdDpbXSwKICAgICAgYmlsbERlcHRMaXN0OltdLC8v5byA5Y2V56eR5a6kCiAgICAgIGV4ZWNEZXB0TGlzdDpbXSwvL+aJp+ihjOenkeWupAogICAgICBjYXJlRGVwdExpc3Q6W10sLy/miqTnkIbljZXlhYMKCSAgICAvLyDooajljZXmoKHpqowKICAgICAgcnVsZXM6IHsKICAgICAgICByZXZlbnVlQ29kZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaUtuWFpemhueebruS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICByZXZlbnVlTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaUtuWFpemhueebruS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICByZWNlaXZlTnVtOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5bqU5pS26YeR6aKd5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIGFjdHVhbE51bTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuWunumZhemHkemineS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBiaWxsRGVwdDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuW8gOWNleenkeWupOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBleGVjRGVwdDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaJp+ihjOenkeWupOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBjYXJlRGVwdDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaKpOeQhuWNleWFg+S4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBiaWxsRG9jOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5byA5Y2V5Yy755Sf5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImJsdXIiIH0KICAgICAgICBdLAogICAgICAgIHJldmVudWVUeXBlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup5pS25YWl57G75YirIiwgdHJpZ2dlcjogWyJibHVyIiwiY2hhbmdlIl0gfQogICAgICAgIF0sCiAgICAgICAgc2V0dGxlTWFyazogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqee7k+eul+agh+ivhiIsIHRyaWdnZXI6IFsiYmx1ciIsImNoYW5nZSJdIH0KICAgICAgICBdLAogICAgICAgIG9jY3VyZVRpbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nlj5HnlJ/ml6XmnJ8iLCB0cmlnZ2VyOiBbImJsdXIiLCJjaGFuZ2UiXSB9CiAgICAgICAgXSwKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0RGljdHMoInBtc19zcmxiX3R5cGUiKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgdGhpcy5yZXZlbnVlVHlwZU9wdGlvbnMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmdldERpY3RzKCJwbXNfanNic190eXBlIikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHRoaXMuc2V0dGxlTWFya09wdGlvbnMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmdldFJldmVudWVMaXN0KCk7CiAgICB0aGlzLmdldERlcHRMaXN0KHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8uZGVwdElkKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVByb2plY3QocHJvamVjdENvZGUpIHsKICAgICAgbGV0IGZsYWcgPSBmYWxzZTsKICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLnByb2plY3RMaXN0KSB7CiAgICAgICAgaWYgKHRoaXMucHJvamVjdExpc3RbaV0ucmV2ZW51ZUNvZGUgPT0gcHJvamVjdENvZGUpIHsKICAgICAgICAgIGlmICh0aGlzLmZvcm0ucmV2ZW51ZVR5cGUgPT0gJzInKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3RMaXN0W2ldLmlucENhcmUgPT0gJzAnKSB7CiAgICAgICAgICAgICAgdGhpcy5mb3JtLmNhcmVEZXB0ID0gbnVsbDsKICAgICAgICAgICAgICB0aGlzLmRpc2FibGVDYXJlID0gdHJ1ZTsKICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHRoaXMucHJvamVjdExpc3RbaV0ub3V0cENhcmUgPT0gJzAnKSB7CiAgICAgICAgICAgICAgdGhpcy5mb3JtLmNhcmVEZXB0ID0gbnVsbDsKICAgICAgICAgICAgICB0aGlzLmRpc2FibGVDYXJlID0gdHJ1ZTsKICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZmxhZyA9PSBmYWxzZSkgewogICAgICAgIHRoaXMuZGlzYWJsZUNhcmUgPSBmYWxzZTsKICAgICAgICB0aGlzLnJ1bGVzLmNhcmVEZXB0ID0gIFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLmiqTnkIbljZXlhYPkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgIF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ydWxlcy5jYXJlRGVwdCA9ICBbCiAgICAgICAgXTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVJldmVudWVUeXBlKCkgewogICAgICB0aGlzLmNoYW5nZVByb2plY3QodGhpcy5mb3JtLnJldmVudWVDb2RlKTsKICAgIH0sCiAgCWdldERldGFpbEluZm8oKSB7CiAgICAgIHRoaXMubG9hZGluZz10cnVlCiAgICAgIGdldFJldmVudWVudW0odGhpcy5pZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIHRoaXMubG9hZGluZz1mYWxzZQogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5kaXNhYmxlQ2FyZSA9IGZhbHNlOwogICAgICAgIGxldCBmbGFnID0gZmFsc2U7CiAgICAgICAgdGhpcy5nZXRSZXZlbnVlTGlzdCgpOwogICAgICAgIGxpc3RSZXZlbnVlKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2U9PnsKICAgICAgICAgIHRoaXMucHJvamVjdExpc3Q9cmVzcG9uc2Uucm93cwogICAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLnByb2plY3RMaXN0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3RMaXN0W2ldLnJldmVudWVDb2RlID09IHRoaXMuZm9ybS5yZXZlbnVlQ29kZSkgewogICAgICAgICAgICAgIGlmICh0aGlzLmZvcm0ucmV2ZW51ZVR5cGUgPT0gJzInKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9qZWN0TGlzdFtpXS5pbnBDYXJlID09ICcwJykgewogICAgICAgICAgICAgICAgICB0aGlzLmZvcm0uY2FyZURlcHQgPSBudWxsOwogICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVDYXJlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb2plY3RMaXN0W2ldLm91dHBDYXJlID09ICcwJykgewogICAgICAgICAgICAgICAgICB0aGlzLmZvcm0uY2FyZURlcHQgPSBudWxsOwogICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVDYXJlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZmxhZyA9PSBmYWxzZSkgewogICAgICAgICAgICB0aGlzLmRpc2FibGVDYXJlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMucnVsZXMuY2FyZURlcHQgPSAgWwogICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLmiqTnkIbljZXlhYPkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiYmx1ciIgfQogICAgICAgICAgICBdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5ydWxlcy5jYXJlRGVwdCA9ICBbCiAgICAgICAgICAgIF07CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9LAogICAgLyoqIOafpeivouaUtuWFpeW9leWFpeWIl+ihqCAqLwogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYXJhbXMgPSB7fTsKICAgICAgaWYgKG51bGwgIT0gdGhpcy5kYXRlcmFuZ2VPY2N1cmVUaW1lICYmICcnICE9IHRoaXMuZGF0ZXJhbmdlT2NjdXJlVGltZSkgewogICAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFyYW1zWyJiZWdpbk9jY3VyZVRpbWUiXSA9IHRoaXMuZGF0ZXJhbmdlT2NjdXJlVGltZVswXTsKICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhcmFtc1siZW5kT2NjdXJlVGltZSJdID0gdGhpcy5kYXRlcmFuZ2VPY2N1cmVUaW1lWzFdOwogICAgICB9CiAgICAgIGxpc3RSZXZlbnVlbnVtKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMucmV2ZW51ZW51bUxpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5blvIDljZXnp5HlrqQKICAgIGdldERlcHRMaXN0KGRlcHRJZCl7CiAgICAgIGxldCBkYXRhPXtkZXB0SWQ6ZGVwdElkfQogICAgICB0cmVlUm9vbShkYXRhKS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgaWYocmVzcG9uc2UuY29kZT09MjAwKXsKICAgICAgICAgIHRoaXMuYmlsbERlcHRMaXN0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2Uucm93cykpCiAgICAgICAgICB0aGlzLmV4ZWNEZXB0TGlzdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLnJvd3MpKQogICAgICAgICAgdGhpcy5jYXJlRGVwdExpc3Q9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5yb3dzKSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLy/ojrflj5bmlLblhaXmoLjnrpfmlLblhaXpobnnm67liJfooagKICAgIGdldFJldmVudWVMaXN0KCl7CiAgICAgIGxpc3RSZXZlbnVlKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2U9PnsKICAgICAgICB0aGlzLnByb2plY3RMaXN0PXJlc3BvbnNlLnJvd3MKICAgICAgfSkKICAgIH0sCiAgICAvLyDmlLblhaXnsbvliKsoMemXqOiviu+8jDLkvY/pmaIp5a2X5YW457+76K+RCiAgICByZXZlbnVlVHlwZUZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5yZXZlbnVlVHlwZU9wdGlvbnMsIHJvdy5yZXZlbnVlVHlwZSk7CiAgICB9LAogICAgLy8g57uT566X5qCH6K+GKDHmlLbku5jlrp7njrDvvIwy6LSj5p2D5Y+R55SfKeWtl+WFuOe/u+ivkQogICAgc2V0dGxlTWFya0Zvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5zZXR0bGVNYXJrT3B0aW9ucywgcm93LnNldHRsZU1hcmspOwogICAgfSwKICAgIC8vIOW8ueahhuWFs+mXrQogICAgaGFuZGxlRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgIH0sCiAgICAvLyDlj5bmtogKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBjb21wQ29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQsCiAgICAgICAgYWNjb3VudENvZGU6IG51bGwsCiAgICAgICAgcmV2ZW51ZUNvZGU6IG51bGwsCiAgICAgICAgcmV2ZW51ZU5hbWU6bnVsbCwKICAgICAgICByZWNlaXZlTnVtOiBudWxsLAogICAgICAgIGFjdHVhbE51bTogbnVsbCwKICAgICAgICBiaWxsRGVwdDogbnVsbCwKICAgICAgICBleGVjRGVwdDogbnVsbCwKICAgICAgICBjYXJlRGVwdDogbnVsbCwKICAgICAgICBiaWxsRG9jOiBudWxsLAogICAgICAgIGV4ZWNEZXB0TmFtZTogbnVsbCwKICAgICAgICBjYXJlRGVwdE5hbWU6IG51bGwsCiAgICAgICAgYmlsbERvY05hbWU6IG51bGwsCiAgICAgICAgb2NjdXJlVGltZTogbnVsbCwKICAgICAgICByZXZlbnVlVHlwZTogJzEnLAogICAgICAgIHNldHRsZU1hcms6IG51bGwsCiAgICAgICAgcmV2ZW51ZUtpbmQ6IG51bGwsCiAgICAgICAgZGVsRmxhZzogbnVsbCwKICAgICAgICBjcmVhdGVCeTogbnVsbCwKICAgICAgICBjcmVhdGVUaW1lOiBudWxsLAogICAgICAgIHVwZGF0ZUJ5OiBudWxsLAogICAgICAgIHVwZGF0ZVRpbWU6IG51bGwsCiAgICAgICAgcmVtYXJrOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAogICAgaGFuZGxlQ2xpY2tPcmdQb3AoaWR4LHJvdyxkYXRhcyl7CiAgICAgIGxldCBkYXRhID0gWyJyZXZlbnVlQ29kZSIsInJldmVudWVOYW1lIiwicmV2ZW51ZVR5cGUiLCJtb25leSJdOwogICAgICBkYXRhLmZvckVhY2goa2V5ID0+IHsKICAgICAgICB0aGlzLiRzZXQocm93LCBrZXksIGRhdGFzW2tleV0pOwogICAgICB9KQogICAgfSwKICAgIC8qKiDmj5DkuqTmjInpkq4gKi8KICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgbGV0IHNhdmVMb2FkaW5nPXRoaXMuc2F2ZUxvYWRpbmcoKTsKICAgICAgICAgIGlmICh0aGlzLmZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgICAgICB1cGRhdGVSZXZlbnVlbnVtKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJzdWNjZXNzIiwgZmFsc2UpOwogICAgICAgICAgICAgIHNhdmVMb2FkaW5nLmNsb3NlKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRSZXZlbnVlbnVtKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJzdWNjZXNzIiwgZmFsc2UpOwogICAgICAgICAgICAgIHNhdmVMb2FkaW5nLmNsb3NlKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCn19Owo="},{"version":3,"sources":["addEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEdit.vue","sourceRoot":"src/views/revenue/revenuenum","sourcesContent":["<template>\n    <el-dialog :title=\"title\"  :visible.sync=\"openDialog\" width=\"40%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\">\n      <el-form ref=\"form\" v-loading=\"loading\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\n        <el-row >\n          <el-col :span=\"12\">\n            <el-form-item label=\"收入项目:\" prop=\"revenueCode\"   >\n              <el-select v-model=\"form.revenueCode\" filterable clearable placeholder=\"请选择收入项目\" @change=\"changeProject\">\n                <el-option\n                  v-for=\"dict in projectList\"\n                  :key=\"dict.revenueCode\"\n                  :label=\"dict.revenueName\"\n                  :value=\"dict.revenueCode\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"应收金额:\" prop=\"receiveNum\">\n              <el-input-number controls-position=\"right\" :min=\"0\" :precision=\"2\" v-model=\"form.receiveNum\"  placeholder=\"请输入应收金额\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"实际金额:\" prop=\"actualNum\">\n              <el-input-number controls-position=\"right\" :min=\"0\" :precision=\"2\" v-model=\"form.actualNum\"  placeholder=\"请输入实际金额\"/>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"开单科室:\" prop=\"billDept\">\n              <el-select v-model=\"form.billDept\" filterable placeholder=\"请选择开单科室\" clearable>\n                <el-option\n                  v-for=\"dict in billDeptList\"\n                  :key=\"dict.deptRoomId\"\n                  :label=\"dict.deptRoomName\"\n                  :value=\"dict.deptRoomId\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"执行科室:\" prop=\"execDept\">\n              <el-select v-model=\"form.execDept\" placeholder=\"请选择执行科室\" filterable clearable>\n                <el-option\n                  v-for=\"dict in execDeptList\"\n                  :key=\"dict.deptRoomId\"\n                  :label=\"dict.deptRoomName\"\n                  :value=\"dict.deptRoomId\"\n                />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"护理单元:\" prop=\"careDept\">\n              <el-select v-model=\"form.careDept\" placeholder=\"请选择护理单元\" filterable clearable :disabled=\"disableCare\">\n                <el-option\n                  v-for=\"dict in careDeptList\"\n                  :key=\"dict.deptRoomId\"\n                  :label=\"dict.deptRoomName\"\n                  :value=\"dict.deptRoomId\"\n                />\n                </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"开单医生:\" prop=\"billDoc\">\n              <el-input v-model=\"form.billDoc\" placeholder=\"请输入开单医生\"  maxlength=\"20\" show-word-limit  />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"收入类别:\" prop=\"revenueType\">\n              <el-select v-model=\"form.revenueType\" clearable placeholder=\"请输入收入类别\" @change=\"changeRevenueType\">\n              <el-option\n                v-for=\"dict in revenueTypeOptions\"\n                :key=\"dict.dictValue\"\n                :label=\"dict.dictLabel\"\n                :value=\"dict.dictValue\"\n              ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"结算标识:\" prop=\"settleMark\">\n            <el-select v-model=\"form.settleMark\" clearable placeholder=\"请选择结算标识\">\n              <el-option\n                v-for=\"dict in settleMarkOptions\"\n                :key=\"dict.dictValue\"\n                :label=\"dict.dictLabel\"\n                :value=\"dict.dictValue\"\n              ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"发生时间:\" prop=\"occureTime\">\n              <el-date-picker clearable\n                v-model=\"form.occureTime\"\n                type=\"date\"\n                value-format=\"yyyy-MM-dd\"\n                placeholder=\"选择发生时间\">\n              </el-date-picker>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注:\" prop=\"remark\">\n              <el-input v-model=\"form.remark\" type=\"textarea\" maxlength=\"100\" show-word-limit rows=\"4\" placeholder=\"请输入内容\" resize=\"none\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm\" >确 定</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n</template>\n\n<script>\nimport { validEmail } from'@/utils/validate'\nimport { listRevenuenum, getRevenuenum, delRevenuenum, addRevenuenum, updateRevenuenum, exportRevenuenum } from \"@/api/revenue/revenuenum\";\nimport {listRevenue} from \"@/api/revenue/revenue\";\nimport {treeRoom} from '@/api/until';\nimport revenuePop from \"@/views/components/revenuePop\";\nexport default {\n  name: \"addEdit\",\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: \"\"\n    },\n    queryParams:{\n      type:Object,\n      default:null\n    }\n  },\n  watch: {\n    id: {\n      handler(val) {\n        this.reset();\n        if (val) {\n          this.id = val;\n          this.title = \"收入录入管理-编辑\";\n          this.getDetailInfo();\n        } else {\n          this.id = \"\";\n          this.title = \"收入录入管理-新增\";\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val;\n      },\n      deep: true\n    }\n  },\n  components: {\n    revenuePop\n  },\n  data() {\n    return {\n      disableCare: false,\n      title: \"收入录入管理-新增\",\n      openDialog: this.open,\n      loading:false,\n      // 表单参数\n      form: {},\n      revenueTypeOptions: [],\n      settleMarkOptions: [],\n      projectList:[],\n      billDeptList:[],//开单科室\n      execDeptList:[],//执行科室\n      careDeptList:[],//护理单元\n\t    // 表单校验\n      rules: {\n        revenueCode: [\n          { required: true, message: \"收入项目不能为空\", trigger: \"blur\" }\n        ],\n        revenueName: [\n          { required: true, message: \"收入项目不能为空\", trigger: \"blur\" }\n        ],\n        receiveNum: [\n          { required: true, message: \"应收金额不能为空\", trigger: \"blur\" }\n        ],\n        actualNum: [\n          { required: true, message: \"实际金额不能为空\", trigger: \"blur\" }\n        ],\n        billDept: [\n          { required: true, message: \"开单科室不能为空\", trigger: \"blur\" }\n        ],\n        execDept: [\n          { required: true, message: \"执行科室不能为空\", trigger: \"blur\" }\n        ],\n        careDept: [\n          { required: true, message: \"护理单元不能为空\", trigger: \"blur\" }\n        ],\n        billDoc: [\n          { required: true, message: \"开单医生不能为空\", trigger: \"blur\" }\n        ],\n        revenueType: [\n          { required: true, message: \"请选择收入类别\", trigger: [\"blur\",\"change\"] }\n        ],\n        settleMark: [\n          { required: true, message: \"请选择结算标识\", trigger: [\"blur\",\"change\"] }\n        ],\n        occureTime: [\n          { required: true, message: \"请选择发生日期\", trigger: [\"blur\",\"change\"] }\n        ],\n      }\n    };\n  },\n  created() {\n    this.getList();\n    this.getDicts(\"pms_srlb_type\").then(response => {\n      this.revenueTypeOptions = response.data;\n    });\n    this.getDicts(\"pms_jsbs_type\").then(response => {\n      this.settleMarkOptions = response.data;\n    });\n    this.getRevenueList();\n    this.getDeptList(this.$store.state.user.userInfo.deptId);\n  },\n  methods: {\n    changeProject(projectCode) {\n      let flag = false;\n      for (let i in this.projectList) {\n        if (this.projectList[i].revenueCode == projectCode) {\n          if (this.form.revenueType == '2') {\n            if (this.projectList[i].inpCare == '0') {\n              this.form.careDept = null;\n              this.disableCare = true;\n              flag = true;\n            }\n          } else {\n            if (this.projectList[i].outpCare == '0') {\n              this.form.careDept = null;\n              this.disableCare = true;\n              flag = true;\n            }\n          }\n        }\n      }\n      if (flag == false) {\n        this.disableCare = false;\n        this.rules.careDept =  [\n          { required: true, message: \"护理单元不能为空\", trigger: \"blur\" }\n        ];\n      } else {\n        this.rules.careDept =  [\n        ];\n      }\n    },\n    changeRevenueType() {\n      this.changeProject(this.form.revenueCode);\n    },\n  \tgetDetailInfo() {\n      this.loading=true\n      getRevenuenum(this.id).then(response => {\n        console.log(response);\n        this.loading=false\n        this.form = response.data;\n        this.disableCare = false;\n        let flag = false;\n        this.getRevenueList();\n        listRevenue(this.queryParams).then(response=>{\n          this.projectList=response.rows\n          for (let i in this.projectList) {\n            if (this.projectList[i].revenueCode == this.form.revenueCode) {\n              if (this.form.revenueType == '2') {\n                if (this.projectList[i].inpCare == '0') {\n                  this.form.careDept = null;\n                  this.disableCare = true;\n                  flag = true;\n                }\n              } else {\n                if (this.projectList[i].outpCare == '0') {\n                  this.form.careDept = null;\n                  this.disableCare = true;\n                  flag = true;\n                }\n              }\n            }\n          }\n          if (flag == false) {\n            this.disableCare = false;\n            this.rules.careDept =  [\n              { required: true, message: \"护理单元不能为空\", trigger: \"blur\" }\n            ];\n          } else {\n            this.rules.careDept =  [\n            ];\n          }\n        })\n      });\n    },\n    /** 查询收入录入列表 */\n    getList() {\n      this.loading = true;\n      this.queryParams.params = {};\n      if (null != this.daterangeOccureTime && '' != this.daterangeOccureTime) {\n        this.queryParams.params[\"beginOccureTime\"] = this.daterangeOccureTime[0];\n        this.queryParams.params[\"endOccureTime\"] = this.daterangeOccureTime[1];\n      }\n      listRevenuenum(this.queryParams).then(response => {\n        this.revenuenumList = response.rows;\n        this.total = response.total;\n        this.loading = false;\n      });\n    },\n    //获取开单科室\n    getDeptList(deptId){\n      let data={deptId:deptId}\n      treeRoom(data).then(response=>{\n        if(response.code==200){\n          this.billDeptList=JSON.parse(JSON.stringify(response.rows))\n          this.execDeptList=JSON.parse(JSON.stringify(response.rows))\n          this.careDeptList=JSON.parse(JSON.stringify(response.rows))\n        }\n      })\n    },\n    //获取收入核算收入项目列表\n    getRevenueList(){\n      listRevenue(this.queryParams).then(response=>{\n        this.projectList=response.rows\n      })\n    },\n    // 收入类别(1门诊，2住院)字典翻译\n    revenueTypeFormat(row, column) {\n      return this.selectDictLabel(this.revenueTypeOptions, row.revenueType);\n    },\n    // 结算标识(1收付实现，2责权发生)字典翻译\n    settleMarkFormat(row, column) {\n      return this.selectDictLabel(this.settleMarkOptions, row.settleMark);\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit(\"cancel\", false);\n    },\n    // 取消\n    cancel() {\n      this.$emit(\"cancel\", false);\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        compCode: this.$store.state.user.userInfo.deptId,\n        accountCode: null,\n        revenueCode: null,\n        revenueName:null,\n        receiveNum: null,\n        actualNum: null,\n        billDept: null,\n        execDept: null,\n        careDept: null,\n        billDoc: null,\n        execDeptName: null,\n        careDeptName: null,\n        billDocName: null,\n        occureTime: null,\n        revenueType: '1',\n        settleMark: null,\n        revenueKind: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null\n      };\n      this.resetForm(\"form\");\n    },\n    handleClickOrgPop(idx,row,datas){\n      let data = [\"revenueCode\",\"revenueName\",\"revenueType\",\"money\"];\n      data.forEach(key => {\n        this.$set(row, key, datas[key]);\n      })\n    },\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n        let saveLoading=this.saveLoading();\n          if (this.form.id != null) {\n            updateRevenuenum(this.form).then(response => {\n              this.msgSuccess(\"修改成功\");\n              this.$emit(\"success\", false);\n              saveLoading.close()\n            });\n          } else {\n            addRevenuenum(this.form).then(response => {\n              this.msgSuccess(\"新增成功\");\n              this.$emit(\"success\", false);\n              saveLoading.close()\n            });\n          }\n        }\n      });\n    },\n}};\n</script>\n<style lang=\"scss\" scoped>\n  ::v-deep .el-dialog {\n    min-height: 20%;\n    overflow: hidden;\n    .el-dialog__body {\n      height: calc(100% - 100px);\n      overflow: auto;\n      .el-input--mini,.el-input-number--mini,.el-select--mini{\n        width: 100%;\n      }\n    }\n  }\n</style>\n"]}]}