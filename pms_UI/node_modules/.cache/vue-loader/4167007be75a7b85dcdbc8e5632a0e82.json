{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\formItemNew\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\formItemNew\\index.vue","mtime":1693362205100},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGN1cnJBY3Rpdml0eU5hbWUgfSBmcm9tICJAL2FwaS9wcm9jZXNzL21vZGVsIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJhZGRFZGl0IiwKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAgb3BlbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIG9wZW4yOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY29tbWVudDogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IHt9CiAgICB9LAogICAgdXNlck9wdGlvbnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IHt9CiAgICB9LAogICAgLy8g5L+d5a2Y5bm25o+Q5Lqk5pi+56S65by55qGG5LiL57qn5a6h5qC45Lq6CiAgICBzaG93RGlhbG9nOnsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDlhbbkvZnlrqHmoLjnirbmgIHmmL7npLrln7rmnKzkv6Hmga8KICAgIHNob3dCYXNlSW5mbzp7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93QmFzZUluZm9DYXJkOmZhbHNlLAogICAgICBkaWFsb2dPcGVuOnRoaXMuc2hvd0RpYWxvZywKICAgICAgb3BlbkRpYWxvZzogdGhpcy5vcGVuLAogICAgICBvcGVuRGlhbG9nMjogdGhpcy5vcGVuMiwKICAgICAgdXNlck9wdGlvbnMyOiB0aGlzLnVzZXJPcHRpb25zLAogICAgICBjdXJyQWN0aXZpdHk6IG51bGwsCiAgICAgIHByb2NsbnNJZDogbnVsbCwKICAgICAgYXNzaWduZWVSdWxlczogWwogICAgICAgIHsKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuS4i+iKgueCueWuoeaguOS6uuS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiBbImNoYW5nZSIsICJibHVyIl0KICAgICAgICB9CiAgICAgIF0KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgc2hvd0Jhc2VJbmZvOnsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLnNob3dCYXNlSW5mb0NhcmQgPSB2YWw7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTp0cnVlCiAgICB9LAogICAgc2hvd0RpYWxvZzp7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5kaWFsb2dPcGVuID0gdmFsOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6dHJ1ZQogICAgfSwKICAgIG9wZW46IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICBvcGVuMjogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMub3BlbkRpYWxvZzIgPSB2YWw7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0sCiAgICB1c2VyT3B0aW9uczogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMudXNlck9wdGlvbnMyID0gdmFsOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9LAogICAgImNvbW1lbnQucHJvY2VkdXJlSWQiOiB7CiAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5wcm9jbG5zSWQgPSB2YWw7CiAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogIAloYW5kbGVTdGFmZihyZXMpewogIAkJY29uc29sZS5sb2cocmVzKTsKICAJCXRoaXMuJGVtaXQoImZvcm1JdGVtIiwgcmVzKTsKICAJfSwKICAgIGdldExpc3QoKSB7CiAgICAgIGlmICh0aGlzLnByb2NsbnNJZCA9PSBudWxsIHx8IHRoaXMucHJvY2xuc0lkID09ICIiKSB7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICBwcm9jSW5zSWQ6IHRoaXMucHJvY2xuc0lkLAogICAgICAgICAgdXNlcklkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJJbmZvLnVzZXJJZCwKICAgICAgICB9OwogICAgICAgIGN1cnJBY3Rpdml0eU5hbWUoZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5jdXJyQWN0aXZpdHkgPSByZXNwb25zZS5kYXRhLmFjdGl2aXR5TmFtZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG9uQ2xvc2UoKXsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNob3dEaWFsb2cnLCBmYWxzZSkKICAgIH0sCiAgICBzdXJlU3RhZmZDbGljaygpewogICAgICB0aGlzLiRyZWZzLmZvcm1JdGVtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZih2YWxpZCl7CiAgICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJywgdGhpcy5jb21tZW50KTsKICAgICAgICAgIHRoaXMub25DbG9zZSgpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgbW91bnRlZCgpIHt9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/components/formItemNew","sourcesContent":["<template>\n<div>\n  <el-dialog\n    title=\"提示\"\n    :visible.sync=\"dialogOpen\"\n    v-if=\"dialogOpen\"\n    width=\"500px\"\n    :close-on-click-modal=\"false\"\n    custom-class=\"el-button--primary\"\n    append-to-body\n    :before-close=\"onClose\">\n    <ul>当前节点：{{currActivity}}</ul>\n    <el-row>\n      <el-form ref=\"formItem\" :model=\"comment\"  label-width=\"80px\">\n        <el-col :span=\"24\">\n          <el-form-item label=\"审核意见\" v-if=\"openDialog\" prop=\"comment\">\n            <el-input v-model=\"comment.comment\" type=\"textarea\" placeholder=\"请输入审核意见\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <staffSearch v-if=\"openDialog2\" label=\"下节点审核人\" :rules=\"assigneeRules\"  :staffParams.sync = \"comment\" formItemProp=\"assignee\"  inputProp=\"assigneepName\" :userInfoList = \"userOptions\"></staffSearch>\n        </el-col>\n      </el-form>\n    </el-row>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"onClose\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"sureStaffClick\">确 定</el-button>\n    </span>\n  </el-dialog>\n  <el-card  v-if=\"showBaseInfoCard\" class=\"mb20 mt10\">\n    <ul>当前节点：{{currActivity}}</ul>\n    <el-row>\n      <el-form ref=\"formItem\" :model=\"comment\"  label-width=\"80px\">\n        <el-col :span=\"24\">\n          <el-form-item label=\"审核意见\" v-if=\"openDialog\" prop=\"comment\">\n            <el-input v-model=\"comment.comment\" type=\"textarea\" placeholder=\"请输入审核意见\" />\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <staffSearch v-if=\"openDialog2\" label=\"下节点审核人\" :rules=\"assigneeRules\" @handleStaff=\"handleStaff\"  :staffParams.sync = \"comment\" formItemProp=\"assignee\"  inputProp=\"assigneepName\" :userInfoList = \"userOptions\"></staffSearch>\n        </el-col>\n      </el-form>\n    </el-row>\n  </el-card>\n</div>\n</template>\n<script>\nimport { currActivityName } from \"@/api/process/model\";\nexport default {\n  name: \"addEdit\",\n  components: {},\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    open2: {\n      type: Boolean,\n      default: false\n    },\n    comment: {\n      type: Object,\n      default: {}\n    },\n    userOptions: {\n      type: Array,\n      default: {}\n    },\n    // 保存并提交显示弹框下级审核人\n    showDialog:{\n      type: Boolean,\n      default: false\n    },\n    // 其余审核状态显示基本信息\n    showBaseInfo:{\n      type: Boolean,\n     default: false\n    }\n  },\n  data() {\n    return {\n      showBaseInfoCard:false,\n      dialogOpen:this.showDialog,\n      openDialog: this.open,\n      openDialog2: this.open2,\n      userOptions2: this.userOptions,\n      currActivity: null,\n      proclnsId: null,\n      assigneeRules: [\n        {\n          required: true,\n          message: \"下节点审核人不能为空\",\n          trigger: [\"change\", \"blur\"]\n        }\n      ]\n    };\n  },\n  watch: {\n    showBaseInfo:{\n      handler(val) {\n        this.showBaseInfoCard = val;\n      },\n      deep: true,\n      immediate:true\n    },\n    showDialog:{\n      handler(val) {\n        this.dialogOpen = val;\n      },\n      deep: true,\n      immediate:true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val;\n      },\n      deep: true\n    },\n    open2: {\n      handler(val) {\n        this.openDialog2 = val;\n      },\n      deep: true\n    },\n    userOptions: {\n      handler(val) {\n        this.userOptions2 = val;\n      },\n      deep: true\n    },\n    \"comment.procedureId\": {\n      handler(val) {\n        this.proclnsId = val;\n        this.getList();\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n  \thandleStaff(res){\n  \t\tconsole.log(res);\n  \t\tthis.$emit(\"formItem\", res);\n  \t},\n    getList() {\n      if (this.proclnsId == null || this.proclnsId == \"\") {\n      } else {\n        let data = {\n          procInsId: this.proclnsId,\n          userId: this.$store.state.user.userInfo.userId,\n        };\n        currActivityName(data).then(response => {\n          if (response.code == 200) {\n            this.currActivity = response.data.activityName;\n          } else {\n            this.msgError(response.msg);\n          }\n        });\n      }\n    },\n    onClose(){\n      this.$emit('update:showDialog', false)\n    },\n    sureStaffClick(){\n      this.$refs.formItem.validate(valid => {\n        if(valid){\n          this.$emit('success', this.comment);\n          this.onClose()\n        }\n      })\n    }\n  },\n  mounted() {}\n};\n</script>\n\n<style>\n</style>\n"]}]}