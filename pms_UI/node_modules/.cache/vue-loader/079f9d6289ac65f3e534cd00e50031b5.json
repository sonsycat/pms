{"remainingRequest":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\pms_UI\\src\\views\\apportionment\\dictionary\\addEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\pms_UI\\src\\views\\apportionment\\dictionary\\addEdit.vue","mtime":1693362204119},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxpc3REaWN0aW9uYXJ5LCBsaXN0RGljdGlvbmFyeXMsIGdldERpY3Rpb25hcnksIGFkZERpY3Rpb25hcnksIHVwZGF0ZURpY3Rpb25hcnkgfSBmcm9tICJAL2FwaS9hcHBvcnRpb25tZW50L2RpY3Rpb25hcnkiOwppbXBvcnQgeyBsaXN0RGF0YWJhc2UsIGdldERhdGFiYXNlLCBkZWxEYXRhYmFzZSwgYWRkRGF0YWJhc2UsIHVwZGF0ZURhdGFiYXNlLCBleHBvcnREYXRhYmFzZSB9IGZyb20gIkAvYXBpL2FwcG9ydGlvbm1lbnQvZGF0YWJhc2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZEVkaXQiLAogIHByb3BzOiB7CiAgICBvcGVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBpZDogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICB0aGlzLmlkID0gdmFsOwogICAgICAgICAgdGhpcy50aXRsZSA9ICLliIbmkYrmr5TkvovlrZflhbjnrqHnkIYt57yW6L6RIjsKICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsSW5mbygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmlkID0gIiI7CiAgICAgICAgICB0aGlzLmZvcm0ucmF0aW9UeXBlID0gJzInOwogICAgICAgICAgdGhpcy50aXRsZSA9ICLliIbmkYrmr5TkvovlrZflhbjnrqHnkIYt5paw5aKeIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIG9wZW46IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHlsZTp7Y29sb3I6ICdncmVlbicsdGV4dEFsaWduOiAncmlnaHQnLGZvbnRTaXplOiAnMThweCd9LAogICAgICB0aXRsZTogIuWIhuaRiuavlOS+i+Wtl+WFuOeuoeeQhi3mlrDlop4iLAogICAgICB0aXRsZTE6ICLliIbmkYrmr5TkvovlrZflhbjnrqHnkIYvIOa1i+ivlVNRTCIsCiAgICAgIG9wZW5EaWFsb2c6IHRoaXMub3BlbiwKICAgICAgb3BlbkRpYWxvZzE6IGZhbHNlLAogICAgICBvcGVuRGlhbG9nMjogZmFsc2UsCiAgICAgIGFjdGl2ZU5hbWUxOiAic3FsMUxpc3QiLAogICAgICBhY3RpdmVOYW1lMjogInNxbDRMaXN0IiwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHt9LAogICAgICByYXRpb1R5cGVPcHRpb25zOiBbXSwKICAgICAgY29vbmVjdE9wdGlvbnM6IFtdLAogICAgICBzcWwxTG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOS9v+eUqOenkeWupOaYjue7hgogICAgICBzcWwyTG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOi1hOS6p+aWh+ahowogICAgICBzcWwzTG9hZGluZzogZmFsc2UsCiAgICAgIHNxbDRMb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMzAsCiAgICAgICAgY29kZTogbnVsbCwKICAgICAgICBuYW1lOiBudWxsLAogICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgdXJsOiBudWxsLAogICAgICAgIHVzZXJOYW1lOiBudWxsLAogICAgICAgIHBhc3NXb3JkOiBudWxsLAogICAgICB9LAogICAgICAvLyDooajljZXmoKHpqowKICAgICAgcnVsZXM6IHsKICAgICAgICByYXRpb05hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLmr5TkvovlkI3np7DkuI3og73kuLrnqboiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9CiAgICAgICAgXSwKICAgICAgICBjb29uZWN0Q29kZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuaVsOaNrua6kOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdLAogICAgICAgIGNvdW50U3FsOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K6h566X6K6h5YWl5oiQ5pys5YiG5pGKU1FM5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImNoYW5nZSIgfQogICAgICAgIF0sCiAgICAgICAgZmlyc3RMZXZlbFNxbDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuS4gOe6p+WIhuaRilNRTOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdLAogICAgICAgIHNlY29uZExldmVsU3FsOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi5LqM57qn5YiG5pGKU1FM5LiN6IO95Li656m6IiwgdHJpZ2dlcjogImNoYW5nZSIgfQogICAgICAgIF0sCiAgICAgICAgdGhpcmRMZXZlbFNxbDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuS4iee6p+WIhuaRilNRTOS4jeiDveS4uuepuiIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0KICAgICAgICBdLAogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgdGhpcy5nZXREaWN0cygiY29zdF9zY2FsZV90eXBlIikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHRoaXMucmF0aW9UeXBlT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREZXRhaWxJbmZvKCkgewogICAgICBnZXREaWN0aW9uYXJ5KHRoaXMuaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGdldExpc3QoKSB7CiAgICAgIGxpc3REYXRhYmFzZSh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmNvb25lY3RPcHRpb25zID0gcmVzcG9uc2Uucm93czsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5q+U5L6L57G75Z6L5a2X5YW457+76K+RCiAgICByYXRpb1R5cGVGb3JtYXQocm93LCBjb2x1bW4pIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGljdExhYmVsKHRoaXMucmF0aW9UeXBlT3B0aW9ucywgcm93LnJhdGlvVHlwZSk7CiAgICB9LAogICAgLy8g5by55qGG5YWz6ZetCiAgICBoYW5kbGVEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgfSwKICAgIC8vIOWPlua2iAogICAgY2FuY2VsKCkgewogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiLCBmYWxzZSk7CiAgICB9LAogICAgY2FuY2VsMSgpIHsKICAgICAgdGhpcy5vcGVuRGlhbG9nMSA9IGZhbHNlOwogICAgfSwKICAgIGNhbmNlbDIoKSB7CiAgICAgIHRoaXMub3BlbkRpYWxvZzIgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2VUeXBlKHZhbCl7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOabtOaNouavlOS+i+exu+Wei++8jOWmguaenOabtOaNouexu+Wei1NRTOaVsOaNruWFqOmDqOa4heepuu+8gScsICLorablkYoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICB0aGlzLmZvcm0uZmlyc3RMZXZlbFNxbCA9IG51bGwsCiAgICAgICAgICB0aGlzLmZvcm0uc2Vjb25kTGV2ZWxTcWwgPSBudWxsLAogICAgICAgICAgdGhpcy5mb3JtLnRoaXJkTGV2ZWxTcWwgPSBudWxsLAogICAgICAgICAgdGhpcy5mb3JtLmNvdW50U3FsID0gbnVsbCwKICAgICAgICAgIHRoaXMuZm9ybS5jb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0MSA9IFtdLAogICAgICAgICAgdGhpcy5mb3JtLmNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3QyID0gW10sCiAgICAgICAgICB0aGlzLmZvcm0uY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDMgPSBbXSwKICAgICAgICAgIHRoaXMuZm9ybS5jb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0NCA9IFtdCiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgY29tcENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8uZGVwdElkLAogICAgICAgIGFjY291bnRDb2RlOiBudWxsLAogICAgICAgIHJhdGlvQ29kZTogbnVsbCwKICAgICAgICByYXRpb05hbWU6IG51bGwsCiAgICAgICAgcmF0aW9UeXBlOiAnMScsCiAgICAgICAgY291bnRTcWw6IG51bGwsCiAgICAgICAgZmlyc3RMZXZlbFNxbDogbnVsbCwKICAgICAgICBzZWNvbmRMZXZlbFNxbDogbnVsbCwKICAgICAgICB0aGlyZExldmVsU3FsOiBudWxsLAogICAgICAgIGNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3QxOiBbXSwKICAgICAgICBjb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0MjogW10sCiAgICAgICAgY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDM6IFtdLAogICAgICAgIGNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3Q0OiBbXSwKICAgICAgICBkZWxGbGFnOiBudWxsLAogICAgICAgIGNyZWF0ZUJ5OiBudWxsLAogICAgICAgIGNyZWF0ZVRpbWU6IG51bGwsCiAgICAgICAgdXBkYXRlQnk6IG51bGwsCiAgICAgICAgdXBkYXRlVGltZTogbnVsbCwKICAgICAgICByZW1hcms6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCiAgICAvKiogU1FM5rWL6K+VICovCiAgICBzdWJtaXRDcygpewogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgbGV0IHNhdmVMb2FkaW5nID0gdGhpcy5zYXZlTG9hZGluZygpOwogICAgICAgICAgbGV0IHJhdGlvVHlwZSA9IHRoaXMuZm9ybS5yYXRpb1R5cGU7CiAgICAgICAgICB0aGlzLmZvcm0uZXhjZXB0aW9uID0gbnVsbDsKICAgICAgICAgIGlmIChyYXRpb1R5cGUgPT0gIjEiKSB7CiAgICAgICAgICAgIGxpc3REaWN0aW9uYXJ5cyh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDEubGVuZ3RoID09MCB8fHJlc3BvbnNlLmRhdGEuY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDIubGVuZ3RoID09MCB8fHJlc3BvbnNlLmRhdGEuY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDMgPT0wKXsKICAgICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IoIuaVsOaNruW6k+i/nuaOpeW8guW4uOaIlnNxbOW8guW4uCEiKTsKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLmZvcm0uY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDEgPSByZXNwb25zZS5kYXRhLmNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3QxOwogICAgICAgICAgICAgIHRoaXMuZm9ybS5jb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0MiA9IHJlc3BvbnNlLmRhdGEuY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDI7CiAgICAgICAgICAgICAgdGhpcy5mb3JtLmNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3QzID0gcmVzcG9uc2UuZGF0YS5jb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0MzsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5leGNlcHRpb24pIHsKICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUgPSB7Y29sb3I6ICdyZWQnLHRleHRBbGlnbjogJ3JpZ2h0Jyxmb250U2l6ZTogJzE4cHgnfTsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5leGNlcHRpb24gPSAi5rWL6K+V5aSx6LSlOiAiICsgcmVzcG9uc2UuZGF0YS5leGNlcHRpb247CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5leGNlcHRpb24gPSAi5rWL6K+V5oiQ5YqfIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLm9wZW5EaWFsb2cxID0gdHJ1ZTsgLy8g5by55qGG54K55byAc3FsMQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmF0aW9UeXBlID09ICIyIikgewogICAgICAgICAgICBsaXN0RGljdGlvbmFyeXModGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3Q0Lmxlbmd0aCA9PTApewogICAgICAgICAgICAgICAgdGhpcy5tc2dFcnJvcigi5pWw5o2u5bqT6L+e5o6l5byC5bi45oiWc3Fs5byC5bi4ISIpOwogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuZm9ybS5jb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0NCA9IHJlc3BvbnNlLmRhdGEuY29zdEFwcG9ydGlvbm1lbnREaWN0aW9uYXJ5RGV0YWlsTGlzdDQ7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlID0ge2NvbG9yOiAncmVkJyx0ZXh0QWxpZ246ICdyaWdodCcsZm9udFNpemU6ICcxOHB4J307CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0uZXhjZXB0aW9uID0gIua1i+ivleWksei0pTogIiArIHJlc3BvbnNlLmRhdGEuZXhjZXB0aW9uOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0uZXhjZXB0aW9uID0gIua1i+ivleaIkOWKnyIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5vcGVuRGlhbG9nMiA9IHRydWU7IC8vIOW8ueahhueCueW8gAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtKHR5cGUpIHsKICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmKHRoaXMuZm9ybS5jb3N0QXBwb3J0aW9ubWVudERpY3Rpb25hcnlEZXRhaWxMaXN0MS5sZW5ndGggIT0gMHx8dGhpcy5mb3JtLmNvc3RBcHBvcnRpb25tZW50RGljdGlvbmFyeURldGFpbExpc3Q0Lmxlbmd0aCAhPSAwKXsKICAgICAgICAgICAgbGV0IHNhdmVMb2FkaW5nID0gdGhpcy5zYXZlTG9hZGluZygpOwogICAgICAgICAgICBpZiAodGhpcy5mb3JtLmV4Y2VwdGlvbiAhPSAn5rWL6K+V5oiQ5YqfJykgewogICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IoIlNRTOa1i+ivleWksei0pSIpOwogICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgICAgICAgIHVwZGF0ZURpY3Rpb25hcnkodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgICBpZiAoIXR5cGUpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gIuWIhuaRiuavlOS+i+Wtl+WFuOeuoeeQhi3mlrDlop4iOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNhdmVMb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYWRkRGljdGlvbmFyeSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLmlrDlop7miJDlip8iKTsKICAgICAgICAgICAgICAgIGlmICghdHlwZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJzdWNjZXNzIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHRoaXMubXNnRXJyb3IoIlNRTOa1i+ivleaVsOaNruS4jeiDveS4uuepuiIpOwogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9fTsK"},{"version":3,"sources":["addEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addEdit.vue","sourceRoot":"src/views/apportionment/dictionary","sourcesContent":["<template>\n  <div>\n    <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"50%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\">\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-row :gutter=\"24\">\n          <el-col :span=\"12\">\n            <el-form-item label=\"比例编码\" prop=\"ratioCode\">\n              <el-input v-model=\"form.ratioCode\" placeholder=\"系统自动生成\"  maxlength=\"50\" show-word-limit disabled />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"比例名称\" prop=\"ratioName\">\n              <el-input v-model=\"form.ratioName\" placeholder=\"请输入比例名称\"  maxlength=\"100\" show-word-limit  />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"比例类型\" prop=\"ratioType\">\n              <el-select v-model=\"form.ratioType\" placeholder=\"请选择比例类型\" class=\"w100\" @change=\"handleChangeType\" disabled>\n                <el-option\n                  v-for=\"dict in ratioTypeOptions\"\n                  :key=\"dict.dictValue\"\n                  :label=\"dict.dictLabel\"\n                  :value=\"dict.dictValue\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"数据源\" prop=\"coonectCode\">\n              <el-select v-model=\"form.coonectCode\" placeholder=\"请选择数据源\" class=\"w100\">\n                <el-option\n                  v-for=\"dict in coonectOptions\"\n                  :key=\"dict.code\"\n                  :label=\"dict.name\"\n                  :value=\"dict.code\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"计算计入成本分摊SQL\" prop=\"countSql\" v-if=\"form.ratioType == '2'\">\n              <el-input v-model=\"form.countSql\" type=\"textarea\" rows=\"4\" placeholder=\"请输入内容\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"一级分摊SQL\" prop=\"firstLevelSql\" v-if=\"form.ratioType == '1'\">\n              <el-input v-model=\"form.firstLevelSql\" type=\"textarea\" rows=\"4\" placeholder=\"请输入内容\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"二级分摊SQL\" prop=\"secondLevelSql\" v-if=\"form.ratioType == '1'\">\n              <el-input v-model=\"form.secondLevelSql\" type=\"textarea\" rows=\"4\" placeholder=\"请输入内容\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"三级分摊SQL\" prop=\"thirdLevelSql\" v-if=\"form.ratioType == '1'\">\n              <el-input v-model=\"form.thirdLevelSql\" type=\"textarea\" rows=\"4\" placeholder=\"请输入内容\" />\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"备注\" prop=\"remark\">\n              <el-input v-model=\"form.remark\" type=\"textarea\" rows=\"4\" placeholder=\"请输入内容\" />\n            </el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"success\" @click=\"submitCs\" class=\"dialog-footer\">SQL测试</el-button>\n        <el-button type=\"primary\" @click=\"submitForm(false)\">保存并新增</el-button>\n        <el-button type=\"primary\" @click=\"submitForm(true)\" >保  存</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog :title=\"title1\" class=\"dialog\" :visible.sync=\"openDialog2\" width=\"50%\" append-to-body :close-on-click-modal=\"false\"  custom-class=\"el-button--primary\"  @close=\"cancel2\">\n      <div>\n        <el-row>\n          <!-- 计算计入成本分摊方案 -->\n          <el-tabs v-model=\"activeName2\">\n            <el-tab-pane label=\"计算计入成本分摊方案\" name=\"sql4List\">\n              <el-form  ref=\"form\" :model=\"form\">\n                <el-table border class=\"mt20\" v-loading=\"sql4Loading\" :data=\"form.costApportionmentDictionaryDetailList4\" ref=\"cardListRef\" stripe>\n                  <el-table-column label=\"比例编码\" align=\"center\" prop=\"ratioCode\" show-overflow-tooltip/>\n                  <el-table-column label=\"科室编码\" align=\"center\" prop=\"deptCode\" show-overflow-tooltip/>\n                  <el-table-column label=\"科室名称\" align=\"left\" prop=\"deptName\" show-overflow-tooltip/>\n                  <el-table-column label=\"使用人数\" align=\"center\" prop=\"num\" show-overflow-tooltip/>\n                  <el-table-column label=\"使用占比\" align=\"center\" prop=\"useRatio\" show-overflow-tooltip/>\n                  <el-table-column label=\"年月\" align=\"center\" prop=\"ny\" show-overflow-tooltip/>\n                </el-table>\n              </el-form>\n            </el-tab-pane>\n          </el-tabs>\n        </el-row>\n        <el-row>\n          <el-col :span=\"24\">\n            <p :style=\"style\" class=\"\">{{form.exception}}</p>\n          </el-col>\n        </el-row>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancel2\" class=\"m20\">取 消</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { listDictionary, listDictionarys, getDictionary, addDictionary, updateDictionary } from \"@/api/apportionment/dictionary\";\n  import { listDatabase, getDatabase, delDatabase, addDatabase, updateDatabase, exportDatabase } from \"@/api/apportionment/database\";\n  export default {\n    name: \"addEdit\",\n    props: {\n      open: {\n        type: Boolean,\n        default: false\n      },\n      id: {\n        type: [String, Number],\n        default: \"\"\n      }\n    },\n    watch: {\n      id: {\n        handler(val) {\n          this.reset();\n          if (val) {\n            this.id = val;\n            this.title = \"分摊比例字典管理-编辑\";\n            this.getDetailInfo();\n          } else {\n            this.id = \"\";\n            this.form.ratioType = '2';\n            this.title = \"分摊比例字典管理-新增\";\n          }\n        },\n        deep: true,\n        immediate: true\n      },\n      open: {\n        handler(val) {\n          this.openDialog = val;\n        },\n        deep: true\n      }\n    },\n    components: {\n    },\n    data() {\n      return {\n        style:{color: 'green',textAlign: 'right',fontSize: '18px'},\n        title: \"分摊比例字典管理-新增\",\n        title1: \"分摊比例字典管理/ 测试SQL\",\n        openDialog: this.open,\n        openDialog1: false,\n        openDialog2: false,\n        activeName1: \"sql1List\",\n        activeName2: \"sql4List\",\n        // 表单参数\n        form: {},\n        ratioTypeOptions: [],\n        coonectOptions: [],\n        sql1Loading: false,\n        // 使用科室明细\n        sql2Loading: false,\n        // 资产文档\n        sql3Loading: false,\n        sql4Loading: false,\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 30,\n          code: null,\n          name: null,\n          type: null,\n          url: null,\n          userName: null,\n          passWord: null,\n        },\n        // 表单校验\n        rules: {\n          ratioName: [\n            { required: true, message: \"比例名称不能为空\", trigger: \"change\" }\n          ],\n          coonectCode: [\n            { required: true, message: \"数据源不能为空\", trigger: \"change\" }\n          ],\n          countSql: [\n            { required: true, message: \"计算计入成本分摊SQL不能为空\", trigger: \"change\" }\n          ],\n          firstLevelSql: [\n            { required: true, message: \"一级分摊SQL不能为空\", trigger: \"change\" }\n          ],\n          secondLevelSql: [\n            { required: true, message: \"二级分摊SQL不能为空\", trigger: \"change\" }\n          ],\n          thirdLevelSql: [\n            { required: true, message: \"三级分摊SQL不能为空\", trigger: \"change\" }\n          ],\n        }\n      };\n    },\n    created() {\n      this.getList();\n      this.getDicts(\"cost_scale_type\").then(response => {\n        this.ratioTypeOptions = response.data;\n      });\n\n    },\n    methods: {\n      getDetailInfo() {\n        getDictionary(this.id).then(response => {\n          this.form = response.data;\n        });\n      },\n      getList() {\n        listDatabase(this.queryParams).then(response => {\n          this.coonectOptions = response.rows;\n        });\n      },\n      // 比例类型字典翻译\n      ratioTypeFormat(row, column) {\n        return this.selectDictLabel(this.ratioTypeOptions, row.ratioType);\n      },\n      // 弹框关闭\n      handleDialogClose() {\n        this.$emit(\"cancel\", false);\n      },\n      // 取消\n      cancel() {\n        this.$emit(\"cancel\", false);\n      },\n      cancel1() {\n        this.openDialog1 = false;\n      },\n      cancel2() {\n        this.openDialog2 = false;\n      },\n      handleChangeType(val){\n        this.$confirm('是否确认更换比例类型，如果更换类型SQL数据全部清空！', \"警告\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }).then(() => {\n          this.form.firstLevelSql = null,\n            this.form.secondLevelSql = null,\n            this.form.thirdLevelSql = null,\n            this.form.countSql = null,\n            this.form.costApportionmentDictionaryDetailList1 = [],\n            this.form.costApportionmentDictionaryDetailList2 = [],\n            this.form.costApportionmentDictionaryDetailList3 = [],\n            this.form.costApportionmentDictionaryDetailList4 = []\n        }).catch(() => {});\n      },\n      // 表单重置\n      reset() {\n        this.form = {\n          id: null,\n          compCode: this.$store.state.user.userInfo.deptId,\n          accountCode: null,\n          ratioCode: null,\n          ratioName: null,\n          ratioType: '1',\n          countSql: null,\n          firstLevelSql: null,\n          secondLevelSql: null,\n          thirdLevelSql: null,\n          costApportionmentDictionaryDetailList1: [],\n          costApportionmentDictionaryDetailList2: [],\n          costApportionmentDictionaryDetailList3: [],\n          costApportionmentDictionaryDetailList4: [],\n          delFlag: null,\n          createBy: null,\n          createTime: null,\n          updateBy: null,\n          updateTime: null,\n          remark: null\n        };\n        this.resetForm(\"form\");\n      },\n      /** SQL测试 */\n      submitCs(){\n        this.$refs[\"form\"].validate(valid => {\n          if (valid) {\n            let saveLoading = this.saveLoading();\n            let ratioType = this.form.ratioType;\n            this.form.exception = null;\n            if (ratioType == \"1\") {\n              listDictionarys(this.form).then(response => {\n                if(response.data.costApportionmentDictionaryDetailList1.length ==0 ||response.data.costApportionmentDictionaryDetailList2.length ==0 ||response.data.costApportionmentDictionaryDetailList3 ==0){\n                  this.msgError(\"数据库连接异常或sql异常!\");\n                  return\n                }\n                this.form.costApportionmentDictionaryDetailList1 = response.data.costApportionmentDictionaryDetailList1;\n                this.form.costApportionmentDictionaryDetailList2 = response.data.costApportionmentDictionaryDetailList2;\n                this.form.costApportionmentDictionaryDetailList3 = response.data.costApportionmentDictionaryDetailList3;\n                if (response.data.exception) {\n                  this.style = {color: 'red',textAlign: 'right',fontSize: '18px'};\n                  this.form.exception = \"测试失败: \" + response.data.exception;\n                } else {\n                  this.form.exception = \"测试成功\"\n                }\n                this.openDialog1 = true; // 弹框点开sql1\n              });\n              saveLoading.close();\n            } else if (ratioType == \"2\") {\n              listDictionarys(this.form).then(response => {\n                if(response.data.costApportionmentDictionaryDetailList4.length ==0){\n                  this.msgError(\"数据库连接异常或sql异常!\");\n                  return\n                }\n                this.form.costApportionmentDictionaryDetailList4 = response.data.costApportionmentDictionaryDetailList4;\n                if (response.data.exception) {\n                  this.style = {color: 'red',textAlign: 'right',fontSize: '18px'};\n                  this.form.exception = \"测试失败: \" + response.data.exception;\n                } else {\n                  this.form.exception = \"测试成功\"\n                }\n                this.openDialog2 = true; // 弹框点开\n              });\n              saveLoading.close();\n            }\n          }\n        });\n      },\n\n      /** 提交按钮 */\n      submitForm(type) {\n        this.$refs[\"form\"].validate(valid => {\n          if (valid) {\n            if(this.form.costApportionmentDictionaryDetailList1.length != 0||this.form.costApportionmentDictionaryDetailList4.length != 0){\n              let saveLoading = this.saveLoading();\n              if (this.form.exception != '测试成功') {\n                this.msgError(\"SQL测试失败\");\n                return\n              }\n              if (this.form.id != null) {\n                updateDictionary(this.form).then(response => {\n                  this.msgSuccess(\"修改成功\");\n                  if (!type) {\n                    this.reset();\n                    this.title = \"分摊比例字典管理-新增\";\n                  } else {\n                    this.$emit(\"success\", false);\n                  }\n                  saveLoading.close();\n                });\n              } else {\n                addDictionary(this.form).then(response => {\n                  this.msgSuccess(\"新增成功\");\n                  if (!type) {\n                    this.reset();\n                  } else {\n                    this.$emit(\"success\", false);\n                  }\n                  saveLoading.close();\n                });\n              }\n            }else{\n              this.msgError(\"SQL测试数据不能为空\");\n              return\n            }\n          }\n        });\n      },\n    }};\n</script>\n<style lang=\"scss\" scoped>\n  ::v-deep .el-dialog {\n    min-height: 20%;\n    overflow: hidden;\n    .el-dialog__body {\n      height: calc(100% - 100px);\n      overflow: auto;\n    }\n  }\n</style>\n"]}]}