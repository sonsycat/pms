{"remainingRequest":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\tool\\formDesign\\formMaking\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\tool\\formDesign\\formMaking\\index.vue","mtime":1693362206000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBzYXZlRGVzaWduLGdldEZvcm0sZ2V0Rm9ybURlc2lnbiB9IGZyb20gJ0AvYXBpL3V0aWxzJwkNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICBmb3JtTmFtZTonJywNCiAgICAgICAgICBqc29uRGF0YTp7DQogICAgICAgICAgCWxpc3Q6W10sDQogICAgICAgICAgfSwNCiAgICAgICAgICBmb3JtRGVzaWduSWQ6IiIsDQogICAgICAgICAgDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXBvbmVudHM6e30sDQogICAgY3JlYXRlZCgpIHsNCiAgICAgICAgdGhpcy5mb3JtRGVzaWduSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5mb3JtRGVzaWduSWQNCiAgICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgIAlmb3JtRGVzaWduSWQ6dGhpcy5mb3JtRGVzaWduSWQNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmhhbmRsZUZvcm1SZWFkeSgpOw0KICAgICBnZXRGb3JtKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAJY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAJbGV0IGpzb25zID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhLmZvcm1Kc29uKQ0KICAgICAJY29uc29sZS5sb2coanNvbnMpOw0KICAgICAJdGhpcy5qc29uRGF0YSA9IGpzb25zDQogICAgIH0pDQogICAgfSwNCiAgICBtZXRob2RzOnsNCgkJLy8g5by55qGG5YWz6ZetDQoJCWhhbmRsZURpYWxvZ0Nsb3NlKCkgew0KCQkJdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOw0KCQl9LA0KICAgIAloYW5kbGVGb3JtUmVhZHkgKCkgew0KCSAgICAgICAgY29uc3QgZm9ybURlc2lnbklkID0gdGhpcy5mb3JtRGVzaWduSWQ7DQoJICAgICAgICBnZXRGb3JtRGVzaWduKGZvcm1EZXNpZ25JZCkudGhlbihyZXNwb25zZSA9PiB7DQoJICAgICAgICAJY29uc29sZS5sb2cocmVzcG9uc2UpDQoJICAgICAgICAgICAgY29uc3QgZm9ybUpzb24gPSByZXNwb25zZS5kYXRhLmZvcm1Kc29uOw0KCSAgICAgICAgICAgIGlmKGZvcm1Kc29uICE9IG51bGwgJiYgZm9ybUpzb24gIT0gJycpIHsNCgkgICAgICAgICAgICAgIHRoaXMuJHJlZnMubWFraW5nZm9ybS5zZXRKU09OKEpTT04ucGFyc2UoZm9ybUpzb24pKQ0KCSAgICAgICAgICAgIH0NCgkgICAgICAgIH0pOw0KCSAgICB9LA0KICAgICAgICBoYW5kbGVTdWJtaXQgKCkgew0KICAgICAgICAgICAgY29uc3QganNvbiA9IHRoaXMuJHJlZnMubWFraW5nZm9ybS5nZXRKU09OKCk7DQogICAgICAgICAgICBzYXZlRGVzaWduKHRoaXMuZm9ybURlc2lnbklkLCBqc29uLCB0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uZ2V0SHRtbCgpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgCQljb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgIAkJdGhpcy5tc2dTdWNjZXNzKCLkv53lrZjmiJDlip8iKTsNCiAgICAgICAgCQl0aGlzLmNsb3NlKCk7DQoJICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICBjbG9zZSgpIHsNCiAgICAgICAgCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxWaWV3JywgdGhpcy4kcm91dGUpDQogICAgICAgIAl0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6Jy90b29sL2Zvcm1EZXNpZ24nLCBxdWVyeTogeyB0OiBEYXRlLm5vdygpIH0gfSkNCiAgICAgIAl9LA0KICAgIH0sDQogICAgDQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"src/views/tool/formDesign/formMaking","sourcesContent":["<template>\r\n\t<div class=\"dynamicForm\">\r\n\t  <!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\r\n\t  <fm-making-form \r\n\t    ref=\"makingform\" \r\n\t    style=\"height:600px;display: block;\" \r\n\t    preview \r\n\t    generate-code \r\n    \tgenerate-json\r\n\t  >\r\n\t  <!-- 头部内容自定义，添加提交按钮 -->\r\n\t    <template slot=\"action\">\r\n\t        <el-button type=\"primary\" @click=\"handleSubmit\">保存</el-button>\r\n\t    </template>\r\n\t  </fm-making-form>\r\n\t  \r\n\t  \t<div class=\"list-wraper previewForm\">\r\n        \t<fm-generate-form \r\n            \t:data=\"jsonData\" \r\n            \tref=\"generateForm\">\r\n        \t</fm-generate-form>\r\n        \t<!--<el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>-->\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { saveDesign,getForm,getFormDesign } from '@/api/utils'\t\r\nexport default {\r\n    data(){\r\n        return{\r\n          formName:'',\r\n          jsonData:{\r\n          \tlist:[],\r\n          },\r\n          formDesignId:\"\",\r\n          \r\n        }\r\n    },\r\n    components:{},\r\n    created() {\r\n        this.formDesignId = this.$route.query.formDesignId\r\n        let data = {\r\n        \tformDesignId:this.formDesignId\r\n        }\r\n        this.handleFormReady();\r\n     getForm(data).then(response => {\r\n     \tconsole.log(response);\r\n     \tlet jsons = JSON.parse(response.data.formJson)\r\n     \tconsole.log(jsons);\r\n     \tthis.jsonData = jsons\r\n     })\r\n    },\r\n    methods:{\r\n\t\t// 弹框关闭\r\n\t\thandleDialogClose() {\r\n\t\t\tthis.$emit(\"cancel\", false);\r\n\t\t},\r\n    \thandleFormReady () {\r\n\t        const formDesignId = this.formDesignId;\r\n\t        getFormDesign(formDesignId).then(response => {\r\n\t        \tconsole.log(response)\r\n\t            const formJson = response.data.formJson;\r\n\t            if(formJson != null && formJson != '') {\r\n\t              this.$refs.makingform.setJSON(JSON.parse(formJson))\r\n\t            }\r\n\t        });\r\n\t    },\r\n        handleSubmit () {\r\n            const json = this.$refs.makingform.getJSON();\r\n            saveDesign(this.formDesignId, json, this.$refs.makingform.getHtml()).then(response => {\r\n        \t\tconsole.log(response);\r\n        \t\tthis.msgSuccess(\"保存成功\");\r\n        \t\tthis.close();\r\n\t        })\r\n        },\r\n        close() {\r\n        \tthis.$store.dispatch('tagsView/delView', this.$route)\r\n        \tthis.$router.push({ path:'/tool/formDesign', query: { t: Date.now() } })\r\n      \t},\r\n    },\r\n    \r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}