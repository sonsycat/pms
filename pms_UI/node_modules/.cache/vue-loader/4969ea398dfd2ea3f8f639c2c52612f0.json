{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\evaluate\\setdeptdetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\evaluate\\setdeptdetail\\index.vue","mtime":1682043108360},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbGlzdFNldGRlcHRkZXRhaWwsCiAgZ2V0U2V0ZGVwdGRldGFpbCwKICB1cGRhdGVTZXRkZXB0ZGV0YWlsLAogIGdldEJzY1Njb3JlQnlJZAp9IGZyb20gJ0AvYXBpL2V2YWx1YXRlL3NldGRlcHRkZXRhaWwnCmltcG9ydCB7IGdldENvbmZpZ0tleSB9IGZyb20gJ0AvYXBpL3N5c3RlbS9jb25maWcnCmltcG9ydCB7IHVwZGF0ZVNldGRlcHQgfSBmcm9tICdAL2FwaS9ldmFsdWF0ZS9zZXRkZXB0JwppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2V0ZGVwdGRldGFpbCIsCiAgY29tcG9uZW50czogewogIH0sCiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgaWQ6IHsKICAgICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgZGF0YXM6IHsKICAgICAgdHlwZTogW09iamVjdF0sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgaWQ6IHsKICAgICAgaGFuZGxlcih2YWwpIHsKICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICB0aGlzLmlkID0gdmFsOwogICAgICAgICAgdGhpcy50aXRsZSA9ICLljZXnp5HlrqTlpJrmjIfmoIfnrqHnkIYt56eR5a6k5oyH5qCH6K6+572uIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICAgZGVlcDogdHJ1ZSwKICAgICAgICBpbW1lZGlhdGU6IHRydWUKICAgICAgfSwKICAgICAgb3BlbjogewogICAgICAgIGhhbmRsZXIodmFsKSB7CiAgICAgICAgICB0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CiAgICAgICAgfSwKICAgICAgICBkZWVwOiB0cnVlCiAgICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDlr7zlh7rpga7nvanlsYIKICAgICAgZXhwb3J0TG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOaMh+agh+mbhuS4juenkeWupOeuoeeQhuaYjue7huihqOagvOaVsOaNrgogICAgICBzZXRkZXB0ZGV0YWlsTGlzdDogW10sCiAgICAgIHNlbGVjdGlvblJvdzogW10sCiAgICAgIG9wZW5EaWFsb2c6dGhpcy5vcGVuLAogICAgICAvLyDlvLnlh7rlsYLmoIfpopgKICAgICAgdGl0bGU6ICLljZXnp5HlrqTlpJrmjIfmoIfnrqHnkIYt56eR5a6k5oyH5qCH6K6+572uIiwKICAgICAgLy8g5p+l6K+i5Y+C5pWwCiAgICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgICAgcGFnZU51bTogMSwKICAgICAgICBwYWdlU2l6ZTogMzAsCiAgICAgICAgY29tcENvZGU6IG51bGwsCiAgICAgICAgYWNjb3VudENvZGU6IG51bGwsCiAgICAgICAgc2V0RGVwdENvZGU6IG51bGwsCiAgICAgICAgaW5kZXhDb2RlOiBudWxsLAogICAgICAgIGluZGV4TmFtZTogbnVsbCwKICAgICAgICByZWR1Y2U6IG51bGwsCiAgICAgICAgZGVkdWN0OiBudWxsLAogICAgICAgIGluY3JlYXNlOiBudWxsLAogICAgICAgIGV4dHJhOiBudWxsLAogICAgICAgIHVuaXQ6IG51bGwsCiAgICAgICAgdGFyZ2V0OiBudWxsLAogICAgICAgIGluZGV4U2NvcmU6IG51bGwsCiAgICAgICAgaXNIeXBlcjogbnVsbCwKICAgICAgICBpc05lZ2F0aXZlOiBudWxsLAogICAgICAgIGlzRml4ZWQ6IG51bGwsCiAgICAgICAgdGhyZXNob2xkOiBudWxsLAogICAgICAgIG92ZXJMaW1pdDogbnVsbCwKICAgICAgICBkZWR1Y3Rpb25MaW1pdDogbnVsbCwKICAgICAgICBub3dEYXRlOiBudWxsLAogICAgICB9LAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIC8vIOihqOWNleagoemqjAogICAgICBydWxlczogewogICAgICB9LAogICAgICBpc1VuaXRPcHRpb25zOltdLAogICAgICBpc0h5cGVyT3B0aW9uczpbXSwKICAgICAgaXNOZWdhdGl2ZU9wdGlvbnM6W10sCiAgICAgIGlzRml4ZWRPcHRpb25zOltdLAogICAgICBidG5Mb2FkaW5nOmZhbHNlLAogICAgICBic2NMaXN0Ont9LAogICAgICByb2xlQ29uZmlnOm51bGwsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QnNjU2NvcmVCeUlkKCk7CiAgICAvL+aYr+WQpuWtl+WFuOexu+WeiwogICAgdGhpcy5nZXREaWN0cygiaHJfaXNfY2hhbmdlIikudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHRoaXMuaXNVbml0T3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIHRoaXMuaXNIeXBlck9wdGlvbnMgPSByZXNwb25zZS5kYXRhOwogICAgICB0aGlzLmlzTmVnYXRpdmVPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgdGhpcy5pc0ZpeGVkT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICAgIHRoaXMuZ2V0Q29uZmlnS2V5KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiog5p+l6K+i57O757uf5Y+C5pWw77ya5piv5ZCm5YWB6K646LaF5YiGICovCiAgICBnZXRDb25maWdLZXkoKXsKICAgICAgZ2V0Q29uZmlnS2V5KCJleGNlZWRTY29yZUZsYWciKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnJvbGVDb25maWcgPSByZXNwb25zZS5tc2c7CiAgICAgIH0pCiAgICB9LAogICAgLyoqIOafpeivouivpeenkeWupOWvueW6lEJTQ+WIhuexu+WPiuaAu+WIhiAqLwogICAgZ2V0QnNjU2NvcmVCeUlkKCl7CiAgICAgIGdldEJzY1Njb3JlQnlJZCh0aGlzLmlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmJzY0xpc3QgPSByZXNwb25zZS5kYXRhCiAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgfSkKICAgIH0sCiAgICAvKiog5p+l6K+i5oyH5qCH6ZuG5LiO56eR5a6k566h55CG5piO57uG5YiX6KGoICovCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgcGFyYW1zPXsKICAgICAgICBjb21wQ29kZTp0aGlzLmRhdGFzLmNvbXBDb2RlLAogICAgICAgIHNldERlcHRDb2RlOnRoaXMuZGF0YXMuc2V0RGVwdENvZGUsCiAgICAgICAgbm93RGF0ZTp0aGlzLmRhdGFzLm5vd0RhdGUsCiAgICAgIH0KICAgICAgdGhpcy5zZXRkZXB0ZGV0YWlsTGlzdD1bXQogICAgICBsaXN0U2V0ZGVwdGRldGFpbChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmKHJlc3BvbnNlLmRhdGEubGVuZ3RoPT0wKXsKICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsSW5mbygpOwogICAgICAgIH1lbHNlewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgaXRlbS5yZWR1Y2U9aXRlbS5yZWR1Y2U/aXRlbS5yZWR1Y2U6MDsKICAgICAgICAgICAgaXRlbS5kZWR1Y3Q9aXRlbS5kZWR1Y3Q/aXRlbS5kZWR1Y3Q6MDsKICAgICAgICAgICAgaXRlbS5pbmNyZWFzZT1pdGVtLmluY3JlYXNlP2l0ZW0uaW5jcmVhc2U6MDsKICAgICAgICAgICAgaXRlbS5leHRyYT1pdGVtLmV4dHJhP2l0ZW0uZXh0cmE6MDsKICAgICAgICAgICAgaXRlbS51bml0PWl0ZW0udW5pdD9pdGVtLnVuaXQ6JzAnOwogICAgICAgICAgICBpdGVtLnRhcmdldD1pdGVtLnRhcmdldD9pdGVtLnRhcmdldDowOwogICAgICAgICAgICBpdGVtLmluZGV4U2NvcmU9aXRlbS5pbmRleFNjb3JlP2l0ZW0uaW5kZXhTY29yZTowOwogICAgICAgICAgICBpdGVtLmlzSHlwZXI9aXRlbS5pc0h5cGVyP2l0ZW0uaXNIeXBlcjonMSc7CiAgICAgICAgICAgIGl0ZW0uaXNOZWdhdGl2ZT1pdGVtLmlzTmVnYXRpdmU/aXRlbS5pc05lZ2F0aXZlOicxJzsKICAgICAgICAgICAgaXRlbS5pc0ZpeGVkPWl0ZW0uaXNGaXhlZD9pdGVtLmlzRml4ZWQ6JzEnOwogICAgICAgICAgICBpdGVtLnRocmVzaG9sZD1pdGVtLnRocmVzaG9sZD9pdGVtLnRocmVzaG9sZDowOwogICAgICAgICAgICBpdGVtLm92ZXJMaW1pdD1pdGVtLm92ZXJMaW1pdD9pdGVtLm92ZXJMaW1pdDowOwogICAgICAgICAgICBpdGVtLmRlZHVjdGlvbkxpbWl0PWl0ZW0uZGVkdWN0aW9uTGltaXQ/aXRlbS5kZWR1Y3Rpb25MaW1pdDowOwogICAgICAgICAgICBmb3IgKGxldCBic2MgaW4gdGhpcy5ic2NMaXN0KXsKICAgICAgICAgICAgICBpZiAoaXRlbS5ic2NPbmVDb2RlID09IHRoaXMuYnNjTGlzdFtic2NdLmJzY0NvZGUpewogICAgICAgICAgICAgICAgdGhpcy5zZXRkZXB0ZGV0YWlsTGlzdC5wdXNoKGl0ZW0pCiAgICAgICAgICAgICAgICB0aGlzLmJzY0xpc3RbYnNjXS5zZXRkZXB0ZGV0YWlsTGlzdCA9IHRoaXMuc2V0ZGVwdGRldGFpbExpc3QKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5zZXRkZXB0ZGV0YWlsTGlzdCA9IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBnZXREZXRhaWxJbmZvKCkgewogICAgICB0aGlzLmxvYWRpbmc9dHJ1ZTsKICAgICAgbGV0IHBhcmFtcz17CiAgICAgICAgY29tcENvZGU6dGhpcy5kYXRhcy5jb21wQ29kZSwKICAgICAgICBzZXRDb2RlOnRoaXMuZGF0YXMuc2V0Q29kZSwKICAgICAgfQogICAgICBnZXRTZXRkZXB0ZGV0YWlsKHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgIGl0ZW0ucmVkdWNlPWl0ZW0ucmVkdWNlP2l0ZW0ucmVkdWNlOjA7CiAgICAgICAgICBpdGVtLmRlZHVjdD1pdGVtLmRlZHVjdD9pdGVtLmRlZHVjdDowOwogICAgICAgICAgaXRlbS5pbmNyZWFzZT1pdGVtLmluY3JlYXNlP2l0ZW0uaW5jcmVhc2U6MDsKICAgICAgICAgIGl0ZW0uZXh0cmE9aXRlbS5leHRyYT9pdGVtLmV4dHJhOjA7CiAgICAgICAgICBpdGVtLnVuaXQ9aXRlbS51bml0P2l0ZW0udW5pdDonMCc7CiAgICAgICAgICBpdGVtLnRhcmdldD1pdGVtLnRhcmdldD9pdGVtLnRhcmdldDowOwogICAgICAgICAgaXRlbS5pbmRleFNjb3JlPWl0ZW0uaW5kZXhTY29yZT9pdGVtLmluZGV4U2NvcmU6MDsKICAgICAgICAgIGl0ZW0uaXNIeXBlcj1pdGVtLmlzSHlwZXI/aXRlbS5pc0h5cGVyOicxJzsKICAgICAgICAgIGl0ZW0uaXNOZWdhdGl2ZT1pdGVtLmlzTmVnYXRpdmU/aXRlbS5pc05lZ2F0aXZlOicxJzsKICAgICAgICAgIGl0ZW0uaXNGaXhlZD1pdGVtLmlzRml4ZWQ/aXRlbS5pc0ZpeGVkOicxJzsKICAgICAgICAgIGl0ZW0udGhyZXNob2xkPWl0ZW0udGhyZXNob2xkP2l0ZW0udGhyZXNob2xkOjA7CiAgICAgICAgICBpdGVtLm92ZXJMaW1pdD1pdGVtLm92ZXJMaW1pdD9pdGVtLm92ZXJMaW1pdDowOwogICAgICAgICAgaXRlbS5kZWR1Y3Rpb25MaW1pdD1pdGVtLmRlZHVjdGlvbkxpbWl0P2l0ZW0uZGVkdWN0aW9uTGltaXQ6MDsKICAgICAgICAgIGZvciAobGV0IGJzYyBpbiB0aGlzLmJzY0xpc3QpewogICAgICAgICAgICBpZiAoaXRlbS5ic2NPbmVDb2RlID09IHRoaXMuYnNjTGlzdFtic2NdLmJzY0NvZGUpewogICAgICAgICAgICAgIHRoaXMuc2V0ZGVwdGRldGFpbExpc3QucHVzaChpdGVtKQogICAgICAgICAgICAgIHRoaXMuYnNjTGlzdFtic2NdLnNldGRlcHRkZXRhaWxMaXN0ID0gdGhpcy5zZXRkZXB0ZGV0YWlsTGlzdAogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2V0ZGVwdGRldGFpbExpc3QgPSBbXQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgdGhpcy5sb2FkaW5nPWZhbHNlCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOihqOWNlemHjee9rgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBjb21wQ29kZTogbnVsbCwKICAgICAgICBhY2NvdW50Q29kZTogbnVsbCwKICAgICAgICBzZXREZXB0Q29kZTogbnVsbCwKICAgICAgICBpbmRleENvZGU6IG51bGwsCiAgICAgICAgaW5kZXhOYW1lOiBudWxsLAogICAgICAgIHJlZHVjZTogbnVsbCwKICAgICAgICBkZWR1Y3Q6IG51bGwsCiAgICAgICAgaW5jcmVhc2U6IG51bGwsCiAgICAgICAgZXh0cmE6IG51bGwsCiAgICAgICAgdW5pdDogbnVsbCwKICAgICAgICB0YXJnZXQ6IG51bGwsCiAgICAgICAgaW5kZXhTY29yZTogbnVsbCwKICAgICAgICBpc0h5cGVyOiBudWxsLAogICAgICAgIGlzTmVnYXRpdmU6IG51bGwsCiAgICAgICAgaXNGaXhlZDogbnVsbCwKICAgICAgICB0aHJlc2hvbGQ6IG51bGwsCiAgICAgICAgb3ZlckxpbWl0OiBudWxsLAogICAgICAgIGRlZHVjdGlvbkxpbWl0OiBudWxsLAogICAgICAgIG5vd0RhdGU6IG51bGwsCiAgICAgICAgZGVsRmxhZzogbnVsbCwKICAgICAgICBjcmVhdGVCeTogbnVsbCwKICAgICAgICBjcmVhdGVUaW1lOiBudWxsLAogICAgICAgIHVwZGF0ZUJ5OiBudWxsLAogICAgICAgIHVwZGF0ZVRpbWU6IG51bGwsCiAgICAgICAgcmVtYXJrOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAogICAgY2hhbmdlSW5kZXhTY29yZShyb3csaW5kZXgpewogICAgICBpZihyb3cuYnNjT25lQ29kZT09JzAwMDQnKXsKICAgICAgICB0aGlzLmZvdXJfc3VtR3JhZGU9MAogICAgICAgIHRoaXMuc2V0ZGVwdGRldGFpbExpc3QzLmZvckVhY2goaXRlbT0+ewogICAgICAgICAgdGhpcy5mb3VyX3N1bUdyYWRlKz1pdGVtLmluZGV4U2NvcmUgKiAxCiAgICAgICAgfSkKICAgICAgfWVsc2UgaWYocm93LmJzY09uZUNvZGU9PScwMDAzJyl7CiAgICAgICAgdGhpcy50aGlyZF9zdW1HcmFkZT0wCiAgICAgICAgdGhpcy5zZXRkZXB0ZGV0YWlsTGlzdDIuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICB0aGlzLnRoaXJkX3N1bUdyYWRlKz1pdGVtLmluZGV4U2NvcmUgKiAxCiAgICAgICAgfSkKICAgICAgfWVsc2UgaWYocm93LmJzY09uZUNvZGU9PScwMDAyJyl7CiAgICAgICAgdGhpcy5zZWNvbmRlX3N1bUdyYWRlPTAKICAgICAgICB0aGlzLnNldGRlcHRkZXRhaWxMaXN0MS5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgIHRoaXMuc2Vjb25kZV9zdW1HcmFkZSs9aXRlbS5pbmRleFNjb3JlICogMQogICAgICAgIH0pCiAgICAgIH1lbHNlIGlmKHJvdy5ic2NPbmVDb2RlPT0nMDAwMScpewogICAgICAgIHRoaXMuZmlyc3Rfc3VtR3JhZGU9MAogICAgICAgIHRoaXMuc2V0ZGVwdGRldGFpbExpc3QuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICB0aGlzLmZpcnN0X3N1bUdyYWRlKz1pdGVtLmluZGV4U2NvcmUgKiAxCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIC8vIOW8ueahhuWFs+mXrQogICAgaGFuZGxlRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgIH0sCiAgICAvLyDlj5bmtogKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgfSwKCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovCiAgICBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLmJ0bkxvYWRpbmcgPSB0cnVlOwogICAgICBsZXQgYXJyMSA9IFtdCiAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5ic2NMaXN0KSB7CiAgICAgICAgYXJyMS5wdXNoKC4uLnRoaXMuYnNjTGlzdFtpXS5zZXRkZXB0ZGV0YWlsTGlzdCkKICAgICAgfQogICAgICBsZXQgYXJyID0gYXJyMS5tYXAoaXRlbSA9PiB7CiAgICAgICAgaXRlbS5yZWR1Y2UgPSBpdGVtLnJlZHVjZSA/IGl0ZW0ucmVkdWNlICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS5kZWR1Y3QgPSBpdGVtLmRlZHVjdCA/IGl0ZW0uZGVkdWN0ICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS5pbmNyZWFzZSA9IGl0ZW0uaW5jcmVhc2UgPyBpdGVtLmluY3JlYXNlICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS5leHRyYSA9IGl0ZW0uZXh0cmEgPyBpdGVtLmV4dHJhICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS50YXJnZXQgPSBpdGVtLnRhcmdldCA/IGl0ZW0udGFyZ2V0ICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS5pbmRleFNjb3JlID0gaXRlbS5pbmRleFNjb3JlID8gaXRlbS5pbmRleFNjb3JlICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS50aHJlc2hvbGQgPSBpdGVtLnRocmVzaG9sZCA/IGl0ZW0udGhyZXNob2xkICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS5vdmVyTGltaXQgPSBpdGVtLm92ZXJMaW1pdCA/IGl0ZW0ub3ZlckxpbWl0ICsgJycgOiAnMCc7CiAgICAgICAgaXRlbS5kZWR1Y3Rpb25MaW1pdCA9IGl0ZW0uZGVkdWN0aW9uTGltaXQgPyBpdGVtLmRlZHVjdGlvbkxpbWl0ICsgJycgOiAnMCc7CiAgICAgICAgcmV0dXJuIGl0ZW0KICAgICAgfSk7CiAgICAgIC8vIOagoemqjOaMh+agh+WIhuWSjOaAu+WIhuWkp+Wwj+WFs+ezuwogICAgICBsZXQgdGFyZ2V0U3VtID0gMDsKICAgICAgZm9yIChsZXQgYiBpbiB0aGlzLmJzY0xpc3QpIHsKICAgICAgICBmb3IgKGxldCBhIGluIGFycikgewogICAgICAgICAgaWYgKGFyclthXS5ic2NPbmVDb2RlID09IHRoaXMuYnNjTGlzdFtiXS5ic2NDb2RlKSB7CiAgICAgICAgICAgIHRhcmdldFN1bSA9IHRhcmdldFN1bSArIChhcnJbYV0udGFyZ2V0IC0gMCkKICAgICAgICAgICAgYXJyW2FdLnN1bVNjb3JlID0gdGhpcy5ic2NMaXN0W2JdLnNjb3JlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnJvbGVDb25maWcgPT0gJzAnKSB7CiAgICAgICAgICBpZiAodGFyZ2V0U3VtID4gdGhpcy5ic2NMaXN0W2JdLnNjb3JlIHx8IHRhcmdldFN1bSAhPSB0aGlzLmJzY0xpc3RbYl0uc2NvcmUpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiN5YWB6K646LaF5YiG5oiW5ZCM57G75Z6L5LiL5oyH5qCH55uu5qCH5YC85ZKM5LiN562J5LqO5oC75YiG77yBIik7CiAgICAgICAgICAgIHRoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm9sZUNvbmZpZyA9PSAnMScpIHsKICAgICAgICAgIGlmICh0YXJnZXRTdW0gPCB0aGlzLmJzY0xpc3RbYl0uc2NvcmUpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5ZCM57G75Z6L5LiL5oyH5qCH55uu5qCH5YC85ZKM5bCP5LqO5oC75YiG77yBIik7CiAgICAgICAgICAgIHRoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm4KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGFyZ2V0U3VtID0gMDsKICAgICAgfQogICAgICBsZXQgcGFyYW1zID0gewogICAgICAgIHNldERlcHRDb2RlOiB0aGlzLmRhdGFzLnNldERlcHRDb2RlLAogICAgICAgIG5vd0RhdGU6IHRoaXMuZGF0YXMubm93RGF0ZSwKICAgICAgICBsaXN0UG1zOiBhcnIsCiAgICAgICAgY29tcENvZGU6IHRoaXMuZGF0YXMuY29tcENvZGUKICAgICAgfTsKICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLmJzY0xpc3QpewogICAgICAgIFZ1ZS5kZWxldGUodGhpcy5ic2NMaXN0W2ldLCJzZXRkZXB0ZGV0YWlsTGlzdCIpCiAgICAgIH0KICAgICAgbGV0IHBhcmFtc0JzYyA9IHsKICAgICAgICBpZDp0aGlzLmlkLAogICAgICAgIGNvbXBDb2RlOiB0aGlzLmRhdGFzLmNvbXBDb2RlLAogICAgICAgIGRlcHRDb2RlOiB0aGlzLmRhdGFzLmRlcHRDb2RlLAogICAgICAgIGludGVybmFsU2NvcmU6IEpTT04uc3RyaW5naWZ5KHRoaXMuYnNjTGlzdCkKICAgICAgfTsKICAgICAgbGV0IHNhdmVMb2FkaW5nID0gdGhpcy5zYXZlTG9hZGluZygpCiAgICAgIC8vIOS/neWtmOaAu+WIhgogICAgICB1cGRhdGVTZXRkZXB0KHBhcmFtc0JzYykudGhlbihyZXNwb25zZSA9PiB7fSk7CiAgICAgIC8vIOS/neWtmOaYjue7hgogICAgICB1cGRhdGVTZXRkZXB0ZGV0YWlsKHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5tc2dTdWNjZXNzKCLkv53lrZjmiJDlip8iKTsKICAgICAgICB0aGlzLiRlbWl0KCJzdWNjZXNzIiwgZmFsc2UpOwogICAgICAgIHRoaXMuYnRuTG9hZGluZyA9IGZhbHNlOwogICAgICAgIHNhdmVMb2FkaW5nLmNsb3NlKCkKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/evaluate/setdeptdetail","sourcesContent":["<template>\n  <div class=\"app-container\">\n\t  <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"80%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\">\n      <el-form ref=\"queryForm\" :model=\"datas\">\n        <el-row>\n          <el-col :span=\"24\">\n            <el-col :span=\"6\">\n              <el-form-item label=\"科室名称\" prop=\"deptName\">\n                <el-input\n                  v-model=\"datas.deptName\"\n                  placeholder=\"请输入科室名称\"\n                  disabled\n                />\n              </el-form-item>\n            </el-col>\n          </el-col>\n          <div class=\"table-box\">\n            <div class=\"table-box-body\" v-for=\"(item,index) in bscList\" :key=\"index\">\n              <el-col :span=\"4\">\n                <el-form-item :label=\"item.bscName + '-总分'\" :prop=\"item.bscCode\">\n                  <el-input-number\n                    v-model=\"item.score\"\n                    placeholder=\"总分\"\n                    :precision=\"2\" controls-position=\"right\"\n                  />\n                </el-form-item>\n              </el-col>\n              <el-table border stripe v-loading=\"loading\" :data=\"item.setdeptdetailList\" height=\"88%\">\n                <el-table-column min-width=\"140px\" sortable label=\"指标名称\" align=\"center\" prop=\"indexName\" show-overflow-tooltip />\n                <el-table-column min-width=\"140px\" sortable label=\"降低量\" align=\"center\" prop=\"reduce\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"0\" :max=\"100\" v-model=\"scope.row.reduce\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"扣分\" align=\"center\" prop=\"deduct\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :max=\"0\" v-model=\"scope.row.deduct\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"增加量\" align=\"center\" prop=\"increase\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"0\" v-model=\"scope.row.increase\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"加分\" align=\"center\" prop=\"extra\" >\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"0\" v-model=\"scope.row.extra\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"120px\" sortable label=\"单位(%)\" align=\"center\" prop=\"unit\">\n                  <template slot-scope=\"scope\">\n                    <el-select v-model=\"scope.row.unit\" filterable clearable placeholder=\"请选择\" >\n                      <el-option\n                        v-for=\"dict in isUnitOptions\"\n                        :key=\"dict.dictValue\"\n                        :label=\"dict.dictLabel\"\n                        :value=\"dict.dictValue\"\n                      ></el-option>\n                    </el-select>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"目标值\" align=\"center\" prop=\"target\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" v-model=\"scope.row.target\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"指标分数\" align=\"center\" prop=\"indexScore\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"0\" v-model=\"scope.row.indexScore\" class=\"w100\" @change=\"changeIndexScore(scope.row,scope.$index)\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"120px\" sortable label=\"允许超分\" align=\"center\" prop=\"isHyper\">\n                  <template slot-scope=\"scope\">\n                    <el-select v-model=\"scope.row.isHyper\" filterable clearable placeholder=\"请选择\" >\n                      <el-option\n                        v-for=\"dict in isHyperOptions\"\n                        :key=\"dict.dictValue\"\n                        :label=\"dict.dictLabel\"\n                        :value=\"dict.dictValue\"\n                      ></el-option>\n                    </el-select>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"120px\" sortable label=\"允许负分\" align=\"center\" prop=\"isNegative\">\n                  <template slot-scope=\"scope\">\n                    <el-select v-model=\"scope.row.isNegative\" filterable clearable placeholder=\"请选择\" >\n                      <el-option\n                        v-for=\"dict in isNegativeOptions\"\n                        :key=\"dict.dictValue\"\n                        :label=\"dict.dictLabel\"\n                        :value=\"dict.dictValue\"\n                      ></el-option>\n                    </el-select>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"120px\" sortable label=\"固定分值\" align=\"center\" prop=\"isFixed\">\n                  <template slot-scope=\"scope\">\n                    <el-select v-model=\"scope.row.isFixed\" filterable clearable placeholder=\"请选择\" >\n                      <el-option\n                        v-for=\"dict in isFixedOptions\"\n                        :key=\"dict.dictValue\"\n                        :label=\"dict.dictLabel\"\n                        :value=\"dict.dictValue\"\n                      ></el-option>\n                    </el-select>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"阀值\" align=\"center\" prop=\"threshold\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"1\" v-model=\"scope.row.threshold\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"超分限制\" align=\"center\" prop=\"overLimit\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"0\" :max=\"100\" v-model=\"scope.row.overLimit\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n                <el-table-column min-width=\"140px\" sortable label=\"减分限制\" align=\"center\" prop=\"deductionLimit\">\n                  <template slot-scope=\"scope\">\n                    <el-input-number :precision=\"2\" controls-position=\"right\" :min=\"0\" :max=\"100\" v-model=\"scope.row.deductionLimit\" class=\"w100\"></el-input-number>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </div>\n          </div>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button type=\"primary\" @click=\"submitForm\" :loading=\"btnLoading\">保 存</el-button>\n            <el-button @click=\"cancel\">取 消</el-button>\n          </div>\n\t  </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {\n  listSetdeptdetail,\n  getSetdeptdetail,\n  updateSetdeptdetail,\n  getBscScoreById\n} from '@/api/evaluate/setdeptdetail'\nimport { getConfigKey } from '@/api/system/config'\nimport { updateSetdept } from '@/api/evaluate/setdept'\nimport Vue from 'vue'\n\nexport default {\n  name: \"Setdeptdetail\",\n  components: {\n  },\n  props: {\n    open: {\n        type: Boolean,\n        default: false\n    },\n    id: {\n        type: [String, Number],\n        default: \"\"\n    },\n    datas: {\n      type: [Object],\n      default: null\n    },\n  },\n  watch: {\n    id: {\n      handler(val) {\n          this.reset();\n        if (val) {\n          this.id = val;\n          this.title = \"单科室多指标管理-科室指标设置\";\n        }\n      },\n        deep: true,\n        immediate: true\n      },\n      open: {\n        handler(val) {\n          this.openDialog = val;\n        },\n        deep: true\n      },\n  },\n  data() {\n    return {\n      // 遮罩层\n      loading: false,\n      // 导出遮罩层\n      exportLoading: false,\n      // 选中数组\n      ids: [],\n      // 非单个禁用\n      single: true,\n      // 非多个禁用\n      multiple: true,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 指标集与科室管理明细表格数据\n      setdeptdetailList: [],\n      selectionRow: [],\n      openDialog:this.open,\n      // 弹出层标题\n      title: \"单科室多指标管理-科室指标设置\",\n      // 查询参数\n      queryParams: {\n        pageNum: 1,\n        pageSize: 30,\n        compCode: null,\n        accountCode: null,\n        setDeptCode: null,\n        indexCode: null,\n        indexName: null,\n        reduce: null,\n        deduct: null,\n        increase: null,\n        extra: null,\n        unit: null,\n        target: null,\n        indexScore: null,\n        isHyper: null,\n        isNegative: null,\n        isFixed: null,\n        threshold: null,\n        overLimit: null,\n        deductionLimit: null,\n        nowDate: null,\n      },\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n      },\n      isUnitOptions:[],\n      isHyperOptions:[],\n      isNegativeOptions:[],\n      isFixedOptions:[],\n      btnLoading:false,\n      bscList:{},\n      roleConfig:null,\n    };\n  },\n  created() {\n    this.getBscScoreById();\n    //是否字典类型\n    this.getDicts(\"hr_is_change\").then(response => {\n      this.isUnitOptions = response.data;\n      this.isHyperOptions = response.data;\n      this.isNegativeOptions = response.data;\n      this.isFixedOptions = response.data;\n    });\n    this.getConfigKey();\n  },\n  methods: {\n    /** 查询系统参数：是否允许超分 */\n    getConfigKey(){\n      getConfigKey(\"exceedScoreFlag\").then(response => {\n        this.roleConfig = response.msg;\n      })\n    },\n    /** 查询该科室对应BSC分类及总分 */\n    getBscScoreById(){\n      getBscScoreById(this.id).then(response => {\n        this.bscList = response.data\n        this.getList()\n      })\n    },\n    /** 查询指标集与科室管理明细列表 */\n    getList() {\n      this.loading = true;\n      let params={\n        compCode:this.datas.compCode,\n        setDeptCode:this.datas.setDeptCode,\n        nowDate:this.datas.nowDate,\n      }\n      this.setdeptdetailList=[]\n      listSetdeptdetail(params).then(response => {\n        this.loading = false;\n        if(response.data.length==0){\n          this.getDetailInfo();\n        }else{\n          response.data.forEach(item=>{\n            item.reduce=item.reduce?item.reduce:0;\n            item.deduct=item.deduct?item.deduct:0;\n            item.increase=item.increase?item.increase:0;\n            item.extra=item.extra?item.extra:0;\n            item.unit=item.unit?item.unit:'0';\n            item.target=item.target?item.target:0;\n            item.indexScore=item.indexScore?item.indexScore:0;\n            item.isHyper=item.isHyper?item.isHyper:'1';\n            item.isNegative=item.isNegative?item.isNegative:'1';\n            item.isFixed=item.isFixed?item.isFixed:'1';\n            item.threshold=item.threshold?item.threshold:0;\n            item.overLimit=item.overLimit?item.overLimit:0;\n            item.deductionLimit=item.deductionLimit?item.deductionLimit:0;\n            for (let bsc in this.bscList){\n              if (item.bscOneCode == this.bscList[bsc].bscCode){\n                this.setdeptdetailList.push(item)\n                this.bscList[bsc].setdeptdetailList = this.setdeptdetailList\n              }\n              this.setdeptdetailList = []\n            }\n          })\n        }\n      });\n    },\n    getDetailInfo() {\n      this.loading=true;\n      let params={\n        compCode:this.datas.compCode,\n        setCode:this.datas.setCode,\n      }\n      getSetdeptdetail(params).then(response => {\n        response.data.forEach(item=>{\n          item.reduce=item.reduce?item.reduce:0;\n          item.deduct=item.deduct?item.deduct:0;\n          item.increase=item.increase?item.increase:0;\n          item.extra=item.extra?item.extra:0;\n          item.unit=item.unit?item.unit:'0';\n          item.target=item.target?item.target:0;\n          item.indexScore=item.indexScore?item.indexScore:0;\n          item.isHyper=item.isHyper?item.isHyper:'1';\n          item.isNegative=item.isNegative?item.isNegative:'1';\n          item.isFixed=item.isFixed?item.isFixed:'1';\n          item.threshold=item.threshold?item.threshold:0;\n          item.overLimit=item.overLimit?item.overLimit:0;\n          item.deductionLimit=item.deductionLimit?item.deductionLimit:0;\n          for (let bsc in this.bscList){\n            if (item.bscOneCode == this.bscList[bsc].bscCode){\n              this.setdeptdetailList.push(item)\n              this.bscList[bsc].setdeptdetailList = this.setdeptdetailList\n            }\n            this.setdeptdetailList = []\n          }\n        })\n        this.loading=false\n      });\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        compCode: null,\n        accountCode: null,\n        setDeptCode: null,\n        indexCode: null,\n        indexName: null,\n        reduce: null,\n        deduct: null,\n        increase: null,\n        extra: null,\n        unit: null,\n        target: null,\n        indexScore: null,\n        isHyper: null,\n        isNegative: null,\n        isFixed: null,\n        threshold: null,\n        overLimit: null,\n        deductionLimit: null,\n        nowDate: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null\n      };\n      this.resetForm(\"form\");\n    },\n    changeIndexScore(row,index){\n      if(row.bscOneCode=='0004'){\n        this.four_sumGrade=0\n        this.setdeptdetailList3.forEach(item=>{\n          this.four_sumGrade+=item.indexScore * 1\n        })\n      }else if(row.bscOneCode=='0003'){\n        this.third_sumGrade=0\n        this.setdeptdetailList2.forEach(item=>{\n          this.third_sumGrade+=item.indexScore * 1\n        })\n      }else if(row.bscOneCode=='0002'){\n        this.seconde_sumGrade=0\n        this.setdeptdetailList1.forEach(item=>{\n          this.seconde_sumGrade+=item.indexScore * 1\n        })\n      }else if(row.bscOneCode=='0001'){\n        this.first_sumGrade=0\n        this.setdeptdetailList.forEach(item=>{\n          this.first_sumGrade+=item.indexScore * 1\n        })\n      }\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit(\"cancel\", false);\n    },\n    // 取消\n    cancel() {\n      this.$emit(\"cancel\", false);\n    },\n\n    /** 提交按钮 */\n    submitForm() {\n      this.btnLoading = true;\n      let arr1 = []\n      for (let i in this.bscList) {\n        arr1.push(...this.bscList[i].setdeptdetailList)\n      }\n      let arr = arr1.map(item => {\n        item.reduce = item.reduce ? item.reduce + '' : '0';\n        item.deduct = item.deduct ? item.deduct + '' : '0';\n        item.increase = item.increase ? item.increase + '' : '0';\n        item.extra = item.extra ? item.extra + '' : '0';\n        item.target = item.target ? item.target + '' : '0';\n        item.indexScore = item.indexScore ? item.indexScore + '' : '0';\n        item.threshold = item.threshold ? item.threshold + '' : '0';\n        item.overLimit = item.overLimit ? item.overLimit + '' : '0';\n        item.deductionLimit = item.deductionLimit ? item.deductionLimit + '' : '0';\n        return item\n      });\n      // 校验指标分和总分大小关系\n      let targetSum = 0;\n      for (let b in this.bscList) {\n        for (let a in arr) {\n          if (arr[a].bscOneCode == this.bscList[b].bscCode) {\n            targetSum = targetSum + (arr[a].target - 0)\n            arr[a].sumScore = this.bscList[b].score\n          }\n        }\n        if (this.roleConfig == '0') {\n          if (targetSum > this.bscList[b].score || targetSum != this.bscList[b].score) {\n            this.$message.error(\"不允许超分或同类型下指标目标值和不等于总分！\");\n            this.btnLoading = false;\n            return\n          }\n        } else if (this.roleConfig == '1') {\n          if (targetSum < this.bscList[b].score) {\n            this.$message.error(\"同类型下指标目标值和小于总分！\");\n            this.btnLoading = false;\n            return\n          }\n        }\n        targetSum = 0;\n      }\n      let params = {\n        setDeptCode: this.datas.setDeptCode,\n        nowDate: this.datas.nowDate,\n        listPms: arr,\n        compCode: this.datas.compCode\n      };\n      for (let i in this.bscList){\n        Vue.delete(this.bscList[i],\"setdeptdetailList\")\n      }\n      let paramsBsc = {\n        id:this.id,\n        compCode: this.datas.compCode,\n        deptCode: this.datas.deptCode,\n        internalScore: JSON.stringify(this.bscList)\n      };\n      let saveLoading = this.saveLoading()\n      // 保存总分\n      updateSetdept(paramsBsc).then(response => {});\n      // 保存明细\n      updateSetdeptdetail(params).then(response => {\n        this.msgSuccess(\"保存成功\");\n        this.$emit(\"success\", false);\n        this.btnLoading = false;\n        saveLoading.close()\n      });\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n::v-deep .el-dialog {\n    height: 80%;\n    overflow: hidden;\n    .el-dialog__body {\n      height: calc(100% - 100px);\n      overflow: hidden;\n      .table-box{\n        height:540px;\n        overflow: auto;\n        margin-top: 46px;\n        &::-webkit-scrollbar {\n          width: 8px;\n          height: 8px\n        }\n        &::-webkit-scrollbar-thumb  {\n          background-color: #cccccc;\n          border-radius: 8px;\n        }\n        .table-box-body{\n          height: 400px;\n          padding-top: 16px;\n          border: 1px solid #cccccc\n        }\n      }\n    }\n  }\n\n</style>\n\n"]}]}