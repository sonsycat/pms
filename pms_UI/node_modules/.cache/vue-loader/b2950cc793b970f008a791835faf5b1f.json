{"remainingRequest":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\components\\ImageUpload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\components\\ImageUpload\\index.vue","mtime":1693362203000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgICB1cGxvYWRJbWdVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL2NvbW1vbi91cGxvYWQiLCAvLyDkuIrkvKDnmoTlm77niYfmnI3liqHlmajlnLDlnYANCiAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgZ2V0VG9rZW4oKSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICB2YWx1ZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIiIsDQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlbW92ZUltYWdlKCkgew0KICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCAiIik7DQogICAgfSwNCiAgICBoYW5kbGVVcGxvYWRTdWNjZXNzKHJlcykgew0KICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCByZXMudXJsKTsNCiAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpOw0KICAgIH0sDQogICAgaGFuZGxlQmVmb3JlVXBsb2FkKCkgew0KICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7DQogICAgICAgIGxvY2s6IHRydWUsDQogICAgICAgIHRleHQ6ICLkuIrkvKDkuK0iLA0KICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgwLCAwLCAwLCAwLjcpIiwNCiAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlVXBsb2FkRXJyb3IoKSB7DQogICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgbWVzc2FnZTogIuS4iuS8oOWksei0pSIsDQogICAgICB9KTsNCiAgICAgIHRoaXMubG9hZGluZy5jbG9zZSgpOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7fSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ImageUpload","sourcesContent":["<template>\r\n  <div class=\"component-upload-image\">\r\n    <el-upload\r\n      :action=\"uploadImgUrl\"\r\n      list-type=\"picture-card\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :before-upload=\"handleBeforeUpload\"\r\n      :on-error=\"handleUploadError\"\r\n      name=\"file\"\r\n      :show-file-list=\"false\"\r\n      :headers=\"headers\"\r\n      style=\"display: inline-block; vertical-align: top\"\r\n    >\r\n      <el-image v-if=\"!value\" :src=\"value\">\r\n        <div slot=\"error\" class=\"image-slot\">\r\n          <i class=\"el-icon-plus\" />\r\n        </div>\r\n      </el-image>\r\n      <div v-else class=\"image\">\r\n        <el-image :src=\"value\" :style=\"`width:150px;height:150px;`\" fit=\"fill\"/>\r\n        <div class=\"mask\">\r\n          <div class=\"actions\">\r\n            <span title=\"预览\" @click.stop=\"dialogVisible = true\">\r\n              <i class=\"el-icon-zoom-in\" />\r\n            </span>\r\n            <span title=\"移除\" @click.stop=\"removeImage\">\r\n              <i class=\"el-icon-delete\" />\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\" title=\"预览\" width=\"800\" append-to-body>\r\n      <img :src=\"value\" style=\"display: block; max-width: 100%; margin: 0 auto;\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getToken } from \"@/utils/auth\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      uploadImgUrl: process.env.VUE_APP_BASE_API + \"/common/upload\", // 上传的图片服务器地址\r\n      headers: {\r\n        Authorization: \"Bearer \" + getToken(),\r\n      },\r\n    };\r\n  },\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n  },\r\n  methods: {\r\n    removeImage() {\r\n      this.$emit(\"input\", \"\");\r\n    },\r\n    handleUploadSuccess(res) {\r\n      this.$emit(\"input\", res.url);\r\n      this.loading.close();\r\n    },\r\n    handleBeforeUpload() {\r\n      this.loading = this.$loading({\r\n        lock: true,\r\n        text: \"上传中\",\r\n        background: \"rgba(0, 0, 0, 0.7)\",\r\n      });\r\n    },\r\n    handleUploadError() {\r\n      this.$message({\r\n        type: \"error\",\r\n        message: \"上传失败\",\r\n      });\r\n      this.loading.close();\r\n    },\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.image {\r\n  position: relative;\r\n  .mask {\r\n    opacity: 0;\r\n    position: absolute;\r\n    top: 0;\r\n    width: 100%;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    transition: all 0.3s;\r\n  }\r\n  &:hover .mask {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>"]}]}