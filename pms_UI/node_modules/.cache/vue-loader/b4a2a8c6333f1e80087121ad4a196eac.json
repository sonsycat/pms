{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\formDesignAdd\\index.vue?vue&type=style&index=0&id=174557fa&lang=scss&scoped=true&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\formDesignAdd\\index.vue","mtime":1693362205068},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\css-loader\\dist\\cjs.js","mtime":1693361949271},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1693362179282},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\postcss-loader\\src\\index.js","mtime":1693362110683},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1693362152666},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hZGRfZm9ybV9kaWFsb2d7Cgk6OnYtZGVlcCAuZWwtZGlhbG9nIHsKCQltaW4taGVpZ2h0OiAxMCU7CgkJb3ZlcmZsb3c6IGhpZGRlbjsKCQkuZWwtZGlhbG9nX19ib2R5IHsKCQkJbWF4LWhlaWdodDogYXV0byAhaW1wb3J0YW50OwoJCQlvdmVyZmxvdzogYXV0bzsKCQl9Cgl9Cn0KLmR5bmFtaWNGb3JtewoJOjp2LWRlZXAgLmVsLWFzaWRlewoJCXdpZHRoOiAzMTBweCAhaW1wb3J0YW50OwoJCSYud2lkZ2V0LWNvbmZpZy1jb250YWluZXJ7CgkJCXdpZHRoOiAzNTBweCAhaW1wb3J0YW50OwoJCQkuZWwtZm9ybS1pdGVtX19jb250ZW50ewoJCQkJbWFyZ2luLWxlZnQ6IDAgIWltcG9ydGFudAoJCQl9CgkJfQoJfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/components/formDesignAdd","sourcesContent":["<template>\n\t<div class=\"add_form_dialog\">\n\t\t<el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"80%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"true\" @close=\"handleDialogClose\">\n\t\t\t<div class=\"dynamicForm\">\n\t\t\t\t<!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\n\t\t\t\t<fm-making-form\n\t\t\t\t\tref=\"makingform\"\n\t\t\t\t\tstyle=\"height:700px;display: block;\"\n\t\t\t\t\tpreview\n\t\t\t\t\tgenerate-code\n\t\t\t\t\tgenerate-json\n\t\t\t\t>\n\t\t\t\t<!-- 头部内容自定义，添加提交按钮 -->\n\t\t\t\t\t<template slot=\"action\">\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-upload\" size=\"mini\" @click=\"handleSubmit\">保存</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</fm-making-form>\n\t\t\t\t<div class=\"list-wraper previewForm\">\n\t\t\t\t\t<fm-generate-form\n\t\t\t\t\t\t:data=\"jsonData\"\n\t\t\t\t\t\tref=\"generateForm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</fm-generate-form>\n\t\t\t\t\t<!-- <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button> -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\nimport { saveDesign,getForm,getFormDesign } from '@/api/utils'\nexport default {\n\tname:'addForm',\n\tprops: {\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tformMarkingId: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t}\n\t},\n\twatch: {\n\t\tformMarkingId: {\n\t\t\thandler(val) {\n\t\t\t\tif (val) {\n\t\t\t\t\tthis.formMarkingId = val;\n\t\t\t\t\tthis.title = \"模板管理-编辑模板-模板字段-新增\";\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true,\n\t\t\timmediate: true\n\t\t},\n\t\topen: {\n\t\t\thandler(val) {\n\t\t\t\tthis.openDialog = val;\n\t\t\t},\n\t\t\tdeep: true,\n\t\t\timmediate: true\n\t\t}\n  \t},\n    data(){\n        return{\n\t\t  openDialog:false,\n\t\t  title:'模板管理-编辑模板-模板字段-新增',\n          formName:'',\n          jsonData:{\n          \tlist:[],\n\t\t  },\n\t\t  list:[],\n        }\n    },\n    components:{},\n    created() {\n\t\tthis.$nextTick(()=>{\n\t\t\tthis.handleFormReady();\n\t\t})\n    },\n    methods:{\n\t\t// 弹框关闭\n\t\thandleDialogClose() {\n\t\t\tthis.$emit(\"cancel\", false);\n\t\t},\n    \thandleFormReady () {\n\t        const formDesignId = this.formMarkingId;\n\t        getFormDesign(formDesignId).then(response => {\n\t            const formJson = response.data.formJson;\n\t            if(formJson != null && formJson != '') {\n\t\t\t\t\tlet data=JSON.parse(formJson);\n\t\t\t\t\tdata.size=\"mini\"\n\t\t\t\t\tdata.list.forEach(_=>{\n\t\t\t\t\t\t_.size=\"mini\";\n\t\t\t\t\t\t_.options.disabled=_.options.disabled==\"false\"?false:true;\n\t\t\t\t\t\t_.options.required=_.options.required==\"false\"?false:true;\n\t\t\t\t\t\t_.columns && _.columns.forEach(ite=>{\n\t\t\t\t\t\t\tite.span=ite.span * 1;\n\t\t\t\t\t\t\tite.list.forEach(item=>{\n\t\t\t\t\t\t\t\titem.size=\"mini\";\n\t\t\t\t\t\t\t\titem.options.disabled=item.options.disabled==\"false\"?false:true;\n\t\t\t\t\t\t\t\titem.options.required=item.options.required==\"false\"?false:true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t// console.log(data,'data')\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.$refs.makingform.setJSON(data)\n\t\t\t\t\t} catch (d) {\n\t\t\t\t\t\tconsole.log(d)\n\t\t\t\t\t}\n\t            }\n\t        });\n\t    },\n\t\tsaveData(){\n\t\t\tlet saveLoading=this.saveLoading()\n\t\t\t\tconst json = this.$refs.makingform.getJSON();\n\t\t\t\tsaveDesign(this.formMarkingId, json, this.$refs.makingform.getHtml()).then((res)=>{\n\t\t\t\t\tif(res.code==200){\n\t\t\t\t\tthis.msgSuccess(\"保存成功\");\n\t\t\t\t\tthis.handleDialogClose();\n\t\t\t\t\tsaveLoading.close()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n        handleSubmit () {\n\t\t\tthis.$confirm('是否确认覆盖原有配置数据?', \"警告\", {\n\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\tcancelButtonText: \"取消\",\n\t\t\t\ttype: \"warning\"\n\t\t\t}).then(()=> {\n\t\t\t\treturn this.saveData()\n\t\t\t}).catch(() => {});\n\n        },\n        // close() {\n        // \tthis.$store.dispatch('tagsView/delView', this.$route)\n        // \tthis.$router.push({ path:'/tool/formDesign', query: { t: Date.now() } })\n      \t// },\n    },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.add_form_dialog{\n\t::v-deep .el-dialog {\n\t\tmin-height: 10%;\n\t\toverflow: hidden;\n\t\t.el-dialog__body {\n\t\t\tmax-height: auto !important;\n\t\t\toverflow: auto;\n\t\t}\n\t}\n}\n.dynamicForm{\n\t::v-deep .el-aside{\n\t\twidth: 310px !important;\n\t\t&.widget-config-container{\n\t\t\twidth: 350px !important;\n\t\t\t.el-form-item__content{\n\t\t\t\tmargin-left: 0 !important\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n"]}]}