{"remainingRequest":"F:\\pms_UI\\node_modules\\thread-loader\\dist\\cjs.js!F:\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\pms_UI\\src\\views\\revenue\\revenue\\revenueDept.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\pms_UI\\src\\views\\revenue\\revenue\\revenueDept.vue","mtime":1693362205876},{"path":"F:\\pms_UI\\babel.config.js","mtime":1693361824517},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1693362167329},{"path":"F:\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRjovcG1zX1VJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRjovcG1zX1VJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IHsgZ2V0UmV2ZW51ZURlcHQsIGdldERlcHRMaXN0LCBhZGREZXB0TGlzdCB9IGZyb20gIkAvYXBpL3JldmVudWUvcmV2ZW51ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncmV2ZW51ZURlcHQnLAogIHByb3BzOiB7CiAgICAvLyDkvKDlj4LkuLpmb3Jt6KGo5Y2VIOaWueS+v+aVsOaNruWbnuaYvua4suafkwogICAgcXVlcnlQYXJhbXM6IHsKICAgICAgdHlwZTogW09iamVjdCwgQXJyYXldCiAgICB9LAogICAgb3BlbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGlkOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgb3BlbjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMub3BlbkRpYWxvZyA9IHZhbDsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAn5pS25YWl5qC4566X5pa55qGILeesrOS4ieaWueenkeWupCcsCiAgICAgIG9wZW5EaWFsb2c6IHRoaXMub3BlbiwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmcxOiBmYWxzZSwKICAgICAgbG9hZGluZzI6IGZhbHNlLAogICAgICBsb2FkaW5nMzogZmFsc2UsCiAgICAgIGNsaWNrQ291bnQ6IDAsCiAgICAgIGFjdGl2ZU5hbWU6ICJvdXRQYXRpZW50IiwKICAgICAgcGF0VG9SaWdodEJvb2w6IHRydWUsCiAgICAgIHBhdFRvTGVmdEJvb2w6IHRydWUsCiAgICAgIGhvc1RvUmlnaHRCb29sOiB0cnVlLAogICAgICBob3NUb0xlZnRCb29sOiB0cnVlLAogICAgICBmb3JtOiB7CiAgICAgICAgb3V0cGF0aWVudFNlcnZpY2VMZWZ0OiBbXSwKICAgICAgICAvL+mXqOiviuW3puS+p+aVsOaNrgogICAgICAgIG91dHBhdGllbnRTZXJ2aWNlUmlnaHQ6IFtdLAogICAgICAgIC8v6Zeo6K+K5Y+z5L6n5pWw5o2uCiAgICAgICAgaG9zcGl0YWxTZXJ2aWNlTGVmdDogW10sCiAgICAgICAgLy/kvY/pmaLlt6bkvqfmlbDmja4KICAgICAgICBob3NwaXRhbFNlcnZpY2VSaWdodDogW10gLy/kvY/pmaLlj7PkvqfmlbDmja4KICAgICAgfSwKCiAgICAgIHJ1bGVzOiB7fSwKICAgICAgZGVwdERhdGFzOiBbXSwKICAgICAgLy/pl6jor4rnp5HlrqTliJfooajmlbDmja4KICAgICAgZGVwdERhdGFzTGVuZ3RoOiAwLAogICAgICAvL+mXqOiviuenkeWupOWIl+ihqOaVsOaNrueUqOS6juavlOi+g+WFqOmAieaVsOaNrgogICAgICBjaGFuZ2VEZXB0TGlzdDE6IFtdLAogICAgICBjaGFuZ2VEZXB0TGlzdDogW10sCiAgICAgIGRlcHREYXRhc0hvczogW10sCiAgICAgIC8v6Zeo6K+K56eR5a6k5YiX6KGo5pWw5o2uCiAgICAgIGNoYW5nZUhvc0RlcHRMaXN0OiBbXSwKICAgICAgY2hhbmdlSG9zRGVwdExpc3QxOiBbXSwKICAgICAgb3V0cGF0aWVudFJpZ2h0TGVuZ3RoOiBbXSwKICAgICAgaG9zcGl0YWxSaWdodExlbmd0aDogW10sCiAgICAgIHNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0OiBbXSwKICAgICAgLy/pl6jor4rlt6bkvqflpI3pgInmoYbmlbDmja4KICAgICAgc2VsZWN0aW9uUm93T3V0cGF0aWVudFJpZ2h0OiBbXSwKICAgICAgLy/pl6jor4rlj7PkvqflpI3pgInmoYbmlbDmja4KICAgICAgc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0OiBbXSwKICAgICAgLy/kvY/pmaLlt6bkvqflpI3pgInmoYbmlbDmja4KICAgICAgc2VsZWN0aW9uUm93aG9zcGl0YWxSaWdodDogW10gLy/kvY/pmaLlj7PkvqflpI3pgInmoYbmlbDmja4KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIG51bTogZnVuY3Rpb24gbnVtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAvL+iuoeeul+WxnuaAp+S8oOmAkuWPguaVsO+8jOagueaNruS8oOWFpeeahOaVsOe7hOi/lOWbnuespuWQiOadoeS7tueahOmVv+W6pgogICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQgJiYgX3RoaXMuc2VsZWN0aW9uUm93b3V0cGF0aWVudExlZnQubGVuZ3RoOwogICAgICB9OwogICAgfSwKICAgIG51bTE6IGZ1bmN0aW9uIG51bTEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAvL+iuoeeul+WxnuaAp+S8oOmAkuWPguaVsO+8jOagueaNruS8oOWFpeeahOaVsOe7hOi/lOWbnuespuWQiOadoeS7tueahOmVv+W6pgogICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdCAmJiBfdGhpczIuc2VsZWN0aW9uUm93T3V0cGF0aWVudFJpZ2h0Lmxlbmd0aDsKICAgICAgfTsKICAgIH0sCiAgICBudW0yOiBmdW5jdGlvbiBudW0yKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgLy/orqHnrpflsZ7mgKfkvKDpgJLlj4LmlbDvvIzmoLnmja7kvKDlhaXnmoTmlbDnu4Tov5Tlm57nrKblkIjmnaHku7bnmoTplb/luqYKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQgJiYgX3RoaXMzLnNlbGVjdGlvblJvd2hvc3BpdGFsTGVmdC5sZW5ndGg7CiAgICAgIH07CiAgICB9LAogICAgbnVtMzogZnVuY3Rpb24gbnVtMygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIC8v6K6h566X5bGe5oCn5Lyg6YCS5Y+C5pWw77yM5qC55o2u5Lyg5YWl55qE5pWw57uE6L+U5Zue56ym5ZCI5p2h5Lu255qE6ZW/5bqmCiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczQuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0ICYmIF90aGlzNC5zZWxlY3Rpb25Sb3dob3NwaXRhbFJpZ2h0Lmxlbmd0aDsKICAgICAgfTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERldGFpbCgxKTsKICAgIHRoaXMuZ2V0VHJlZURlcHQoewogICAgICBjb21wQ29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5hY2NvdW50SW5mby5kZXB0SWQsCiAgICAgIGNsaW5pY1R5cGU6IDEKICAgIH0pOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8v56eR5a6k5p+l6K+i5LiL5ouJ5qGG5LqL5Lu2CiAgICBjaGFuZ2VEZXB0OiBmdW5jdGlvbiBjaGFuZ2VEZXB0KGUpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlTmFtZSA9PSAnb3V0UGF0aWVudCcpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgY29tcENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uZGVwdElkLAogICAgICAgICAgICBjbGluaWNUeXBlOiAxLAogICAgICAgICAgICBkZXB0TmFtZTogZQogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgY29tcENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uZGVwdElkLAogICAgICAgICAgICBjbGluaWNUeXBlOiAxCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB0aGlzLmdldFRyZWVEZXB0KGRhdGEpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFjdGl2ZU5hbWUgPT0gJ2hvc3BpdGFsJykgewogICAgICAgIHZhciBfZGF0YTsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgX2RhdGEgPSB7CiAgICAgICAgICAgIGNvbXBDb2RlOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmFjY291bnRJbmZvLmRlcHRJZCwKICAgICAgICAgICAgY2xpbmljVHlwZTogMiwKICAgICAgICAgICAgZGVwdE5hbWU6IGUKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9kYXRhID0gewogICAgICAgICAgICBjb21wQ29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5hY2NvdW50SW5mby5kZXB0SWQsCiAgICAgICAgICAgIGNsaW5pY1R5cGU6IDIKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHRoaXMuZ2V0VHJlZURlcHQoX2RhdGEpOwogICAgICB9CiAgICB9LAogICAgLy90YWLliIfmjaLkuovku7YKICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayh0YWIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEodGFiLmxhYmVsID09ICLkvY/pmaIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3RoaXM1LmNoYW5nZUhvc0RlcHRMaXN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczUuY2hhbmdlSG9zRGVwdExpc3QxID0gW107CiAgICAgICAgICAgICAgICAvLyB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdD1bXSAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIF90aGlzNS5hY3RpdmVOYW1lID0gJ2hvc3BpdGFsJzsKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNS5jbGlja0NvdW50ID09IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5nZXREZXRhaWwoMik7CiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX3RoaXM1LmNsaWNrQ291bnQgKz0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2V0VHJlZURlcHQoewogICAgICAgICAgICAgICAgICBjb21wQ29kZTogX3RoaXM1LiRzdG9yZS5zdGF0ZS51c2VyLmFjY291bnRJbmZvLmRlcHRJZCwKICAgICAgICAgICAgICAgICAgY2xpbmljVHlwZTogMgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGlmICghKHRhYi5sYWJlbCA9PSAn6Zeo6K+KJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQ9W10KICAgICAgICAgICAgICAgIF90aGlzNS5jaGFuZ2VEZXB0TGlzdDEgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzNS5jaGFuZ2VEZXB0TGlzdCA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXM1LmFjdGl2ZU5hbWUgPSAnb3V0UGF0aWVudCc7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmdldFRyZWVEZXB0KHsKICAgICAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzNS4kc3RvcmUuc3RhdGUudXNlci5hY2NvdW50SW5mby5kZXB0SWQsCiAgICAgICAgICAgICAgICAgIGNsaW5pY1R5cGU6IDEKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/ojrflj5bpl6jor4rlj4rkvY/pmaLlj7PkvqfliJfooajmlbDmja4KICAgIGdldERldGFpbDogZnVuY3Rpb24gZ2V0RGV0YWlsKHR5cGUpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBwYXJhbXMsIGFyciwgX2FycjsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBjb21wQ29kZTogX3RoaXM2LnF1ZXJ5UGFyYW1zLmNvbXBDb2RlLAogICAgICAgICAgICAgICAgICByZXZlbnVlQ29kZTogX3RoaXM2LnF1ZXJ5UGFyYW1zLnJldmVudWVDb2RlLAogICAgICAgICAgICAgICAgICBkZXB0VHlwZTogdHlwZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGlmICghKHR5cGUgPT0gMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzNi5sb2FkaW5nMSA9IHRydWU7CiAgICAgICAgICAgICAgICBhcnIgPSBbXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZXZlbnVlRGVwdChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UudG90YWw7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGFyci5pbmRleE9mKHJlc3BvbnNlLnJvd3NbaV0pID09PSAtMSA/IGFyci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHJhdGlvOiByZXNwb25zZS5yb3dzW2ldLnJhdGlvLAogICAgICAgICAgICAgICAgICAgICAgZGljdFZhbHVlOiByZXNwb25zZS5yb3dzW2ldLmRlcHRDb2RlLAogICAgICAgICAgICAgICAgICAgICAgZGljdExhYmVsOiByZXNwb25zZS5yb3dzW2ldLmRlcHROYW1lCiAgICAgICAgICAgICAgICAgICAgfSkgOiBhcnI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3RoaXM2LmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJyKSk7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5vdXRwYXRpZW50UmlnaHRMZW5ndGggPSByZXNwb25zZS50b3RhbDsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmxvYWRpbmcxID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEodHlwZSA9PSAyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzNi5sb2FkaW5nMyA9IHRydWU7CiAgICAgICAgICAgICAgICBfYXJyID0gW107CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldFJldmVudWVEZXB0KHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS50b3RhbDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgX2Fyci5pbmRleE9mKHJlc3BvbnNlLnJvd3NbaV0pID09PSAtMSA/IF9hcnIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICByYXRpbzogcmVzcG9uc2Uucm93c1tpXS5yYXRpbywKICAgICAgICAgICAgICAgICAgICAgIGRpY3RWYWx1ZTogcmVzcG9uc2Uucm93c1tpXS5kZXB0Q29kZSwKICAgICAgICAgICAgICAgICAgICAgIGRpY3RMYWJlbDogcmVzcG9uc2Uucm93c1tpXS5kZXB0TmFtZQogICAgICAgICAgICAgICAgICAgIH0pIDogX2FycjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBfdGhpczYuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX2FycikpOwogICAgICAgICAgICAgICAgICBfdGhpczYuaG9zcGl0YWxSaWdodExlbmd0aCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgICAgICAgICAgICBfdGhpczYubG9hZGluZzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8v6I635Y+W56eR5a6k5YiX6KGo5Y+K6Zeo6K+K5ZKM5L2P6Zmi5bem5L6n5pWw5o2uCiAgICBnZXRUcmVlRGVwdDogZnVuY3Rpb24gZ2V0VHJlZURlcHQoZGF0YSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nMiA9IHRydWU7CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczcuY2xpY2tDb3VudCA9PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5nZXREZXRhaWwoMik7CiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3RoaXM3LmNsaWNrQ291bnQgKz0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBnZXREZXB0TGlzdChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczcuZGVwdERhdGFzTGVuZ3RoID0gcmVzcG9uc2UuZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY2xpbmljVHlwZSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0PVtdCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlRGVwdExpc3QxID0gW107CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlRGVwdExpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5kZXB0RGF0YXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZTsKICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3Lm91dHBhdGllbnRSaWdodExlbmd0aCAhPT0gMCB8fCBfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0Lmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VEZXB0TGlzdDEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGUucmF0aW8gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gX3RoaXM3LmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gX3RoaXM3LmNoYW5nZURlcHRMaXN0MSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHRbaV0uZGljdFZhbHVlID09IF90aGlzNy5jaGFuZ2VEZXB0TGlzdDFba10uZGljdFZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VEZXB0TGlzdDEuc3BsaWNlKGssIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNy5jaGFuZ2VEZXB0TGlzdDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczcub3V0cGF0aWVudFJpZ2h0TGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlRGVwdExpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGUucmF0aW8gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pIGluIF90aGlzNy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfayBpbiBfdGhpczcuY2hhbmdlRGVwdExpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0W19pXS5kaWN0VmFsdWUgPT0gX3RoaXM3LmNoYW5nZURlcHRMaXN0W19rXS5kaWN0VmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZURlcHRMaXN0LnNwbGljZShfaywgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXM3LmNoYW5nZURlcHRMaXN0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM3Lm91dHBhdGllbnRSaWdodExlbmd0aCA9PSAwICYmIF90aGlzNy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczcuZGVwdERhdGFzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY2xpbmljVHlwZSA9PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdDEgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0PVtdCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuZGVwdERhdGFzSG9zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZS5yYXRpbyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGU7CiAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5ob3NwaXRhbFJpZ2h0TGVuZ3RoICE9PSAwIHx8IF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0Lmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdDEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEubWFwKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGUucmF0aW8gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pMiBpbiBfdGhpczcuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9rMiBpbiBfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHRbX2kyXS5kaWN0VmFsdWUgPT0gX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0MVtfazJdLmRpY3RWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QxLnNwbGljZShfazIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlOwogICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTMgaW4gX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfazMgaW4gX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHRbX2kzXS5kaWN0VmFsdWUgPT0gX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0W19rM10uZGljdFZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdC5zcGxpY2UoX2szLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmxvYWRpbmcyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdCkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNy5ob3NwaXRhbFJpZ2h0TGVuZ3RoID09IDAgJiYgX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXM3LmRlcHREYXRhc0hvcykpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczcubXNnRXJyb3IocmVzcG9uc2UubXNnKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaG9zcGl0YWxUb3JpZ2h0OiBmdW5jdGlvbiBob3NwaXRhbFRvcmlnaHQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICAvL+Wwhui/h+a7pOWQjueahOaVsOe7hOmcgOimgea3u+WKoOWIsOWPs+i+ueeahOaVsOe7hOS4rQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0LmluZGV4T2YodGhpcy5zZWxlY3Rpb25Sb3dob3NwaXRhbExlZnRbaV0pID09PSAtMSA/IHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5wdXNoKHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0W2ldKSA6IHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodDsKICAgICAgfQogICAgICA7CiAgICAgIC8v5Ymp5L2Z5bem6L655pWw5o2uCiAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKF9pNSkgewogICAgICAgIF90aGlzOC5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0LmZvckVhY2goZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgaWYgKF90aGlzOC5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnRbX2k1XSAmJiBfdGhpczguZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0W19pNV0uZGljdFZhbHVlID09IGl0ZS5kaWN0VmFsdWUpIHsKICAgICAgICAgICAgX3RoaXM4LmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdC5zcGxpY2UoX2k1LCAxKTsKICAgICAgICAgICAgX2k1IC09IDE7CiAgICAgICAgICAgIF9pNSA8IDAgPyAwIDogX2k1OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF9pNCA9IF9pNTsKICAgICAgfTsKICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgdGhpcy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQubGVuZ3RoOyBfaTQrKykgewogICAgICAgIF9sb29wKF9pNCk7CiAgICAgIH0KICAgIH0sCiAgICBob3NwaXRhbFRvTGVmdDogZnVuY3Rpb24gaG9zcGl0YWxUb0xlZnQoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxSaWdodC5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0LmluZGV4T2YodGhpcy5zZWxlY3Rpb25Sb3dob3NwaXRhbFJpZ2h0W2ldKSA9PT0gLTEgPyB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdC5wdXNoKHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxSaWdodFtpXSkgOiB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdDsKICAgICAgfQogICAgICA7CiAgICAgIC8v5Ymp5L2Z5Y+z6L655pWw5o2uCiAgICAgIHZhciBfbG9vcDIgPSBmdW5jdGlvbiBfbG9vcDIoX2k3KSB7CiAgICAgICAgX3RoaXM5LmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgIGlmIChfdGhpczkuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodFtfaTddICYmIF90aGlzOS5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0W19pN10uZGljdFZhbHVlID09IGl0ZS5kaWN0VmFsdWUpIHsKICAgICAgICAgICAgX3RoaXM5LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQuc3BsaWNlKF9pNywgMSk7CiAgICAgICAgICAgIF9pNyAtPSAxOwogICAgICAgICAgICBfaTcgPCAwID8gMCA6IF9pNzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfaTYgPSBfaTc7CiAgICAgIH07CiAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5sZW5ndGg7IF9pNisrKSB7CiAgICAgICAgX2xvb3AyKF9pNik7CiAgICAgIH0KICAgIH0sCiAgICBvdXRwYXRpZW50VG9yaWdodDogZnVuY3Rpb24gb3V0cGF0aWVudFRvcmlnaHQoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgLy/lsIbov4fmu6TlkI7nmoTmlbDnu4TpnIDopoHmt7vliqDliLDlj7PovrnnmoTmlbDnu4TkuK0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQuaW5kZXhPZih0aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0W2ldKSA9PT0gLTEgPyB0aGlzLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5wdXNoKHRoaXMuc2VsZWN0aW9uUm93b3V0cGF0aWVudExlZnRbaV0pIDogdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQ7CiAgICAgIH0KICAgICAgOwogICAgICAvL+WJqeS9meW3pui+ueaVsOaNrgogICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKF9pOSkgewogICAgICAgIF90aGlzMTAuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0LmZvckVhY2goZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgaWYgKF90aGlzMTAuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnRbX2k5XSAmJiBfdGhpczEwLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0W19pOV0uZGljdFZhbHVlID09IGl0ZS5kaWN0VmFsdWUpIHsKICAgICAgICAgICAgX3RoaXMxMC5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdC5zcGxpY2UoX2k5LCAxKTsKICAgICAgICAgICAgX2k5IC09IDE7CiAgICAgICAgICAgIF9pOSA8IDAgPyAwIDogX2k5OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF9pOCA9IF9pOTsKICAgICAgfTsKICAgICAgZm9yICh2YXIgX2k4ID0gMDsgX2k4IDwgdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdC5sZW5ndGg7IF9pOCsrKSB7CiAgICAgICAgX2xvb3AzKF9pOCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+WwhuWPs+i+ueaVsOaNruaUvuWIsOW3pui+uQogICAgb3V0cGF0aWVudFRvbGVmdDogZnVuY3Rpb24gb3V0cGF0aWVudFRvbGVmdCgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsZWN0aW9uUm93T3V0cGF0aWVudFJpZ2h0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdC5pbmRleE9mKHRoaXMuc2VsZWN0aW9uUm93T3V0cGF0aWVudFJpZ2h0W2ldKSA9PT0gLTEgPyB0aGlzLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0LnB1c2godGhpcy5zZWxlY3Rpb25Sb3dPdXRwYXRpZW50UmlnaHRbaV0pIDogdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdDsKICAgICAgfQogICAgICA7CiAgICAgIC8v5Ymp5L2Z5Y+z6L655pWw5o2uCiAgICAgIHZhciBfbG9vcDQgPSBmdW5jdGlvbiBfbG9vcDQoX2kxMSkgewogICAgICAgIF90aGlzMTEuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICBpZiAoX3RoaXMxMS5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHRbX2kxMV0gJiYgX3RoaXMxMS5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHRbX2kxMV0uZGljdFZhbHVlID09IGl0ZS5kaWN0VmFsdWUpIHsKICAgICAgICAgICAgX3RoaXMxMS5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQuc3BsaWNlKF9pMTEsIDEpOwogICAgICAgICAgICBfaTExIC09IDE7CiAgICAgICAgICAgIF9pMTEgPCAwID8gX2kxMSA9IDAgOiBfaTExOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIF9pMTAgPSBfaTExOwogICAgICB9OwogICAgICBmb3IgKHZhciBfaTEwID0gMDsgX2kxMCA8IHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0Lmxlbmd0aDsgX2kxMCsrKSB7CiAgICAgICAgX2xvb3A0KF9pMTApOwogICAgICB9CiAgICB9LAogICAgLy8g6Zeo6K+K5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25PdXRwYXRpZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25PdXRwYXRpZW50Q2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0ID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICByZXR1cm4gaXRlOwogICAgICB9KTsKICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggIT09IDApIHsKICAgICAgICB0aGlzLnBhdFRvUmlnaHRCb29sID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXRUb1JpZ2h0Qm9vbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvL+mXqOiviuWPs+S+p+WkmumAieahhuaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlUmlnaHQ6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZVJpZ2h0KHNlbGVjdGlvbikgewogICAgICB0aGlzLnNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodCA9IHNlbGVjdGlvbjsKICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggIT09IDApIHsKICAgICAgICB0aGlzLnBhdFRvTGVmdEJvb2wgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnBhdFRvTGVmdEJvb2wgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy/kvY/pmaLlt6bkvqflpJrpgInmoYYKICAgIGhhbmRsZVNlbGVjdGlvbkhvc3BpdGFsQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25Ib3NwaXRhbENoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5zZWxlY3Rpb25Sb3dob3NwaXRhbExlZnQgPSBzZWxlY3Rpb24ubWFwKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICBpdGUucmF0aW8gPSAwOwogICAgICAgIHJldHVybiBpdGU7CiAgICAgIH0pOwogICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCAhPT0gMCkgewogICAgICAgIHRoaXMuaG9zVG9SaWdodEJvb2wgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmhvc1RvUmlnaHRCb29sID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8v5L2P6Zmi5Y+z5L6n5aSa6YCJ5qGGCiAgICBoYW5kbGVTZWxlY3Rpb25Ib3NwaXRhbENoYW5nZVJpZ2h0OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25Ib3NwaXRhbENoYW5nZVJpZ2h0KHNlbGVjdGlvbikgewogICAgICB0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsUmlnaHQgPSBzZWxlY3Rpb247CiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgdGhpcy5ob3NUb0xlZnRCb29sID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ob3NUb0xlZnRCb29sID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIHJvd0NsaWNrOiBmdW5jdGlvbiByb3dDbGljayhyb3csIGNvbHVtbiwgZXZlbnQpIHsKICAgICAgdmFyIHJlZnNFbFRhYmxlID0gdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlOwogICAgICB2YXIgZmluZFJvdyA9IHRoaXMuc2VsZWN0aW9uUm93b3V0cGF0aWVudExlZnQuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLnJvd0luZGV4ID09IHJvdy5yb3dJbmRleDsKICAgICAgfSk7CiAgICAgIGlmIChmaW5kUm93ICYmIHRoaXMuc2VsZWN0aW9uUm93b3V0cGF0aWVudExlZnQubGVuZ3RoID09IDEpIHsKICAgICAgICByZWZzRWxUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93LCBmYWxzZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJlZnNFbFRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOwogICAgfSwKICAgIHJvd0NsaWNrUGF0UmlnaHQ6IGZ1bmN0aW9uIHJvd0NsaWNrUGF0UmlnaHQocm93LCBjb2x1bW4sIGV2ZW50KSB7CiAgICAgIHZhciByZWZzRWxUYWJsZSA9IHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZVJpZ2h0OwogICAgICB2YXIgZmluZFJvdyA9IHRoaXMuc2VsZWN0aW9uUm93T3V0cGF0aWVudFJpZ2h0LmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5yb3dJbmRleCA9PSByb3cucm93SW5kZXg7CiAgICAgIH0pOwogICAgICBpZiAoZmluZFJvdyAmJiB0aGlzLnNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodC5sZW5ndGggPT0gMSkgewogICAgICAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIGZhbHNlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmVmc0VsVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7CiAgICB9LAogICAgcm93Q2xpY2tIb3M6IGZ1bmN0aW9uIHJvd0NsaWNrSG9zKHJvdywgY29sdW1uLCBldmVudCkgewogICAgICB2YXIgcmVmc0VsVGFibGUgPSB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGVIb3M7CiAgICAgIHZhciBmaW5kUm93ID0gdGhpcy5zZWxlY3Rpb25Sb3dob3NwaXRhbExlZnQuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLnJvd0luZGV4ID09IHJvdy5yb3dJbmRleDsKICAgICAgfSk7CiAgICAgIGlmIChmaW5kUm93ICYmIHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0Lmxlbmd0aCA9PSAxKSB7CiAgICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgZmFsc2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZWZzRWxUYWJsZS5jbGVhclNlbGVjdGlvbigpOwogICAgICByZWZzRWxUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93KTsKICAgIH0sCiAgICByb3dDbGlja0hvc1JpZ2h0OiBmdW5jdGlvbiByb3dDbGlja0hvc1JpZ2h0KHJvdywgY29sdW1uLCBldmVudCkgewogICAgICB2YXIgcmVmc0VsVGFibGUgPSB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGVSaWdodEhvczsKICAgICAgdmFyIGZpbmRSb3cgPSB0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsUmlnaHQuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLnJvd0luZGV4ID09IHJvdy5yb3dJbmRleDsKICAgICAgfSk7CiAgICAgIGlmIChmaW5kUm93ICYmIHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxSaWdodC5sZW5ndGggPT0gMSkgewogICAgICAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIGZhbHNlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmVmc0VsVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgb3V0cGF0aWVudFNlcnZpY2VMZWZ0OiBbXSwKICAgICAgICAvL+mXqOiviuW3puS+p+aVsOaNrgogICAgICAgIG91dHBhdGllbnRTZXJ2aWNlUmlnaHQ6IFtdLAogICAgICAgIC8v6Zeo6K+K5Y+z5L6n5pWw5o2uCiAgICAgICAgaG9zcGl0YWxTZXJ2aWNlTGVmdDogW10sCiAgICAgICAgLy/kvY/pmaLlt6bkvqfmlbDmja4KICAgICAgICBob3NwaXRhbFNlcnZpY2VSaWdodDogW10gLy/kvY/pmaLlj7PkvqfmlbDmja4KICAgICAgfTsKCiAgICAgIHRoaXMuY2xpY2tDb3VudCA9IDA7CiAgICB9LAogICAgLyoqIOenkeWupOaPkOS6pOaMiemSriAqL3N1Ym1pdEZvcm1EZXB0OiBmdW5jdGlvbiBzdWJtaXRGb3JtRGVwdCgpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWyJxdWVyeUZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHZhciBwYXJhbXMsCiAgICAgICAgICAgIGFyciA9IFtdLAogICAgICAgICAgICBhcnIxID0gW10sCiAgICAgICAgICAgIHN1bSA9IDAsCiAgICAgICAgICAgIHN1bTEgPSAwOwogICAgICAgICAgaWYgKF90aGlzMTIuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0Lmxlbmd0aCA9PSAwICYmIF90aGlzMTIuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodCA9PSAwKSB7CiAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICByZXZlbnVlQ29kZTogX3RoaXMxMi5xdWVyeVBhcmFtcy5yZXZlbnVlQ29kZSwKICAgICAgICAgICAgICBwbXNSZXZlbnVlRGVwdHM6IFtdLAogICAgICAgICAgICAgIGNvbXBDb2RlOiBfdGhpczEyLnF1ZXJ5UGFyYW1zLmNvbXBDb2RlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHZhciBzYXZlTG9hZGluZyA9IF90aGlzMTIuc2F2ZUxvYWRpbmcoKTsKICAgICAgICAgICAgYWRkRGVwdExpc3QocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIF90aGlzMTIubXNnU3VjY2Vzcygi5pS25YWl5qC4566X56eR5a6k6K6+572u5oiQ5YqfIik7CiAgICAgICAgICAgICAgX3RoaXMxMi4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgICAgICAgICBzYXZlTG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChfdGhpczEyLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5sZW5ndGggPT0gMCAmJiBfdGhpczEyLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQgIT0gMCkgewogICAgICAgICAgICBfdGhpczEyLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgc3VtMSArPSBOdW1iZXIoaXRlLnJhdGlvKTsKICAgICAgICAgICAgICBhcnIxLnB1c2goewogICAgICAgICAgICAgICAgZGVwdE5hbWU6IGl0ZS5kaWN0TGFiZWwsCiAgICAgICAgICAgICAgICBkZXB0Q29kZTogaXRlLmRpY3RWYWx1ZSwKICAgICAgICAgICAgICAgIHJhdGlvOiBpdGUucmF0aW8KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICByZXZlbnVlQ29kZTogX3RoaXMxMi5xdWVyeVBhcmFtcy5yZXZlbnVlQ29kZSwKICAgICAgICAgICAgICBwbXNSZXZlbnVlRGVwdHM6IGFycjEsCiAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzMTIucXVlcnlQYXJhbXMuY29tcENvZGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHN1bTEgPiAxMDApIHsKICAgICAgICAgICAgICBfdGhpczEyLm1zZ0Vycm9yKCLkvY/pmaLlt7LpgInnp5HlrqTliIbmkYrmr5TkvovnmoTmgLvlkozlupTlsI/kuo7miJbnrYnkuo4xMDAiKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIF9zYXZlTG9hZGluZyA9IF90aGlzMTIuc2F2ZUxvYWRpbmcoKTsKICAgICAgICAgICAgICBhZGREZXB0TGlzdChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczEyLm1zZ1N1Y2Nlc3MoIuaUtuWFpeaguOeul+enkeWupOiuvue9ruaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMxMi4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIF9zYXZlTG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMxMi5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQubGVuZ3RoICE9IDAgJiYgX3RoaXMxMi5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0ID09IDApIHsKICAgICAgICAgICAgX3RoaXMxMi5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgc3VtICs9IE51bWJlcihpdGUucmF0aW8pOwogICAgICAgICAgICAgIGFyci5wdXNoKHsKICAgICAgICAgICAgICAgIGRlcHROYW1lOiBpdGUuZGljdExhYmVsLAogICAgICAgICAgICAgICAgZGVwdENvZGU6IGl0ZS5kaWN0VmFsdWUsCiAgICAgICAgICAgICAgICByYXRpbzogaXRlLnJhdGlvCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgcmV2ZW51ZUNvZGU6IF90aGlzMTIucXVlcnlQYXJhbXMucmV2ZW51ZUNvZGUsCiAgICAgICAgICAgICAgcG1zUmV2ZW51ZURlcHRzOiBhcnIsCiAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzMTIucXVlcnlQYXJhbXMuY29tcENvZGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHN1bSA+IDEwMCkgewogICAgICAgICAgICAgIF90aGlzMTIubXNnRXJyb3IoIumXqOiviuW3sumAieenkeWupOWIhuaRiuavlOS+i+eahOaAu+WSjOW6lOWwj+S6juaIluetieS6jjEwMCIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgX3NhdmVMb2FkaW5nMiA9IF90aGlzMTIuc2F2ZUxvYWRpbmcoKTsKICAgICAgICAgICAgICBhZGREZXB0TGlzdChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczEyLm1zZ1N1Y2Nlc3MoIuaUtuWFpeaguOeul+enkeWupOiuvue9ruaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMxMi4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIF9zYXZlTG9hZGluZzIuY2xvc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMTIuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0Lmxlbmd0aCAhPSAwICYmIF90aGlzMTIuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5sZW5ndGggIT0gMCkgewogICAgICAgICAgICBfdGhpczEyLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5mb3JFYWNoKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICBzdW0gKz0gTnVtYmVyKGl0ZS5yYXRpbyk7CiAgICAgICAgICAgICAgYXJyLnB1c2goewogICAgICAgICAgICAgICAgZGVwdE5hbWU6IGl0ZS5kaWN0TGFiZWwsCiAgICAgICAgICAgICAgICBkZXB0Q29kZTogaXRlLmRpY3RWYWx1ZSwKICAgICAgICAgICAgICAgIHJhdGlvOiBpdGUucmF0aW8KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzMTIuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5mb3JFYWNoKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICBzdW0xICs9IE51bWJlcihpdGUucmF0aW8pOwogICAgICAgICAgICAgIGFycjEucHVzaCh7CiAgICAgICAgICAgICAgICBkZXB0TmFtZTogaXRlLmRpY3RMYWJlbCwKICAgICAgICAgICAgICAgIGRlcHRDb2RlOiBpdGUuZGljdFZhbHVlLAogICAgICAgICAgICAgICAgcmF0aW86IGl0ZS5yYXRpbwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgIHJldmVudWVDb2RlOiBfdGhpczEyLnF1ZXJ5UGFyYW1zLnJldmVudWVDb2RlLAogICAgICAgICAgICAgIHBtc1JldmVudWVEZXB0czogW10uY29uY2F0KGFycjEsIGFyciksCiAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzMTIucXVlcnlQYXJhbXMuY29tcENvZGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHN1bSA+IDEwMCB8fCBzdW0xID4gMTAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5tc2dFcnJvcigi6Zeo6K+K5Y+K5L2P6Zmi5bey6YCJ56eR5a6k5YiG5pGK5q+U5L6L55qE5oC75ZKM5bqU5YiG5Yir5bCP5LqO5oiW562J5LqOMTAwIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBfc2F2ZUxvYWRpbmczID0gX3RoaXMxMi5zYXZlTG9hZGluZygpOwogICAgICAgICAgICAgIGFkZERlcHRMaXN0KHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzMTIubXNnU3VjY2Vzcygi5pS25YWl5qC4566X56eR5a6k6K6+572u5oiQ5YqfIik7CiAgICAgICAgICAgICAgICBfdGhpczEyLiRlbWl0KCJzdWNjZXNzIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgX3NhdmVMb2FkaW5nMy5jbG9zZSgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDlvLnmoYblhbPpl60KICAgIGhhbmRsZURpYWxvZ0Nsb3NlOiBmdW5jdGlvbiBoYW5kbGVEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9LAogICAgLy8g5Y+W5raICiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICB9CiAgfQp9Ow=="},null]}