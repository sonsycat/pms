{"remainingRequest":"F:\\pms_UI\\node_modules\\thread-loader\\dist\\cjs.js!F:\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\pms_UI\\src\\views\\tool\\formProcess\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\pms_UI\\src\\views\\tool\\formProcess\\index.vue","mtime":1718087161015},{"path":"F:\\pms_UI\\babel.config.js","mtime":1693361824517},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1693362167329},{"path":"F:\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"F:\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"F:\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IHsgZGVwbG95TGlzdCwgc2F2ZURlc2lnbiwgZ2V0Rm9ybSwgdGVzdEZvcm0sIGdldEZvcm1EZXRhaWxzLCBhZGRTYXZlRm9ybSwgZGVsRm9ybSB9IGZyb20gJ0AvYXBpL3V0aWxzJzsKaW1wb3J0IHsgZ2V0RGVwdEluZm9Gb3JQbXMsIGdldEZvcm1UYWJsZUxpc3QgYXMgX2dldEZvcm1UYWJsZUxpc3QsIGVkaXRBZGRGb3JtRGVzaWduIH0gZnJvbSAiQC9hcGkvZm9ybURlc2lnbi9mb3JtRGVzaWduIjsKaW1wb3J0IHsgbGlzdERldGFpbCB9IGZyb20gIkAvYXBpL3F1YWxpdHkvZGV0YWlsIjsKaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOwppbXBvcnQgeyBnZXRGb3JtRGVzaWduIH0gZnJvbSAnLi4vLi4vLi4vYXBpL2Zvcm1EZXNpZ24vZm9ybURlc2lnbic7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVIZWlnaHQ6ICdhdXRvJywKICAgICAgaXNBZGQ6IGZhbHNlLAogICAgICBpZGQ6IG51bGwsCiAgICAgIC8vIOS/ruaUuWlkCiAgICAgIGFkZEVkaXRJZDogIiIsCiAgICAgIGxpc3RzOiBbXSwKICAgICAgbGlzdHMyOiBbXSwKICAgICAgY29sczogW10sCiAgICAgIGpzb25EYXRhOiB7CiAgICAgICAgbGlzdDogW10KICAgICAgfSwKICAgICAgZm9ybURlc2lnbklkOiAiIiwKICAgICAgLy8gZm9ybURlc2lnbklkOnRoaXMuJHJvdXRlLm5hbWUsCiAgICAgIGZvcm1OYW1lOiAiIiwKICAgICAgLy8g6YGu572p5bGCCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDlr7zlh7rpga7nvanlsYIKICAgICAgZXhwb3J0TG9hZGluZzogZmFsc2UsCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICAvLyDpnZ7ljZXkuKrnpoHnlKgKICAgICAgc2luZ2xlOiB0cnVlLAogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgKICAgICAgbXVsdGlwbGU6IHRydWUsCiAgICAgIC8vIOaYvuekuuaQnOe0ouadoeS7tgogICAgICBzaG93U2VhcmNoOiB0cnVlLAogICAgICAvLyDmgLvmnaHmlbAKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOiHquWumuS5ieihqOWNleihqOagvOaVsOaNrgogICAgICBmb3JtRGVzaWduTGlzdDogW10sCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogIiIsCiAgICAgIHNlYXJjaFRpdGxlOiAiIiwKICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCCiAgICAgIG9wZW46IGZhbHNlLAogICAgICBvcGVuX3NlYXJjaDogZmFsc2UsCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDMwCiAgICAgIH0sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7CiAgICAgICAgbGlzdHMyOiBbXQogICAgICB9LAogICAgICAvLyDooajljZXmoKHpqowKICAgICAgcnVsZXM6IHt9LAogICAgICBzZWxlY3Rpb25Sb3c6IFtdLAogICAgICB0YWJsZUxvYWRpbmc6IGZhbHNlLAogICAgICBmb3JtRGF0YUxpc3Q6IFtdLAogICAgICBmb3JtRGF0YUxpc3QxOiBbXSwKICAgICAgZm9ybURhdGFMaXN0MjogW10sCiAgICAgIG1icHhUeXBlT3B0aW9uczogW10sCiAgICAgIHF1ZXJ5VHlwZU9wdGlvbnM6IFtdLAogICAgICBpc1Btc0d1aWRhbmNlOiBmYWxzZSwKICAgICAgaXNQbXNSZXN1bHQ6IGZhbHNlLAogICAgICBpc0FkZFNob3c6IGZhbHNlLAogICAgICB0YXJnZXRWYWx1ZTogW10sCiAgICAgIC8v5oyH5qCH5pWw5o2uCiAgICAgIGl0ZW1BbGlnbjogJycKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGNvbnNvbGUubG9nKCLov5vlhaXkv6Hmga8iKTsKICAgIHRoaXMuZ2V0RGljdHMoInBtc19tYnB4X3R5cGUiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy5tYnB4VHlwZU9wdGlvbnMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgICB0aGlzLmdldERpY3RzKCJwbXNfbWJzeF90aiIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzLnF1ZXJ5VHlwZU9wdGlvbnMgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgICBjb25zb2xlLmxvZygiLiRyb3V0ZS5wYXRoPSIgKyB0aGlzLiRyb3V0ZS5wYXRoKTsKICAgIGdldEZvcm1EZXNpZ24odGhpcy4kcm91dGUubmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2coIuS/ruaUueWJjWZvcm1EZXNpZ25JZD0iICsgX3RoaXMuZm9ybURlc2lnbklkKTsKICAgICAgX3RoaXMuZm9ybURlc2lnbklkID0gcmVzcG9uc2UuZGF0YS5pZDsKICAgICAgX3RoaXMuZm9ybU5hbWUgPSByZXNwb25zZS5kYXRhLmZvcm1OYW1lOwogICAgICBjb25zb2xlLmxvZygi5L+u5pS55ZCOZm9ybURlc2lnbklkPSIgKyBfdGhpcy5mb3JtRGVzaWduSWQpOwogICAgfSk7CiAgICBjb25zb2xlLmxvZygiY3JlYXRlZCDkuK1mb3JtRGVzaWduSWQ9IiArIHRoaXMuZm9ybURlc2lnbklkKTsKICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5yZXNpemVIYW5kbGVyKCk7CiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBfdGhpcy5yZXNpemVIYW5kbGVyKTsKICAgIH0pOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxpc3REYXRhOiBmdW5jdGlvbiBsaXN0RGF0YSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmFwcC5zaWRlYmFyLm9wZW5lZDsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBsaXN0RGF0YTogZnVuY3Rpb24gbGlzdERhdGEodmFsKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhhdC5yZXNpemVIYW5kbGVyKCk7CiAgICAgIH0sIDMwMCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbGlja1RhYmxlTmFtZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2tUYWJsZU5hbWUoZGF0YSkgewogICAgICAvLyDpgInkuK3lvZPliY3ooYwKICAgICAgdGhpcy5yb3dDbGljayhkYXRhLCBmYWxzZSk7CiAgICAgIHRoaXMuaGFuZGxlVXBkYXRlKGRhdGEpOwogICAgfSwKICAgIHJlc2l6ZUhhbmRsZXI6IGZ1bmN0aW9uIHJlc2l6ZUhhbmRsZXIoKSB7CiAgICAgIHZhciBhID0gdGhpcy4kcmVmcy5idG5zLm9mZnNldEhlaWdodDsKICAgICAgdmFyIGIgPSB0aGlzLiRyZWZzLnNlYXJjaHMub2Zmc2V0SGVpZ2h0OwogICAgICB2YXIgaCA9IGEgKyBiICsgMTggKyA0NSArIDg0ICsgMzY7CiAgICAgIGggPSBoOwogICAgICAvLyBgY2FsYygxMDB2aCAtICR7aH0pYDsKICAgICAgdGhpcy50YWJsZUhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSBoICsgInB4IjsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy50YWJsZUhlaWdodCkKICAgIH0sCiAgICBzdGF0ZUZvcm1hdDogZnVuY3Rpb24gc3RhdGVGb3JtYXQocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSkgewogICAgICB2YXIgYXJyID0gdGhpcy5saXN0czsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoYXJyW2ldLmZpZWxkTmFtZSA9PSBjb2x1bW4ucHJvcGVydHkpIHsKICAgICAgICAgIGlmIChhcnJbaV0uZmllbGROYW1lID09ICJjc190YXJnZXQiKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RJbmRleExhYmVsKGFycltpXS5vcHRpb25zLCBjZWxsVmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGljdExhYmVsKGFycltpXS5vcHRpb25zLCBjZWxsVmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8qKiDmn6Xor6Loh6rlrprkuYnooajljZXliJfooaggKi9nZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgLy8gdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgLy8gZm9ybURlc2lnbklkOnRoaXMuZm9ybURlc2lnbklkLAogICAgICAgIGZvcm1EZXNpZ25JZDogdGhpcy4kcm91dGUubmFtZQogICAgICB9OwogICAgICBjb25zb2xlLmxvZygibGlzdCDkuK1mb3JtRGVzaWduSWQ9IiArIHRoaXMuZm9ybURlc2lnbklkKTsKICAgICAgZGVwbG95TGlzdChkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICBfdGhpczIubGlzdHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzMi5saXN0czIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzMi5saXN0cykpOwogICAgICAgIF90aGlzMi5mb3JtID0gewogICAgICAgICAgbGlzdHMyOiBfdGhpczIubGlzdHMyCiAgICAgICAgfTsKICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7CiAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIubGlzdHNbaV0sIF90aGlzMi5saXN0c1tpXS5maWVsZE5hbWUsIG51bGwpOwogICAgICAgICAgX3RoaXMyLiRzZXQoX3RoaXMyLmxpc3RzW2ldLCAidmFsIiwgbnVsbCk7CiAgICAgICAgICBpZiAoX3RoaXMyLmxpc3RzW2ldLmZpZWxkVHlwZSA9PSAic2VsZWN0IikgewogICAgICAgICAgICBpZiAoX3RoaXMyLmxpc3RzW2ldLmZpZWxkTmFtZSA9PSAiY3NfdGFyZ2V0IikgewogICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICBpbmRleENvZGU6IF90aGlzMi5saXN0c1tpXS5pbmRleENvZGUsCiAgICAgICAgICAgICAgICBjb21wQ29kZTogX3RoaXMyLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJJbmZvLmRlcHRJZCAvLyDlv4XkvKAKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBsaXN0RGV0YWlsKHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRzZXQoX3RoaXMyLmxpc3RzW2ldLCAib3B0aW9ucyIsIHJlc3BvbnNlLnJvd3MpOwogICAgICAgICAgICAgICAgICBfdGhpczIudGFyZ2V0VmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLnJvd3MpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIubGlzdHNbaV0uZmllbGROYW1lID09ICJjc19kZXB0IikgewogICAgICAgICAgICAgIHZhciBfcGFyYW1zID0gewogICAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzMi4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGdldERlcHRJbmZvRm9yUG1zKF9wYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRzZXQoX3RoaXMyLmxpc3RzW2ldLCAib3B0aW9ucyIsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczIuZ2V0RGljdHMoX3RoaXMyLmxpc3RzW2ldLmRpY3RUeXBlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXMyLiRzZXQoX3RoaXMyLmxpc3RzW2ldLCAib3B0aW9ucyIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMyLmxpc3RzW2ldLmZpZWxkVHlwZSA9PSAicmFkaW8iKSB7CiAgICAgICAgICAgIF90aGlzMi5saXN0c1tpXS5vcHRpb25zID0gSlNPTi5wYXJzZShfdGhpczIubGlzdHNbaV0ub3B0aW9ucyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMyLmxpc3RzW2ldLmZpZWxkVHlwZSA9PSAiY2hlY2tib3giKSB7CiAgICAgICAgICAgIF90aGlzMi5saXN0c1tpXS5vcHRpb25zID0gSlNPTi5wYXJzZShfdGhpczIubGlzdHNbaV0ub3B0aW9ucyk7CiAgICAgICAgICAgIF90aGlzMi4kc2V0KF90aGlzMi5saXN0c1tpXSwgInZhbCIsIFtdKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChfdGhpczIubGlzdHNbaV0uZmllbGRUeXBlID09ICJkYXRlIiAmJiBfdGhpczIubGlzdHNbaV0ucXVlcnlUeXBlID09ICJiZXR3ZWVuIikgewogICAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIubGlzdHNbaV0sICJ2YWwiLCBbbW9tZW50KCkuc3RhcnRPZignbW9udGgnKS5mb3JtYXQoJ1lZWVktTU0tREQnKSwgbW9tZW50KCkuZW5kT2YoJ21vbnRoJykuZm9ybWF0KCdZWVlZLU1NLUREJyldKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMyLmxpc3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBfbG9vcChpKTsKICAgICAgICB9CiAgICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMihfaSkgewogICAgICAgICAgX3RoaXMyLiRzZXQoX3RoaXMyLmxpc3RzMltfaV0sIF90aGlzMi5saXN0czJbX2ldLmZpZWxkTmFtZSwgbnVsbCk7CiAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIubGlzdHMyW19pXSwgInZhbCIsIF90aGlzMi5saXN0czJbX2ldLmRlZmF1bHRWYWx1ZSk7CiAgICAgICAgICBpZiAoX3RoaXMyLmxpc3RzMltfaV0uZmllbGRUeXBlID09ICJzZWxlY3QiKSB7CiAgICAgICAgICAgIGlmIChfdGhpczIubGlzdHMyW19pXS5maWVsZE5hbWUgPT0gImNzX3RhcmdldCIpIHsKICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgaW5kZXhDb2RlOiBfdGhpczIubGlzdHMyW19pXS5pbmRleENvZGUsCiAgICAgICAgICAgICAgICBjb21wQ29kZTogX3RoaXMyLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJJbmZvLmRlcHRJZCAvL+W/heS8oAogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIGxpc3REZXRhaWwocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIubGlzdHMyW19pXSwgIm9wdGlvbnMiLCByZXNwb25zZS5yb3dzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIubGlzdHMyW19pXS5maWVsZE5hbWUgPT0gImNzX2RlcHQiKSB7CiAgICAgICAgICAgICAgdmFyIF9wYXJhbXMyID0gewogICAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzMi4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGdldERlcHRJbmZvRm9yUG1zKF9wYXJhbXMyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi4kc2V0KF90aGlzMi5saXN0czJbX2ldLCAib3B0aW9ucyIsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczIuZ2V0RGljdHMoX3RoaXMyLmxpc3RzMltfaV0uZGljdFR5cGUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIubGlzdHMyW19pXSwgIm9wdGlvbnMiLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMi5saXN0czJbX2ldLmZpZWxkVHlwZSA9PSAicmFkaW8iKSB7CiAgICAgICAgICAgIF90aGlzMi5saXN0czJbX2ldLm9wdGlvbnMgPSBKU09OLnBhcnNlKF90aGlzMi5saXN0czJbX2ldLm9wdGlvbnMpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMi5saXN0czJbX2ldLmZpZWxkVHlwZSA9PSAiY2hlY2tib3giKSB7CiAgICAgICAgICAgIF90aGlzMi5saXN0czJbX2ldLm9wdGlvbnMgPSBKU09OLnBhcnNlKF90aGlzMi5saXN0czJbX2ldLm9wdGlvbnMpOwogICAgICAgICAgICBfdGhpczIuJHNldChfdGhpczIubGlzdHMyW19pXSwgInZhbCIsIFtdKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBfdGhpczIubGlzdHMyLmxlbmd0aDsgX2krKykgewogICAgICAgICAgX2xvb3AyKF9pKTsKICAgICAgICB9CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5saXN0czIsJ3RoaXMubGlzdHMyLS0tJykKICAgICAgICB2YXIgbGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgLy8gY29uc29sZS5sb2cobGlzdCwnbGlzdCcpCiAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGxpc3QubGVuZ3RoOyBfaTIrKykgewogICAgICAgICAgdmFyIG9iaiA9IHt9OwogICAgICAgICAgaWYgKGxpc3RbX2kyXS5maWVsZE5hbWUgIT0gInBtc19zdGF0ZSIpIHsKICAgICAgICAgICAgaWYgKGxpc3RbX2kyXS5maWVsZE5hbWUgIT0gImRlcHRfdHJhY2siKSB7CiAgICAgICAgICAgICAgb2JqLmxhYmVsID0gbGlzdFtfaTJdLmZpZWxkRGVzYzsKICAgICAgICAgICAgICBvYmoucHJvcCA9IGxpc3RbX2kyXS5maWVsZE5hbWU7CiAgICAgICAgICAgICAgb2JqLmlzTGlzdCA9IGxpc3RbX2kyXS5pc0xpc3Q7CiAgICAgICAgICAgICAgb2JqLmZpZWxkVHlwZSA9IGxpc3RbX2kyXS5maWVsZFR5cGU7CiAgICAgICAgICAgICAgaWYgKGxpc3RbX2kyXS5maWVsZE5hbWUgPT0gJ2NzX3Njb3JlJykgewogICAgICAgICAgICAgICAgb2JqLmRlY2ltbERpZ2l0ID0gbGlzdFtfaTJdLmRlY2ltbERpZ2l0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAob2JqLnByb3AgPT0gJ2NzX2RhdGUnKSB7CiAgICAgICAgICAgICAgICBvYmouYWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9iai5wcm9wID09ICdjc19zY29yZScpIHsKICAgICAgICAgICAgICAgIG9iai5hbGlnbiA9ICdyaWdodCc7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG9iai5hbGlnbiA9ICdsZWZ0JzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYXJyLnB1c2gob2JqKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBfdGhpczIuY29scyA9IGFycjsKICAgICAgICBfdGhpczIuaGFuZGxlUXVlcnkoKTsKICAgICAgICAvLyB0aGlzLiRzZXQoIHRoaXMucXVlcnlQYXJhbXMsICJmb3JtRGVzaWduSWQiLCB0aGlzLmZvcm1EZXNpZ25JZCApCiAgICAgICAgLy8gCQl0aGlzLmdldFRhYmxlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPlua2iOaMiemSrgogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMub3BlbiA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHRoaXMuZ2V0VGFibGUoKTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5pZGQgPSBudWxsOwogICAgICB2YXIgbGlzdHMyTGVuZ3RoID0gdGhpcy5mb3JtLmxpc3RzMi5maWx0ZXIoZnVuY3Rpb24gKF8pIHsKICAgICAgICByZXR1cm4gXy5maWVsZE5hbWUgPT0gImRlcHRfdHJhY2siOwogICAgICB9KTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZvcm0ubGlzdHMyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5mb3JtLmxpc3RzMltpXS52YWwgPSB0aGlzLmZvcm0ubGlzdHMyW2ldLmRlZmF1bHRWYWx1ZTsKICAgICAgICBpZiAodGhpcy5mb3JtLmxpc3RzMltpXS5maWVsZFR5cGUgPT0gImNoZWNrYm94IikgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybS5saXN0czJbaV0sICJ2YWwiLCBbXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChsaXN0czJMZW5ndGgubGVuZ3RoICE9IDApIHsKICAgICAgICB2YXIgZ3VpZGFuY2UgPSB0aGlzLmZvcm0ubGlzdHMyLmZpbmQoZnVuY3Rpb24gKF8pIHsKICAgICAgICAgIHJldHVybiBfLmZpZWxkTmFtZSA9PSAncG1zX2d1aWRhbmNlJzsKICAgICAgICB9KTsKICAgICAgICB2YXIgcmVzdWx0UG1zID0gdGhpcy5mb3JtLmxpc3RzMi5maW5kKGZ1bmN0aW9uIChfKSB7CiAgICAgICAgICByZXR1cm4gXy5maWVsZE5hbWUgPT0gJ3Btc19yZXN1bHQnOwogICAgICAgIH0pOwogICAgICAgIGd1aWRhbmNlLmlzRWRpdCA9ICIwIjsKICAgICAgICByZXN1bHRQbXMuaXNFZGl0ID0gIjAiOwogICAgICAgIGd1aWRhbmNlLmZpZWxkVmFsdWUgPSBudWxsOwogICAgICAgIHJlc3VsdFBtcy5maWVsZFZhbHVlID0gbnVsbDsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZvcm0ubGlzdHMyLCdyZXNldCcpCiAgICAgIHRoaXMucmVzZXRGb3JtKCJmb3JtIik7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqL2hhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdmFyIGxpc3QgPSB0aGlzLmxpc3RzOwogICAgICB2YXIgZGF0YSA9IHt9OwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zW2xpc3RbaV0uZmllbGROYW1lXSA9IGxpc3RbaV0udmFsOwogICAgICB9CiAgICAgIHRoaXMuJHNldCh0aGlzLnF1ZXJ5UGFyYW1zLCAiZm9ybURlc2lnbklkIiwgdGhpcy5mb3JtRGVzaWduSWQpOwogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSAxOwogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VTaXplID0gMzA7CiAgICAgIHRoaXMuZ2V0VGFibGUoKTsKICAgIH0sCiAgICAvL+ihqOagvOaVsOaNrgogICAgZ2V0VGFibGU6IGZ1bmN0aW9uIGdldFRhYmxlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgLy8gdGhpcy4kc2V0KCB0aGlzLnF1ZXJ5UGFyYW1zLCAiZm9ybURlc2lnbklkIiwgdGhpcy5mb3JtRGVzaWduSWQgKTsKICAgICAgdGhpcy4kc2V0KHRoaXMucXVlcnlQYXJhbXMsICJmb3JtRGVzaWduSWQiLCB0aGlzLiRyb3V0ZS5uYW1lKTsKICAgICAgdGhpcy4kc2V0KHRoaXMucXVlcnlQYXJhbXMsICJjb21wX2NvZGUiLCB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJJbmZvLmRlcHRJZCk7CiAgICAgIC8vIHRlc3RGb3JtKHRoaXMucXVlcnlQYXJhbXMsdGhpcy5mb3JtRGVzaWduSWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0ZXN0Rm9ybSh0aGlzLnF1ZXJ5UGFyYW1zLCB0aGlzLiRyb3V0ZS5uYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLCdyZXMnKTsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgIF90aGlzMy5mb3JtRGVzaWduTGlzdCA9IHJlc3BvbnNlLnJvd3M7CiAgICAgICAgICBfdGhpczMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICAgIF90aGlzMy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+afpeivouiuvue9ri3ooajmoLzliJfooajmlbDmja4KICAgIGdldEZvcm1UYWJsZUxpc3Q6IGZ1bmN0aW9uIGdldEZvcm1UYWJsZUxpc3QoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLnRhYmxlTG9hZGluZyA9IHRydWU7CiAgICAgIF9nZXRGb3JtVGFibGVMaXN0KHsKICAgICAgICBmb3JtRGVzaWduSWQ6IHRoaXMuZm9ybURlc2lnbklkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXM0LmZvcm1EYXRhTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICAgICAgX3RoaXM0LmZvcm1EYXRhTGlzdDEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZS5pc1F1ZXJ5ID09IDEgJiYgaXRlLmlzTGlzdFF1ZXJ5ID09IDE7CiAgICAgICAgICB9KSkpOwogICAgICAgICAgX3RoaXM0LmZvcm1EYXRhTGlzdDIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZS5pc1NvcnQgPT0gMTsKICAgICAgICAgIH0pKSk7CiAgICAgICAgICBfdGhpczQudGFibGVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovcmVzZXRRdWVyeTogZnVuY3Rpb24gcmVzZXRRdWVyeSgpIHsKICAgICAgdmFyIGxpc3QgPSB0aGlzLmxpc3RzOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBsaXN0W2ldLnZhbCA9IG51bGw7CiAgICAgICAgaWYgKGxpc3RbaV0uZmllbGRUeXBlID09ICJjaGVja2JveCIpIHsKICAgICAgICAgIHRoaXMuJHNldChsaXN0W2ldLCAidmFsIiwgW10pOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCk7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgLy8gY29uc29sZS5sb2coc2VsZWN0aW9uKQogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgfSk7CiAgICAgIHRoaXMuc2luZ2xlID0gc2VsZWN0aW9uLmxlbmd0aCAhPT0gMTsKICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggIT09IDAgJiYgc2VsZWN0aW9uWzBdLnBtc19zdGF0ZSAmJiBzZWxlY3Rpb24ubGVuZ3RoID09IDEpIHsKICAgICAgICB0aGlzLm11bHRpcGxlID0gc2VsZWN0aW9uWzBdLnBtc19zdGF0ZSAhPT0gIjEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubXVsdGlwbGUgPSBzZWxlY3Rpb24ubGVuZ3RoICE9PSAxOwogICAgICB9CiAgICAgIHRoaXMuc2VsZWN0aW9uUm93ID0gc2VsZWN0aW9uOwogICAgfSwKICAgIHJvd0NsaWNrOiBmdW5jdGlvbiByb3dDbGljayhyb3csIGNvbHVtbiwgZXZlbnQpIHsKICAgICAgdmFyIHJlZnNFbFRhYmxlID0gdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlOwogICAgICB2YXIgZmluZFJvdyA9IHRoaXMuc2VsZWN0aW9uUm93LmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5yb3dJbmRleCA9PSByb3cucm93SW5kZXg7CiAgICAgIH0pOwogICAgICAvLyBpZiAoZmluZFJvdyAmJiB0aGlzLnNlbGVjdGlvblJvdy5sZW5ndGggPT0gMSkgewogICAgICAvLyAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIGZhbHNlKTsKICAgICAgLy8gICByZXR1cm47CiAgICAgIC8vIH0KICAgICAgcmVmc0VsVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7CiAgICB9LAogICAgcm93U3R5bGU6IGZ1bmN0aW9uIHJvd1N0eWxlKF9yZWYpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYucm93LAogICAgICAgIHJvd0luZGV4ID0gX3JlZi5yb3dJbmRleDsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJvdywgJ3Jvd0luZGV4JywgewogICAgICAgIHZhbHVlOiByb3dJbmRleCwKICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZQogICAgICB9KTsKICAgIH0sCiAgICByb3dDbGFzc05hbWU6IGZ1bmN0aW9uIHJvd0NsYXNzTmFtZShfcmVmMikgewogICAgICB2YXIgcm93ID0gX3JlZjIucm93LAogICAgICAgIHJvd0luZGV4ID0gX3JlZjIucm93SW5kZXg7CiAgICAgIHZhciByb3dOYW1lID0gIiIsCiAgICAgICAgZmluZFJvdyA9IHRoaXMuc2VsZWN0aW9uUm93LmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLnJvd0luZGV4ID09PSByb3cucm93SW5kZXg7CiAgICAgICAgfSk7CiAgICAgIGlmIChmaW5kUm93KSB7CiAgICAgICAgcm93TmFtZSA9ICJjdXJyZW50LXJvdyAiOwogICAgICB9CiAgICAgIHJldHVybiByb3dOYW1lOwogICAgfSwKICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi9oYW5kbGVBZGQ6IGZ1bmN0aW9uIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5yZXNldCgpOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLmFkZEVkaXRJZCA9ICIiOwogICAgICB0aGlzLmlzQWRkID0gdHJ1ZTsKICAgICAgdGhpcy50aXRsZSA9IHRoaXMuZm9ybU5hbWUgKyAiLea3u+WKoCI7CiAgICB9LAogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqL2hhbmRsZVVwZGF0ZTogZnVuY3Rpb24gaGFuZGxlVXBkYXRlKHJvdykgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy5pc0FkZCA9IGZhbHNlOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIHZhciBpZCA9IHJvdy5pZCB8fCB0aGlzLmlkczsKICAgICAgdGhpcy5hZGRFZGl0SWQgPSB0aGlzLmlkc1swXTsKICAgICAgdmFyIGZvcm1EZXNpZ25JZCA9IHRoaXMuZm9ybURlc2lnbklkOwogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLnRpdGxlID0gdGhpcy5mb3JtTmFtZSArICIt57yW6L6RIjsKICAgICAgZ2V0Rm9ybURldGFpbHMoZm9ybURlc2lnbklkLCBpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgbGlzdHMgPSByZXNwb25zZS5kYXRhLmRhdGFzOwogICAgICAgIF90aGlzNS5mb3JtID0gewogICAgICAgICAgbGlzdHMyOiBsaXN0cwogICAgICAgIH07CiAgICAgICAgX3RoaXM1LmlkZCA9IHJlc3BvbnNlLmRhdGEuaWQ7CiAgICAgICAgdmFyIGxpc3RzMkxlbmd0aCA9IF90aGlzNS5mb3JtLmxpc3RzMi5maWx0ZXIoZnVuY3Rpb24gKF8pIHsKICAgICAgICAgIHJldHVybiBfLmZpZWxkTmFtZSA9PSAiZGVwdF90cmFjayI7CiAgICAgICAgfSk7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mb3JtLmxpc3RzMiwnZm9ybS5saXN0czInKQogICAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoaSkgewogICAgICAgICAgX3RoaXM1LiRzZXQoX3RoaXM1LmZvcm0ubGlzdHMyW2ldLCAidmFsIiwgX3RoaXM1LmZvcm0ubGlzdHMyW2ldLmZpZWxkVmFsdWUpOwogICAgICAgICAgaWYgKF90aGlzNS5mb3JtLmxpc3RzMltpXS5maWVsZFR5cGUgPT0gInNlbGVjdCIpIHsKICAgICAgICAgICAgLy/mjIfmoIfor6bmg4XmlbDmja4KICAgICAgICAgICAgaWYgKF90aGlzNS5mb3JtLmxpc3RzMltpXS5maWVsZE5hbWUgPT0gImNzX3RhcmdldCIpIHsKICAgICAgICAgICAgICBfdGhpczUuJHNldChfdGhpczUuZm9ybS5saXN0czJbaV0sICJ2YWwiLCBudWxsKTsKICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gewogICAgICAgICAgICAgICAgaW5kZXhDb2RlOiBfdGhpczUuZm9ybS5saXN0czJbaV0uaW5kZXhDb2RlLAogICAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzNS4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQgLy8g5b+F5LygCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgbGlzdERldGFpbChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS4kc2V0KF90aGlzNS5mb3JtLmxpc3RzMltpXSwgIm9wdGlvbnMiLCByZXNwb25zZS5yb3dzKTsKICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFZhbHVlID0gcmVzcG9uc2Uucm93cy5maWx0ZXIoZnVuY3Rpb24gKF8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoXy5pZCA9PSBfdGhpczUuZm9ybS5saXN0czJbaV0uZmllbGRWYWx1ZSB8fCBfLmV2YUNvbnQgPT0gX3RoaXM1LmZvcm0ubGlzdHMyW2ldLmZpZWxkVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzNS4kc2V0KF90aGlzNS5mb3JtLmxpc3RzMltpXSwgInZhbCIsIHRhcmdldFZhbHVlWzBdLmV2YUNvbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNS5mb3JtLmxpc3RzMltpXS5maWVsZE5hbWUgPT0gImNzX2RlcHQiKSB7CiAgICAgICAgICAgICAgLy/pg6jpl6jor6bmg4XmlbDmja4KICAgICAgICAgICAgICB2YXIgX3BhcmFtczMgPSB7CiAgICAgICAgICAgICAgICBjb21wQ29kZTogX3RoaXM1LiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJJbmZvLmRlcHRJZAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgZ2V0RGVwdEluZm9Gb3JQbXMoX3BhcmFtczMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1LiRzZXQoX3RoaXM1LmZvcm0ubGlzdHMyW2ldLCAib3B0aW9ucyIsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczUuZ2V0RGljdHMoX3RoaXM1LmZvcm0ubGlzdHMyW2ldLmRpY3RUeXBlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXM1LiRzZXQoX3RoaXM1LmZvcm0ubGlzdHMyW2ldLCAib3B0aW9ucyIsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXM1LmZvcm0ubGlzdHMyW2ldLmZpZWxkVHlwZSA9PSAicmFkaW8iKSB7CiAgICAgICAgICAgIF90aGlzNS5mb3JtLmxpc3RzMltpXS5vcHRpb25zID0gSlNPTi5wYXJzZShfdGhpczUuZm9ybS5saXN0czJbaV0ub3B0aW9ucyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXM1LmZvcm0ubGlzdHMyW2ldLmZpZWxkVHlwZSA9PSAiY2hlY2tib3giKSB7CiAgICAgICAgICAgIF90aGlzNS5mb3JtLmxpc3RzMltpXS5vcHRpb25zID0gSlNPTi5wYXJzZShfdGhpczUuZm9ybS5saXN0czJbaV0ub3B0aW9ucyk7CiAgICAgICAgICAgIHZhciBhcnIgPSBfdGhpczUuZm9ybS5saXN0czJbaV0uZmllbGRWYWx1ZS5zcGxpdCgnLCcpOwogICAgICAgICAgICBfdGhpczUuJHNldChfdGhpczUuZm9ybS5saXN0czJbaV0sICJ2YWwiLCBhcnIpOwogICAgICAgICAgfQogICAgICAgICAgLy/mmK/np5HlrqTot5/ouKrml7Yt57yW6L6R5aKe5Yqg54q25oCB5Yik5patCiAgICAgICAgICBpZiAobGlzdHMyTGVuZ3RoLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgICAgIHZhciBndWlkYW5jZSA9IF90aGlzNS5mb3JtLmxpc3RzMi5maW5kKGZ1bmN0aW9uIChfKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF8uZmllbGROYW1lID09ICdwbXNfZ3VpZGFuY2UnOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIHJlc3VsdFBtcyA9IF90aGlzNS5mb3JtLmxpc3RzMi5maW5kKGZ1bmN0aW9uIChfKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF8uZmllbGROYW1lID09ICdwbXNfcmVzdWx0JzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChfdGhpczUuc2VsZWN0aW9uUm93WzBdLnBtc19zdGF0ZSA9PSAiMSIpIHsKICAgICAgICAgICAgICBndWlkYW5jZS5pc0VkaXQgPSAiMSI7CiAgICAgICAgICAgICAgcmVzdWx0UG1zLmlzRWRpdCA9ICIwIjsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczUuc2VsZWN0aW9uUm93WzBdLnBtc19zdGF0ZSA9PSAiMiIgfHwgX3RoaXM1LnNlbGVjdGlvblJvd1swXS5wbXNfc3RhdGUgPT0gIjMiKSB7CiAgICAgICAgICAgICAgZ3VpZGFuY2UuaXNFZGl0ID0gIjEiOwogICAgICAgICAgICAgIHJlc3VsdFBtcy5pc0VkaXQgPSAiMSI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZ3VpZGFuY2UuaXNFZGl0ID0gIjAiOwogICAgICAgICAgICAgIHJlc3VsdFBtcy5pc0VkaXQgPSAiMCI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXM1LmZvcm0ubGlzdHMyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBfbG9vcDMoaSk7CiAgICAgICAgfQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0aW9uUm93WzBdLCdyb3cnKQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZm9ybS5saXN0czIsJ2JpYW5qaScpCiAgICAgICAgX3RoaXM1Lm9wZW4gPSB0cnVlOwogICAgICAgIF90aGlzNS50aXRsZSA9ICLnvJbovpEiICsgX3RoaXM1LmZvcm1OYW1lOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLmZvcm0ubGlzdHMyOwogICAgICAgIC8vIHBtc19zdGF0ZQogICAgICAgIC8vIGNvbnNvbGUubG9nKGxpc3QsJ2xpc3QnKQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5mb3JtW2xpc3RbaV0uZmllbGROYW1lXSA9IGxpc3RbaV0udmFsOwogICAgICAgIH0KICAgICAgICB0aGlzLiRzZXQodGhpcy5mb3JtLCAiZm9ybURlc2lnbklkIiwgdGhpcy5mb3JtRGVzaWduSWQpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0sICJpZCIsIHRoaXMuaWRkKTsKICAgICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgdmFyIGZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNi5mb3JtKSk7CiAgICAgICAgICAgIGRlbGV0ZSBmb3JtLmxpc3RzMjsKICAgICAgICAgICAgdmFyIGJvb2wgPSBmb3JtLmhhc093blByb3BlcnR5KCdkZXB0X3RyYWNrJyk7CiAgICAgICAgICAgIGlmIChib29sICYmIF90aGlzNi5pc0FkZCkgewogICAgICAgICAgICAgIGZvcm0ucG1zX3N0YXRlID0gIjEiOwogICAgICAgICAgICAgIGZvcm0ucG1zX3Jlc3VsdCA9IG51bGw7CiAgICAgICAgICAgICAgZm9ybS5wbXNfZ3VpZGFuY2UgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBzYXZlTG9hZGluZyA9IF90aGlzNi5zYXZlTG9hZGluZygpOwogICAgICAgICAgICBmb3JtLmNzX3Njb3JlID0gZm9ybS5jc19zY29yZSA/IGZvcm0uY3Nfc2NvcmUgKiAxIDogMDsKICAgICAgICAgICAgaWYgKF90aGlzNi5mb3JtLmlkICE9IG51bGwpIHsKICAgICAgICAgICAgICBpZiAoZm9ybS5wbXNfZ3VpZGFuY2UpIHsKICAgICAgICAgICAgICAgIGZvcm0ucG1zX3N0YXRlID0gIjIiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoZm9ybS5wbXNfZ3VpZGFuY2UgJiYgZm9ybS5wbXNfcmVzdWx0KSB7CiAgICAgICAgICAgICAgICBmb3JtLnBtc19zdGF0ZSA9ICIzIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy/mjIfmoIfph43mlrDotYvlgLzkuLppZAogICAgICAgICAgICAgIHZhciBmb3JtVGFyZ2V0ID0gX3RoaXM2LnRhcmdldFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoXykgewogICAgICAgICAgICAgICAgaWYgKF8uZXZhQ29udCA9PSBmb3JtLmNzX3RhcmdldCB8fCBfLmlkID09IGZvcm0uY3NfdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmIChmb3JtVGFyZ2V0ICYmIGZvcm1UYXJnZXQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZm9ybS5jc190YXJnZXQgPSBmb3JtVGFyZ2V0WzBdLmlkOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhZGRTYXZlRm9ybShmb3JtLCBfdGhpczYuZm9ybURlc2lnbklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5tc2dTdWNjZXNzKCLnvJbovpHmiJDlip8iKTsKICAgICAgICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgX3RoaXM2Lm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3JtLmNvbXBfY29kZSA9IF90aGlzNi4kc3RvcmUuc3RhdGUudXNlci51c2VySW5mby5kZXB0SWQ7CiAgICAgICAgICAgICAgZm9ybS5jc19zY29yZSA9IGZvcm0uY3Nfc2NvcmUgKyAiIjsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmb3JtKQogICAgICAgICAgICAgIGFkZFNhdmVGb3JtKGZvcm0sIF90aGlzNi5mb3JtRGVzaWduSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXM2Lm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgICAgICBzYXZlTG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICBfdGhpczYub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLnNhdmVMb2FkaW5nKCkuY2xvc2UoKTsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflh7rplJnkuobvvIzor7fogZTns7vnrqHnkIblkZgnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIGR1cmF0aW9uOiA4MDAKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8v5p+l6K+i6K6+572u5L+d5a2YCiAgICBzdWJtaXRGb3JtU2VhcmNoU2V0OiBmdW5jdGlvbiBzdWJtaXRGb3JtU2VhcmNoU2V0KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdmFyIGZkY0xpc3QgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZvcm1EYXRhTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciB0ZW1wQXJyMSA9IHRoaXMuZm9ybURhdGFMaXN0W2ldOwogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5mb3JtRGF0YUxpc3QxLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICB2YXIgdGVtcEFycjIgPSB0aGlzLmZvcm1EYXRhTGlzdDFbal07CiAgICAgICAgICBpZiAodGVtcEFycjIuaWQgPT09IHRlbXBBcnIxLmlkKSB7CiAgICAgICAgICAgIHRlbXBBcnIxLnF1ZXJ5VHlwZSA9IHRlbXBBcnIyLnF1ZXJ5VHlwZTsKICAgICAgICAgICAgdGVtcEFycjEucXVlcnlEZWZhdWx0ID0gdGVtcEFycjIucXVlcnlEZWZhdWx0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLmZvcm1EYXRhTGlzdDIubGVuZ3RoOyBrKyspIHsKICAgICAgICAgIHZhciBfdGVtcEFyciA9IHRoaXMuZm9ybURhdGFMaXN0MltrXTsKICAgICAgICAgIGlmIChfdGVtcEFyci5pZCA9PT0gdGVtcEFycjEuaWQpIHsKICAgICAgICAgICAgdGVtcEFycjEuc29vcnRUeXBlID0gX3RlbXBBcnIuc29vcnRUeXBlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZmRjTGlzdC5wdXNoKHRlbXBBcnIxKTsKICAgICAgfQogICAgICB2YXIgc2F2ZUxvYWRpbmcgPSB0aGlzLnNhdmVMb2FkaW5nKCk7CiAgICAgIGVkaXRBZGRGb3JtRGVzaWduKHsKICAgICAgICBmZGNMaXN0OiBmZGNMaXN0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXM3Lm1zZ1N1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpOwogICAgICAgICAgX3RoaXM3LmNhbmNlbFNlYXJjaCgpOwogICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5p+l6K+i5oyJ6ZKu5pON5L2cCiAgICBoYW5kbGVTZWFyY2g6IGZ1bmN0aW9uIGhhbmRsZVNlYXJjaCgpIHsKICAgICAgdmFyIGZvcm1EZXNpZ25JZCA9IHRoaXMuZm9ybURlc2lnbklkOwogICAgICB0aGlzLmdldEZvcm1UYWJsZUxpc3QoKTsKICAgICAgdGhpcy5zZWFyY2hUaXRsZSA9ICLliqjmgIHooajljZUv5p+l6K+i6K6+572uIjsKICAgICAgdGhpcy5vcGVuX3NlYXJjaCA9IHRydWU7CiAgICB9LAogICAgLy/lhbPpl63mn6Xor6LmoYYKICAgIGNhbmNlbFNlYXJjaDogZnVuY3Rpb24gY2FuY2VsU2VhcmNoKCkgewogICAgICB0aGlzLm9wZW5fc2VhcmNoID0gZmFsc2U7CiAgICAgIHRoaXMuZ2V0VGFibGUoKTsKICAgIH0sCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB2YXIgaWRzID0gcm93LmlkIHx8IHRoaXMuaWRzOwogICAgICB2YXIgZm9ybURlc2lnbklkID0gdGhpcy5mb3JtRGVzaWduSWQ7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOiHquWumuS5ieihqOWNlee8luWPt+S4uiInICsgaWRzICsgJyLnmoTmlbDmja7pobk/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBkZWxGb3JtKGZvcm1EZXNpZ25JZCwgaWRzKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM4LmdldFRhYmxlKCk7CiAgICAgICAgX3RoaXM4Lm1zZ1N1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfQp9Ow=="},null]}