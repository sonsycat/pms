{"remainingRequest":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hrp\\zjry-pms-ui\\src\\views\\basic\\relation\\indexAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\hrp\\zjry-pms-ui\\src\\views\\basic\\relation\\indexAdd.vue","mtime":1682043104578},{"path":"D:\\hrp\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9ocnAvempyeS1wbXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiKTsKdmFyIF9yZWxhdGlvbiA9IHJlcXVpcmUoIkAvYXBpL2Jhc2ljL3JlbGF0aW9uIik7CnZhciBfb3JnU2VhcmNoID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3ZpZXdzL2NvbXBvbmVudHMvb3JnU2VhcmNoIikpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogImFkZEVkaXQiLAogIGNvbXBvbmVudHM6IHsKICAgIG9yZ1NlYXJjaDogX29yZ1NlYXJjaC5kZWZhdWx0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICLlhbPns7vliIbnsbsgLyDmlrDlop4iLAogICAgICBvcGVuRGlhbG9nOiB0aGlzLm9wZW4sCiAgICAgIC8vIOihqOWNleWPguaVsAogICAgICBmb3JtOiB7fSwKICAgICAgLy8g6KGo5Y2V5qCh6aqMCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgY29tcENvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLljZXkvY3kuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY29tcE5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLljZXkvY3kuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAi5Y2V5L2N5LiN6IO95Li656m6IiwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiCiAgICAgICAgfV0sCiAgICAgICAgcmVsYU5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLliIbnsbvlhbPns7vlkI3np7DkuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBvcGVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICByZWxhdGlvbklkczogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAiIgogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGlkOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMuaWQgPSB2YWw7CiAgICAgICAgICB0aGlzLnRpdGxlID0gIuWFs+ezu+WIhuexuyAvIOS/ruaUuSI7CiAgICAgICAgICB0aGlzLmdldERldGFpbEluZm8oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pZCA9ICIiOwogICAgICAgICAgdGhpcy50aXRsZSA9ICLlhbPns7vliIbnsbsgLyDmlrDlop4iOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgb3BlbjogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMub3BlbkRpYWxvZyA9IHZhbDsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLyoqIOaPkOS6pOaMiemSriAqL3N1Ym1pdEZvcm06IGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuJHJlZnNbImZvcm0iXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmIChfdGhpcy5mb3JtLmlkICE9IG51bGwpIHsKICAgICAgICAgICAgKDAsIF9yZWxhdGlvbi51cGRhdGVSZWxhdGlvbikoX3RoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgIF90aGlzLm1zZ1N1Y2Nlc3MoIuS/ruaUueaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7IC8vIOeItue7hOS7tuS8oOWAvCDlhbPpl63lvLnmoYYKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgKDAsIF9yZWxhdGlvbi5hZGRSZWxhdGlvbikoX3RoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgIF90aGlzLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHN1Ym1pdEZvcm1Db250aW51ZTogZnVuY3Rpb24gc3VibWl0Rm9ybUNvbnRpbnVlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKF90aGlzMi5mb3JtLmlkICE9IG51bGwpIHsKICAgICAgICAgICAgKDAsIF9yZWxhdGlvbi51cGRhdGVSZWxhdGlvbikoX3RoaXMyLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICBfdGhpczIubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7IC8vIOeItue7hOS7tuS8oOWAvCDlhbPpl63lvLnmoYYKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMyLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICgwLCBfcmVsYXRpb24uYWRkUmVsYXRpb24pKF90aGlzMi5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgX3RoaXMyLm1zZ1N1Y2Nlc3MoIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMyLnJlc2V0KCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMi5tc2dFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBjb21wQ29kZTogbnVsbCwKICAgICAgICBjb21wTmFtZTogbnVsbCwKICAgICAgICBkZXB0Q29kZTogbnVsbCwKICAgICAgICByZWxhQ29kZTogbnVsbCwKICAgICAgICByZWxhTmFtZTogbnVsbCwKICAgICAgICBkZWxGbGFnOiBudWxsLAogICAgICAgIGNyZWF0ZUJ5OiBudWxsLAogICAgICAgIGNyZWF0ZVRpbWU6IG51bGwsCiAgICAgICAgdXBkYXRlQnk6IG51bGwsCiAgICAgICAgdXBkYXRlVGltZTogbnVsbCwKICAgICAgICByZW1hcms6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZXNldEZvcm0oImZvcm0iKTsKICAgIH0sCiAgICAvLyDlj5bmtojmjInpkq4KICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiLCBmYWxzZSk7CiAgICB9LAogICAgLy8g5by55qGG5YWz6ZetCiAgICBoYW5kbGVEaWFsb2dDbG9zZTogZnVuY3Rpb24gaGFuZGxlRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgIH0sCiAgICBnZXREZXRhaWxJbmZvOiBmdW5jdGlvbiBnZXREZXRhaWxJbmZvKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLmRhdGFMb2FkaW5nKCk7CiAgICAgICgwLCBfcmVsYXRpb24uZ2V0UmVsYXRpb24pKHRoaXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICBfdGhpczMuZm9ybSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMy5tc2dFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":";;;;;;;;AA6BA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;QACAC,WACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC,WACA;UAAAH;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,EACA;QACAE,WACA;UAAAJ;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAG;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACAF;MACAG;QACA;QACA;UACA;UACA;UACA;QACA;UACA;UAEA;QACA;MACA;MACAC;MACAC;IACA;IACAR;MACAM;QACA;MACA;MACAC;IACA;EACA;EACAE;IACA,WACAC;MAAA;MACA;QACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAT;QACAV;QACAI;QACAgB;QACAC;QACAhB;QACAiB;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACA;UACAC;QACA;UACA;QACA;MACA;QACAA;MACA;IACA;EACA;AACA;AAAA","names":["name","components","orgSearch","data","title","openDialog","form","rules","compCode","required","message","trigger","compName","relaName","props","open","type","default","id","relationIds","watch","handler","deep","immediate","methods","submitForm","submitFormContinue","reset","deptCode","relaCode","delFlag","createBy","createTime","updateBy","updateTime","remark","cancel","handleDialogClose","getDetailInfo","loading"],"sourceRoot":"src/views/basic/relation","sources":["indexAdd.vue"],"sourcesContent":["<template>\n\n    <!-- 添加或修改关系分类对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"500px\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\" custom-class=\"el-button--primary\">\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-col :span=\"24\">\n          <orgSearch label=\"单位\" :queryParams=\"form\" ></orgSearch>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"分类编码\" prop=\"relaCode\">\n            <el-input v-model=\"form.relaCode\" placeholder=\"系统自动生成\" disabled/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"分类名称\" prop=\"relaName\">\n            <el-input v-model=\"form.relaName\" placeholder=\"请输入分类名称\" />\n          </el-form-item>\n        </el-col>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitFormContinue\" v-if=\"!id\">保存并继续添加</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\">保 存</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n</template>\n\n<script>\nimport { addRelation, updateRelation, getRelation } from \"@/api/basic/relation\";\nimport orgSearch from \"@/views/components/orgSearch\";\n\nexport default {\n  name: \"addEdit\",\n  components: {\n    orgSearch\n  },\n  data() {\n    return {\n      title: \"关系分类 / 新增\",\n      openDialog: this.open,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        compCode: [\n          { required: true, message: \"单位不能为空\", trigger: \"blur\" }\n        ],\n        compName: [\n          { required: true, message: \"单位不能为空\", trigger: \"blur\" },\n          { required: true, message: \"单位不能为空\", trigger: \"change\" }\n        ],\n        relaName: [\n          { required: true, message: \"分类关系名称不能为空\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: \"\"\n    },\n    relationIds: {\n      type: [String, Number],\n      default: \"\"\n    }\n  },\n  watch: {\n    id: {\n      handler(val) {\n        this.reset();\n        if (val) {\n          this.id = val;\n          this.title = \"关系分类 / 修改\";\n          this.getDetailInfo();\n        } else {\n          this.id = \"\";\n\n          this.title = \"关系分类 / 新增\";\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val;\n      },\n      deep: true\n    }\n  },\n  methods: {\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"修改成功\");\n                this.$emit(\"success\", false); // 父组件传值 关闭弹框\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          } else {\n            addRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"新增成功\");\n                this.$emit(\"success\", false);\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          }\n        }\n      });\n    },\n    submitFormContinue() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"修改成功\");\n                this.$emit(\"success\", false); // 父组件传值 关闭弹框\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          } else {\n            addRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"新增成功\");\n                this.reset();\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          }\n        }\n      });\n    },\n    reset() {\n      this.form = {\n        id: null,\n        compCode: null,\n        compName: null,\n        deptCode: null,\n        relaCode: null,\n        relaName: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null\n      };\n      this.resetForm(\"form\");\n    },\n    // 取消按钮\n    cancel() {\n      this.$emit(\"cancel\", false);\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit(\"cancel\", false);\n    },\n    getDetailInfo() {\n      const loading = this.dataLoading()                   \n      getRelation(this.id).then(response => {\n        if (response.code == 200) {\n          this.form = response.data;\n        loading.close()                          \n        } else {\n          this.msgError(response.msg);\n        }\n      }).catch(()=>{\n        loading.close();            \n      })\n    }\n  }\n};\n</script>\n"]}]}