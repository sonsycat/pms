{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\basic\\relation\\indexAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\basic\\relation\\indexAdd.vue","mtime":1682043104578},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi95cytqeC95cytqeC96anJ5LXBtcy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyIpOwp2YXIgX3JlbGF0aW9uID0gcmVxdWlyZSgiQC9hcGkvYmFzaWMvcmVsYXRpb24iKTsKdmFyIF9vcmdTZWFyY2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvdmlld3MvY29tcG9uZW50cy9vcmdTZWFyY2giKSk7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAiYWRkRWRpdCIsCiAgY29tcG9uZW50czogewogICAgb3JnU2VhcmNoOiBfb3JnU2VhcmNoLmRlZmF1bHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogIuWFs+ezu+WIhuexuyAvIOaWsOWiniIsCiAgICAgIG9wZW5EaWFsb2c6IHRoaXMub3BlbiwKICAgICAgLy8g6KGo5Y2V5Y+C5pWwCiAgICAgIGZvcm06IHt9LAogICAgICAvLyDooajljZXmoKHpqowKICAgICAgcnVsZXM6IHsKICAgICAgICBjb21wQ29kZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuWNleS9jeS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBjb21wTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuWNleS9jeS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLljZXkvY3kuI3og73kuLrnqboiLAogICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgICB9XSwKICAgICAgICByZWxhTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuWIhuexu+WFs+ezu+WQjeensOS4jeiDveS4uuepuiIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpZDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHJlbGF0aW9uSWRzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgaWQ6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgdGhpcy5pZCA9IHZhbDsKICAgICAgICAgIHRoaXMudGl0bGUgPSAi5YWz57O75YiG57G7IC8g5L+u5pS5IjsKICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsSW5mbygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmlkID0gIiI7CiAgICAgICAgICB0aGlzLnRpdGxlID0gIuWFs+ezu+WIhuexuyAvIOaWsOWiniI7CiAgICAgICAgfQogICAgICB9LAogICAgICBkZWVwOiB0cnVlLAogICAgICBpbW1lZGlhdGU6IHRydWUKICAgIH0sCiAgICBvcGVuOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5vcGVuRGlhbG9nID0gdmFsOwogICAgICB9LAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovc3VibWl0Rm9ybTogZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1siZm9ybSJdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKF90aGlzLmZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgICAgICAoMCwgX3JlbGF0aW9uLnVwZGF0ZVJlbGF0aW9uKShfdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgX3RoaXMubXNnU3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsgLy8g54i257uE5Lu25Lyg5YC8IOWFs+mXreW8ueahhgogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy5tc2dFcnJvcihyZXNwb25zZS5tc2cpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAoMCwgX3JlbGF0aW9uLmFkZFJlbGF0aW9uKShfdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgX3RoaXMubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7CiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0Rm9ybUNvbnRpbnVlOiBmdW5jdGlvbiBzdWJtaXRGb3JtQ29udGludWUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzWyJmb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLmZvcm0uaWQgIT0gbnVsbCkgewogICAgICAgICAgICAoMCwgX3JlbGF0aW9uLnVwZGF0ZVJlbGF0aW9uKShfdGhpczIuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgIF90aGlzMi5tc2dTdWNjZXNzKCLkv67mlLnmiJDlip8iKTsKICAgICAgICAgICAgICAgIF90aGlzMi4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsgLy8g54i257uE5Lu25Lyg5YC8IOWFs+mXreW8ueahhgogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczIubXNnRXJyb3IocmVzcG9uc2UubXNnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgKDAsIF9yZWxhdGlvbi5hZGRSZWxhdGlvbikoX3RoaXMyLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICBfdGhpczIubXNnU3VjY2Vzcygi5paw5aKe5oiQ5YqfIik7CiAgICAgICAgICAgICAgICBfdGhpczIucmVzZXQoKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMyLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGNvbXBDb2RlOiBudWxsLAogICAgICAgIGNvbXBOYW1lOiBudWxsLAogICAgICAgIGRlcHRDb2RlOiBudWxsLAogICAgICAgIHJlbGFDb2RlOiBudWxsLAogICAgICAgIHJlbGFOYW1lOiBudWxsLAogICAgICAgIGRlbEZsYWc6IG51bGwsCiAgICAgICAgY3JlYXRlQnk6IG51bGwsCiAgICAgICAgY3JlYXRlVGltZTogbnVsbCwKICAgICAgICB1cGRhdGVCeTogbnVsbCwKICAgICAgICB1cGRhdGVUaW1lOiBudWxsLAogICAgICAgIHJlbWFyazogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlc2V0Rm9ybSgiZm9ybSIpOwogICAgfSwKICAgIC8vIOWPlua2iOaMiemSrgogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgIH0sCiAgICAvLyDlvLnmoYblhbPpl60KICAgIGhhbmRsZURpYWxvZ0Nsb3NlOiBmdW5jdGlvbiBoYW5kbGVEaWFsb2dDbG9zZSgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2FuY2VsIiwgZmFsc2UpOwogICAgfSwKICAgIGdldERldGFpbEluZm86IGZ1bmN0aW9uIGdldERldGFpbEluZm8oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgbG9hZGluZyA9IHRoaXMuZGF0YUxvYWRpbmcoKTsKICAgICAgKDAsIF9yZWxhdGlvbi5nZXRSZWxhdGlvbikodGhpcy5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PSAyMDApIHsKICAgICAgICAgIF90aGlzMy5mb3JtID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":";;;;;;;;AA6BA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;QACAC,WACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC,WACA;UAAAH;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,EACA;QACAE,WACA;UAAAJ;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAG;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACAF;MACAG;QACA;QACA;UACA;UACA;UACA;QACA;UACA;UAEA;QACA;MACA;MACAC;MACAC;IACA;IACAR;MACAM;QACA;MACA;MACAC;IACA;EACA;EACAE;IACA,WACAC;MAAA;MACA;QACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAT;QACAV;QACAI;QACAgB;QACAC;QACAhB;QACAiB;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACA;UACAC;QACA;UACA;QACA;MACA;QACAA;MACA;IACA;EACA;AACA;AAAA","names":["name","components","orgSearch","data","title","openDialog","form","rules","compCode","required","message","trigger","compName","relaName","props","open","type","default","id","relationIds","watch","handler","deep","immediate","methods","submitForm","submitFormContinue","reset","deptCode","relaCode","delFlag","createBy","createTime","updateBy","updateTime","remark","cancel","handleDialogClose","getDetailInfo","loading"],"sourceRoot":"src/views/basic/relation","sources":["indexAdd.vue"],"sourcesContent":["<template>\n\n    <!-- 添加或修改关系分类对话框 -->\n    <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"500px\" append-to-body :close-on-click-modal=\"false\" @close=\"handleDialogClose\" custom-class=\"el-button--primary\">\n      <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\n        <el-col :span=\"24\">\n          <orgSearch label=\"单位\" :queryParams=\"form\" ></orgSearch>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"分类编码\" prop=\"relaCode\">\n            <el-input v-model=\"form.relaCode\" placeholder=\"系统自动生成\" disabled/>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"分类名称\" prop=\"relaName\">\n            <el-input v-model=\"form.relaName\" placeholder=\"请输入分类名称\" />\n          </el-form-item>\n        </el-col>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitFormContinue\" v-if=\"!id\">保存并继续添加</el-button>\n        <el-button type=\"primary\" @click=\"submitForm\">保 存</el-button>\n        <el-button @click=\"cancel\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n</template>\n\n<script>\nimport { addRelation, updateRelation, getRelation } from \"@/api/basic/relation\";\nimport orgSearch from \"@/views/components/orgSearch\";\n\nexport default {\n  name: \"addEdit\",\n  components: {\n    orgSearch\n  },\n  data() {\n    return {\n      title: \"关系分类 / 新增\",\n      openDialog: this.open,\n      // 表单参数\n      form: {},\n      // 表单校验\n      rules: {\n        compCode: [\n          { required: true, message: \"单位不能为空\", trigger: \"blur\" }\n        ],\n        compName: [\n          { required: true, message: \"单位不能为空\", trigger: \"blur\" },\n          { required: true, message: \"单位不能为空\", trigger: \"change\" }\n        ],\n        relaName: [\n          { required: true, message: \"分类关系名称不能为空\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: \"\"\n    },\n    relationIds: {\n      type: [String, Number],\n      default: \"\"\n    }\n  },\n  watch: {\n    id: {\n      handler(val) {\n        this.reset();\n        if (val) {\n          this.id = val;\n          this.title = \"关系分类 / 修改\";\n          this.getDetailInfo();\n        } else {\n          this.id = \"\";\n\n          this.title = \"关系分类 / 新增\";\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val;\n      },\n      deep: true\n    }\n  },\n  methods: {\n    /** 提交按钮 */\n    submitForm() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"修改成功\");\n                this.$emit(\"success\", false); // 父组件传值 关闭弹框\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          } else {\n            addRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"新增成功\");\n                this.$emit(\"success\", false);\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          }\n        }\n      });\n    },\n    submitFormContinue() {\n      this.$refs[\"form\"].validate(valid => {\n        if (valid) {\n          if (this.form.id != null) {\n            updateRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"修改成功\");\n                this.$emit(\"success\", false); // 父组件传值 关闭弹框\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          } else {\n            addRelation(this.form).then(response => {\n              if (response.code == 200) {\n                this.msgSuccess(\"新增成功\");\n                this.reset();\n              } else {\n                this.msgError(response.msg);\n              }\n            });\n          }\n        }\n      });\n    },\n    reset() {\n      this.form = {\n        id: null,\n        compCode: null,\n        compName: null,\n        deptCode: null,\n        relaCode: null,\n        relaName: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null\n      };\n      this.resetForm(\"form\");\n    },\n    // 取消按钮\n    cancel() {\n      this.$emit(\"cancel\", false);\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit(\"cancel\", false);\n    },\n    getDetailInfo() {\n      const loading = this.dataLoading()                   \n      getRelation(this.id).then(response => {\n        if (response.code == 200) {\n          this.form = response.data;\n        loading.close()                          \n        } else {\n          this.msgError(response.msg);\n        }\n      }).catch(()=>{\n        loading.close();            \n      })\n    }\n  }\n};\n</script>\n"]}]}