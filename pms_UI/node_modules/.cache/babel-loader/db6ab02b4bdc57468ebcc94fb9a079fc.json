{"remainingRequest":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\tool\\build\\DraggableItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\src\\views\\tool\\build\\DraggableItem.vue","mtime":1693362206000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\babel.config.js","mtime":1693361824000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\Work\\oracle_java\\pms (2)\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9Xb3JrL29yYWNsZV9qYXZhL3BtcyAoMikvcG1zX1VJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CnZhciBfdnVlZHJhZ2dhYmxlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJ2dWVkcmFnZ2FibGUiKSk7CnZhciBfcmVuZGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3V0aWxzL2dlbmVyYXRvci9yZW5kZXIiKSk7CnZhciBjb21wb25lbnRzID0gewogIGl0ZW1CdG5zOiBmdW5jdGlvbiBpdGVtQnRucyhoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgICB2YXIgX3RoaXMkJGxpc3RlbmVycyA9IHRoaXMuJGxpc3RlbmVycywKICAgICAgY29weUl0ZW0gPSBfdGhpcyQkbGlzdGVuZXJzLmNvcHlJdGVtLAogICAgICBkZWxldGVJdGVtID0gX3RoaXMkJGxpc3RlbmVycy5kZWxldGVJdGVtOwogICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAiY2xhc3MiOiAiZHJhd2luZy1pdGVtLWNvcHkiLAogICAgICAiYXR0cnMiOiB7CiAgICAgICAgInRpdGxlIjogIuWkjeWItiIKICAgICAgfSwKICAgICAgIm9uIjogewogICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7CiAgICAgICAgICBjb3B5SXRlbShlbGVtZW50LCBwYXJlbnQpOwogICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBbaCgiaSIsIHsKICAgICAgImNsYXNzIjogImVsLWljb24tY29weS1kb2N1bWVudCIKICAgIH0pXSksIGgoInNwYW4iLCB7CiAgICAgICJjbGFzcyI6ICJkcmF3aW5nLWl0ZW0tZGVsZXRlIiwKICAgICAgImF0dHJzIjogewogICAgICAgICJ0aXRsZSI6ICLliKDpmaQiCiAgICAgIH0sCiAgICAgICJvbiI6IHsKICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljayhldmVudCkgewogICAgICAgICAgZGVsZXRlSXRlbShpbmRleCwgcGFyZW50KTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgW2goImkiLCB7CiAgICAgICJjbGFzcyI6ICJlbC1pY29uLWRlbGV0ZSIKICAgIH0pXSldOwogIH0KfTsKdmFyIGxheW91dHMgPSB7CiAgY29sRm9ybUl0ZW06IGZ1bmN0aW9uIGNvbEZvcm1JdGVtKGgsIGVsZW1lbnQsIGluZGV4LCBwYXJlbnQpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgYWN0aXZlSXRlbSA9IHRoaXMuJGxpc3RlbmVycy5hY3RpdmVJdGVtOwogICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuYWN0aXZlSWQgPT09IGVsZW1lbnQuZm9ybUlkID8gJ2RyYXdpbmctaXRlbSBhY3RpdmUtZnJvbS1pdGVtJyA6ICdkcmF3aW5nLWl0ZW0nOwogICAgaWYgKHRoaXMuZm9ybUNvbmYudW5Gb2N1c2VkQ29tcG9uZW50Qm9yZGVyKSBjbGFzc05hbWUgKz0gJyB1bmZvY3VzLWJvcmRlcmVkJzsKICAgIHJldHVybiBoKCJlbC1jb2wiLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAic3BhbiI6IGVsZW1lbnQuc3BhbgogICAgICB9LAogICAgICAiY2xhc3MiOiBjbGFzc05hbWUsCiAgICAgICJuYXRpdmVPbiI6IHsKICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljayhldmVudCkgewogICAgICAgICAgYWN0aXZlSXRlbShlbGVtZW50KTsKICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgW2goImVsLWZvcm0taXRlbSIsIHsKICAgICAgImF0dHJzIjogewogICAgICAgICJsYWJlbC13aWR0aCI6IGVsZW1lbnQubGFiZWxXaWR0aCA/ICIiLmNvbmNhdChlbGVtZW50LmxhYmVsV2lkdGgsICJweCIpIDogbnVsbCwKICAgICAgICAibGFiZWwiOiBlbGVtZW50LmxhYmVsLAogICAgICAgICJyZXF1aXJlZCI6IGVsZW1lbnQucmVxdWlyZWQKICAgICAgfQogICAgfSwgW2goX3JlbmRlci5kZWZhdWx0LCB7CiAgICAgICJrZXkiOiBlbGVtZW50LnJlbmRlcktleSwKICAgICAgImF0dHJzIjogewogICAgICAgICJjb25mIjogZWxlbWVudAogICAgICB9LAogICAgICAib24iOiB7CiAgICAgICAgImlucHV0IjogZnVuY3Rpb24gaW5wdXQoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLiRzZXQoZWxlbWVudCwgJ2RlZmF1bHRWYWx1ZScsIGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pXSksIGNvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKV0pOwogIH0sCiAgcm93Rm9ybUl0ZW06IGZ1bmN0aW9uIHJvd0Zvcm1JdGVtKGgsIGVsZW1lbnQsIGluZGV4LCBwYXJlbnQpIHsKICAgIHZhciBhY3RpdmVJdGVtID0gdGhpcy4kbGlzdGVuZXJzLmFjdGl2ZUl0ZW07CiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5hY3RpdmVJZCA9PT0gZWxlbWVudC5mb3JtSWQgPyAnZHJhd2luZy1yb3ctaXRlbSBhY3RpdmUtZnJvbS1pdGVtJyA6ICdkcmF3aW5nLXJvdy1pdGVtJzsKICAgIHZhciBjaGlsZCA9IHJlbmRlckNoaWxkcmVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBpZiAoZWxlbWVudC50eXBlID09PSAnZmxleCcpIHsKICAgICAgY2hpbGQgPSBoKCJlbC1yb3ciLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgInR5cGUiOiBlbGVtZW50LnR5cGUsCiAgICAgICAgICAianVzdGlmeSI6IGVsZW1lbnQuanVzdGlmeSwKICAgICAgICAgICJhbGlnbiI6IGVsZW1lbnQuYWxpZ24KICAgICAgICB9CiAgICAgIH0sIFtjaGlsZF0pOwogICAgfQogICAgcmV0dXJuIGgoImVsLWNvbCIsIHsKICAgICAgImF0dHJzIjogewogICAgICAgICJzcGFuIjogZWxlbWVudC5zcGFuCiAgICAgIH0KICAgIH0sIFtoKCJlbC1yb3ciLCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAiZ3V0dGVyIjogZWxlbWVudC5ndXR0ZXIKICAgICAgfSwKICAgICAgImNsYXNzIjogY2xhc3NOYW1lLAogICAgICAibmF0aXZlT24iOiB7CiAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgIGFjdGl2ZUl0ZW0oZWxlbWVudCk7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIFtoKCJzcGFuIiwgewogICAgICAiY2xhc3MiOiAiY29tcG9uZW50LW5hbWUiCiAgICB9LCBbZWxlbWVudC5jb21wb25lbnROYW1lXSksIGgoX3Z1ZWRyYWdnYWJsZS5kZWZhdWx0LCB7CiAgICAgICJhdHRycyI6IHsKICAgICAgICAibGlzdCI6IGVsZW1lbnQuY2hpbGRyZW4sCiAgICAgICAgImFuaW1hdGlvbiI6IDM0MCwKICAgICAgICAiZ3JvdXAiOiAiY29tcG9uZW50c0dyb3VwIgogICAgICB9LAogICAgICAiY2xhc3MiOiAiZHJhZy13cmFwcGVyIgogICAgfSwgW2NoaWxkXSksIGNvbXBvbmVudHMuaXRlbUJ0bnMuYXBwbHkodGhpcywgYXJndW1lbnRzKV0pXSk7CiAgfQp9OwpmdW5jdGlvbiByZW5kZXJDaGlsZHJlbihoLCBlbGVtZW50LCBpbmRleCwgcGFyZW50KSB7CiAgdmFyIF90aGlzMiA9IHRoaXM7CiAgaWYgKCFBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pKSByZXR1cm4gbnVsbDsKICByZXR1cm4gZWxlbWVudC5jaGlsZHJlbi5tYXAoZnVuY3Rpb24gKGVsLCBpKSB7CiAgICB2YXIgbGF5b3V0ID0gbGF5b3V0c1tlbC5sYXlvdXRdOwogICAgaWYgKGxheW91dCkgewogICAgICByZXR1cm4gbGF5b3V0LmNhbGwoX3RoaXMyLCBoLCBlbCwgaSwgZWxlbWVudC5jaGlsZHJlbik7CiAgICB9CiAgICByZXR1cm4gbGF5b3V0SXNOb3RGb3VuZCgpOwogIH0pOwp9CmZ1bmN0aW9uIGxheW91dElzTm90Rm91bmQoKSB7CiAgdGhyb3cgbmV3IEVycm9yKCJcdTZDQTFcdTY3MDlcdTRFMEUiLmNvbmNhdCh0aGlzLmVsZW1lbnQubGF5b3V0LCAiXHU1MzM5XHU5MTREXHU3Njg0bGF5b3V0IikpOwp9CnZhciBfZGVmYXVsdCA9IHsKICBjb21wb25lbnRzOiB7CiAgICByZW5kZXI6IF9yZW5kZXIuZGVmYXVsdCwKICAgIGRyYWdnYWJsZTogX3Z1ZWRyYWdnYWJsZS5kZWZhdWx0CiAgfSwKICBwcm9wczogWydlbGVtZW50JywgJ2luZGV4JywgJ2RyYXdpbmdMaXN0JywgJ2FjdGl2ZUlkJywgJ2Zvcm1Db25mJ10sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIGxheW91dCA9IGxheW91dHNbdGhpcy5lbGVtZW50LmxheW91dF07CiAgICBpZiAobGF5b3V0KSB7CiAgICAgIHJldHVybiBsYXlvdXQuY2FsbCh0aGlzLCBoLCB0aGlzLmVsZW1lbnQsIHRoaXMuaW5kZXgsIHRoaXMuZHJhd2luZ0xpc3QpOwogICAgfQogICAgcmV0dXJuIGxheW91dElzTm90Rm91bmQoKTsKICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":";;;;;;;;AACA;AACA;AAEA;EACAA;IACA;MAAAC;MAAAC;IACA;MAAA,SACA;MAAA;QAAA;MAAA;MAAA;QAAA;UACAD;UAAAE;QACA;MAAA;IAAA;MAAA,SACA;IAAA;MAAA,SAEA;MAAA;QAAA;MAAA;MAAA;QAAA;UACAD;UAAAC;QACA;MAAA;IAAA;MAAA,SACA;IAAA,KAEA;EACA;AACA;AACA;EACAC;IAAA;IACA;IACA;IACA;IACA;MAAA;QAAA,QACAC;MAAA;MAAA;MAAA;QAAA,SACA;UAAAC;UAAAH;QAAA;MAAA;IAAA;MAAA;QAAA,eACAE;QAAA,SACAA;QAAA;MAAA;IAAA;MAAA,OACAA;MAAA;QAAA;MAAA;MAAA;QAAA;UACA;QACA;MAAA;IAAA,MAEAE;EAGA;EACAC;IACA;IACA;IACA;IACA;MACAC;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,IACAA,OACA;IACA;IACA;MAAA;QAAA,QACAJ;MAAA;IAAA;MAAA;QAAA,UACAA;MAAA;MAAA;MAAA;QAAA,SACA;UAAAC;UAAAH;QAAA;MAAA;IAAA;MAAA,SACA;IAAA;MAAA;QAAA,QACAE;QAAA;QAAA;MAAA;MAAA;IAAA,IACAI,SAEAF;EAIA;AACA;AAEA;EAAA;EACA;EACA;IACA;IACA;MACA;IACA;IACA;EACA;AACA;AAEA;EACA;AACA;AAAA,eAEA;EACAA;IACAG;IACAC;EACA;EACAC,QACA,WACA,SACA,eACA,YACA,WACA;EACAF;IACA;IAEA;MACA;IACA;IACA;EACA;AACA;AAAA","names":["itemBtns","copyItem","deleteItem","event","colFormItem","element","activeItem","components","rowFormItem","child","render","draggable","props"],"sourceRoot":"src/views/tool/build","sources":["DraggableItem.vue"],"sourcesContent":["<script>\r\nimport draggable from 'vuedraggable'\r\nimport render from '@/utils/generator/render'\r\n\r\nconst components = {\r\n  itemBtns(h, element, index, parent) {\r\n    const { copyItem, deleteItem } = this.$listeners\r\n    return [\r\n      <span class=\"drawing-item-copy\" title=\"复制\" onClick={event => {\r\n        copyItem(element, parent); event.stopPropagation()\r\n      }}>\r\n        <i class=\"el-icon-copy-document\" />\r\n      </span>,\r\n      <span class=\"drawing-item-delete\" title=\"删除\" onClick={event => {\r\n        deleteItem(index, parent); event.stopPropagation()\r\n      }}>\r\n        <i class=\"el-icon-delete\" />\r\n      </span>\r\n    ]\r\n  }\r\n}\r\nconst layouts = {\r\n  colFormItem(h, element, index, parent) {\r\n    const { activeItem } = this.$listeners\r\n    let className = this.activeId === element.formId ? 'drawing-item active-from-item' : 'drawing-item'\r\n    if (this.formConf.unFocusedComponentBorder) className += ' unfocus-bordered'\r\n    return (\r\n      <el-col span={element.span} class={className}\r\n        nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\r\n        <el-form-item label-width={element.labelWidth ? `${element.labelWidth}px` : null}\r\n          label={element.label} required={element.required}>\r\n          <render key={element.renderKey} conf={element} onInput={ event => {\r\n            this.$set(element, 'defaultValue', event)\r\n          }} />\r\n        </el-form-item>\r\n        {components.itemBtns.apply(this, arguments)}\r\n      </el-col>\r\n    )\r\n  },\r\n  rowFormItem(h, element, index, parent) {\r\n    const { activeItem } = this.$listeners\r\n    const className = this.activeId === element.formId ? 'drawing-row-item active-from-item' : 'drawing-row-item'\r\n    let child = renderChildren.apply(this, arguments)\r\n    if (element.type === 'flex') {\r\n      child = <el-row type={element.type} justify={element.justify} align={element.align}>\r\n              {child}\r\n            </el-row>\r\n    }\r\n    return (\r\n      <el-col span={element.span}>\r\n        <el-row gutter={element.gutter} class={className}\r\n          nativeOnClick={event => { activeItem(element); event.stopPropagation() }}>\r\n          <span class=\"component-name\">{element.componentName}</span>\r\n          <draggable list={element.children} animation={340} group=\"componentsGroup\" class=\"drag-wrapper\">\r\n            {child}\r\n          </draggable>\r\n          {components.itemBtns.apply(this, arguments)}\r\n        </el-row>\r\n      </el-col>\r\n    )\r\n  }\r\n}\r\n\r\nfunction renderChildren(h, element, index, parent) {\r\n  if (!Array.isArray(element.children)) return null\r\n  return element.children.map((el, i) => {\r\n    const layout = layouts[el.layout]\r\n    if (layout) {\r\n      return layout.call(this, h, el, i, element.children)\r\n    }\r\n    return layoutIsNotFound()\r\n  })\r\n}\r\n\r\nfunction layoutIsNotFound() {\r\n  throw new Error(`没有与${this.element.layout}匹配的layout`)\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    render,\r\n    draggable\r\n  },\r\n  props: [\r\n    'element',\r\n    'index',\r\n    'drawingList',\r\n    'activeId',\r\n    'formConf'\r\n  ],\r\n  render(h) {\r\n    const layout = layouts[this.element.layout]\r\n\r\n    if (layout) {\r\n      return layout.call(this, h, this.element, this.index, this.drawingList)\r\n    }\r\n    return layoutIsNotFound()\r\n  }\r\n}\r\n</script>\r\n"]}]}