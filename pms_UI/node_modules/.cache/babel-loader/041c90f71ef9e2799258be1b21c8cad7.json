{"remainingRequest":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work\\pms_oracle\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\pms_oracle\\pms_UI\\src\\views\\tool\\formDesign\\formMaking\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work\\pms_oracle\\pms_UI\\src\\views\\tool\\formDesign\\formMaking\\index.vue","mtime":1693362206000},{"path":"D:\\work\\pms_oracle\\pms_UI\\babel.config.js","mtime":1693361824000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924000},{"path":"D:\\work\\pms_oracle\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfdXRpbHMgPSByZXF1aXJlKCJAL2FwaS91dGlscyIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1OYW1lOiAnJywKICAgICAganNvbkRhdGE6IHsKICAgICAgICBsaXN0OiBbXQogICAgICB9LAogICAgICBmb3JtRGVzaWduSWQ6ICIiCiAgICB9OwogIH0sCiAgY29tcG9uZW50czoge30sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmZvcm1EZXNpZ25JZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmZvcm1EZXNpZ25JZDsKICAgIHZhciBkYXRhID0gewogICAgICBmb3JtRGVzaWduSWQ6IHRoaXMuZm9ybURlc2lnbklkCiAgICB9OwogICAgdGhpcy5oYW5kbGVGb3JtUmVhZHkoKTsKICAgICgwLCBfdXRpbHMuZ2V0Rm9ybSkoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB2YXIganNvbnMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuZm9ybUpzb24pOwogICAgICBjb25zb2xlLmxvZyhqc29ucyk7CiAgICAgIF90aGlzLmpzb25EYXRhID0ganNvbnM7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOW8ueahhuWFs+mXrQogICAgaGFuZGxlRGlhbG9nQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZURpYWxvZ0Nsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCJjYW5jZWwiLCBmYWxzZSk7CiAgICB9LAogICAgaGFuZGxlRm9ybVJlYWR5OiBmdW5jdGlvbiBoYW5kbGVGb3JtUmVhZHkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgZm9ybURlc2lnbklkID0gdGhpcy5mb3JtRGVzaWduSWQ7CiAgICAgICgwLCBfdXRpbHMuZ2V0Rm9ybURlc2lnbikoZm9ybURlc2lnbklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICB2YXIgZm9ybUpzb24gPSByZXNwb25zZS5kYXRhLmZvcm1Kc29uOwogICAgICAgIGlmIChmb3JtSnNvbiAhPSBudWxsICYmIGZvcm1Kc29uICE9ICcnKSB7CiAgICAgICAgICBfdGhpczIuJHJlZnMubWFraW5nZm9ybS5zZXRKU09OKEpTT04ucGFyc2UoZm9ybUpzb24pKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIGpzb24gPSB0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uZ2V0SlNPTigpOwogICAgICAoMCwgX3V0aWxzLnNhdmVEZXNpZ24pKHRoaXMuZm9ybURlc2lnbklkLCBqc29uLCB0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uZ2V0SHRtbCgpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICBfdGhpczMubXNnU3VjY2Vzcygi5L+d5a2Y5oiQ5YqfIik7CiAgICAgICAgX3RoaXMzLmNsb3NlKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbFZpZXcnLCB0aGlzLiRyb3V0ZSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL3Rvb2wvZm9ybURlc2lnbicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHQ6IERhdGUubm93KCkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;AA2BA;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;IACA;MACAC;MACAC;QACAC;MACA;MACAC;IAEA;EACA;EACAC;EACAC;IAAA;IACA;IACA;MACAF;IACA;IACA;IACA;MACAG;MACA;MACAA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAH;QACA;QACA;UACA;QACA;MACA;IACA;IACAI;MAAA;MACA;MACA;QACAJ;QACA;QACA;MACA;IACA;IACAK;MACA;MACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA;IACA;EACA;AAEA;AAAA","names":["data","formName","jsonData","list","formDesignId","components","created","console","methods","handleDialogClose","handleFormReady","handleSubmit","close","path","query","t"],"sourceRoot":"src/views/tool/formDesign/formMaking","sources":["index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"dynamicForm\">\r\n\t  <!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\r\n\t  <fm-making-form \r\n\t    ref=\"makingform\" \r\n\t    style=\"height:600px;display: block;\" \r\n\t    preview \r\n\t    generate-code \r\n    \tgenerate-json\r\n\t  >\r\n\t  <!-- 头部内容自定义，添加提交按钮 -->\r\n\t    <template slot=\"action\">\r\n\t        <el-button type=\"primary\" @click=\"handleSubmit\">保存</el-button>\r\n\t    </template>\r\n\t  </fm-making-form>\r\n\t  \r\n\t  \t<div class=\"list-wraper previewForm\">\r\n        \t<fm-generate-form \r\n            \t:data=\"jsonData\" \r\n            \tref=\"generateForm\">\r\n        \t</fm-generate-form>\r\n        \t<!--<el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>-->\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { saveDesign,getForm,getFormDesign } from '@/api/utils'\t\r\nexport default {\r\n    data(){\r\n        return{\r\n          formName:'',\r\n          jsonData:{\r\n          \tlist:[],\r\n          },\r\n          formDesignId:\"\",\r\n          \r\n        }\r\n    },\r\n    components:{},\r\n    created() {\r\n        this.formDesignId = this.$route.query.formDesignId\r\n        let data = {\r\n        \tformDesignId:this.formDesignId\r\n        }\r\n        this.handleFormReady();\r\n     getForm(data).then(response => {\r\n     \tconsole.log(response);\r\n     \tlet jsons = JSON.parse(response.data.formJson)\r\n     \tconsole.log(jsons);\r\n     \tthis.jsonData = jsons\r\n     })\r\n    },\r\n    methods:{\r\n\t\t// 弹框关闭\r\n\t\thandleDialogClose() {\r\n\t\t\tthis.$emit(\"cancel\", false);\r\n\t\t},\r\n    \thandleFormReady () {\r\n\t        const formDesignId = this.formDesignId;\r\n\t        getFormDesign(formDesignId).then(response => {\r\n\t        \tconsole.log(response)\r\n\t            const formJson = response.data.formJson;\r\n\t            if(formJson != null && formJson != '') {\r\n\t              this.$refs.makingform.setJSON(JSON.parse(formJson))\r\n\t            }\r\n\t        });\r\n\t    },\r\n        handleSubmit () {\r\n            const json = this.$refs.makingform.getJSON();\r\n            saveDesign(this.formDesignId, json, this.$refs.makingform.getHtml()).then(response => {\r\n        \t\tconsole.log(response);\r\n        \t\tthis.msgSuccess(\"保存成功\");\r\n        \t\tthis.close();\r\n\t        })\r\n        },\r\n        close() {\r\n        \tthis.$store.dispatch('tagsView/delView', this.$route)\r\n        \tthis.$router.push({ path:'/tool/formDesign', query: { t: Date.now() } })\r\n      \t},\r\n    },\r\n    \r\n}\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}