{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\subsidy\\formDesign\\formMaking\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\subsidy\\formDesign\\formMaking\\index.vue","mtime":1693362206314},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\babel.config.js","mtime":1693361824517},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnZhciBfZm9ybVByb2Nlc3MgPSByZXF1aXJlKCJAL2FwaS9zdWJzaWR5L2Zvcm1Qcm9jZXNzIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybU5hbWU6ICcnLAogICAgICBqc29uRGF0YTogewogICAgICAgIGxpc3Q6IFtdCiAgICAgIH0sCiAgICAgIGZvcm1EZXNpZ25JZDogIiIKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7fSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mb3JtRGVzaWduSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5mb3JtRGVzaWduSWQ7CiAgICB2YXIgZGF0YSA9IHsKICAgICAgZm9ybURlc2lnbklkOiB0aGlzLmZvcm1EZXNpZ25JZAogICAgfTsKICAgIHRoaXMuaGFuZGxlRm9ybVJlYWR5KCk7CiAgICAvLyAgICAgIGdldEZvcm0oZGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAvLyAgICAgIAljb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAvLyAgICAgIAlsZXQganNvbnMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuZm9ybUpzb24pCiAgICAvLyAgICAgIAljb25zb2xlLmxvZyhqc29ucyk7CiAgICAvLy8vICAgICAgCXRoaXMuanNvbkRhdGEgPSBqc29ucwogICAgLy8gICAgICB9KQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUZvcm1SZWFkeTogZnVuY3Rpb24gaGFuZGxlRm9ybVJlYWR5KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgZm9ybURlc2lnbklkID0gdGhpcy5mb3JtRGVzaWduSWQ7CiAgICAgICgwLCBfZm9ybVByb2Nlc3MuZ2V0Rm9ybURlc2lnbikoZm9ybURlc2lnbklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICB2YXIgZm9ybUpzb24gPSByZXNwb25zZS5kYXRhLmZvcm1Kc29uOwogICAgICAgIGlmIChmb3JtSnNvbiAhPSBudWxsICYmIGZvcm1Kc29uICE9ICcnKSB7CiAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZm9ybUpzb24pOwogICAgICAgICAgZGF0YS5zaXplID0gIm1pbmkiOwogICAgICAgICAgZGF0YS5saXN0LmZvckVhY2goZnVuY3Rpb24gKF8pIHsKICAgICAgICAgICAgXy5zaXplID0gIm1pbmkiOwogICAgICAgICAgICBfLm9wdGlvbnMuZGlzYWJsZWQgPSBfLm9wdGlvbnMuZGlzYWJsZWQgPT0gImZhbHNlIiA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgXy5vcHRpb25zLnJlcXVpcmVkID0gXy5vcHRpb25zLnJlcXVpcmVkID09ICJmYWxzZSIgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgIF8uY29sdW1ucyAmJiBfLmNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgaXRlLnNwYW4gPSBpdGUuc3BhbiAqIDE7CiAgICAgICAgICAgICAgaXRlLmxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgaXRlbS5zaXplID0gIm1pbmkiOwogICAgICAgICAgICAgICAgaXRlbS5vcHRpb25zLmRpc2FibGVkID0gaXRlbS5vcHRpb25zLmRpc2FibGVkID09ICJmYWxzZSIgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgICAgICAgICBpdGVtLm9wdGlvbnMucmVxdWlyZWQgPSBpdGVtLm9wdGlvbnMucmVxdWlyZWQgPT0gImZhbHNlIiA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIF90aGlzLiRyZWZzLm1ha2luZ2Zvcm0uc2V0SlNPTihkYXRhKTsKICAgICAgICAgIH0gY2F0Y2ggKGQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBqc29uID0gdGhpcy4kcmVmcy5tYWtpbmdmb3JtLmdldEpTT04oKTsKICAgICAgdmFyIHNhdmVMb2FkaW5nID0gdGhpcy5zYXZlTG9hZGluZygpOwogICAgICAoMCwgX2Zvcm1Qcm9jZXNzLnNhdmVEZXNpZ24pKHRoaXMuZm9ybURlc2lnbklkLCBqc29uLCB0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uZ2V0SHRtbCgpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5tc2dTdWNjZXNzKCLkv53lrZjmiJDlip8iKTsKICAgICAgICBzYXZlTG9hZGluZy5jbG9zZSgpOwogICAgICAgIF90aGlzMi5jbG9zZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxWaWV3JywgdGhpcy4kcm91dGUpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9jbGJ0L0NMQlRaRFkvQ0xaRFlCRCcsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHQ6IERhdGUubm93KCkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;AA2BA;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;IACA;MACAC;MACAC;QACAC;MACA;MACAC;IAEA;EACA;EACAC;EACAC;IACA;IACA;MACAF;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;;EACAG;IACAC;MAAA;MACA;MACA;QACAC;QACA;QACA;UACA;UACAT;UACAA;YACAU;YACAA;YACAA;YACAA;cACAC;cACAA;gBACAC;gBACAA;gBACAA;cACA;YACA;UACA;UACA;YACA;UACA;YACAH;UACA;QACA;MACA;IACA;IACAI;MAAA;MACA;MACA;MACA;QACA;QACAC;QACA;MACA;IACA;IACAC;MACA;MACA;QAAAC;QAAAC;UAAAC;QAAA;MAAA;IACA;EACA;AAEA;AAAA","names":["data","formName","jsonData","list","formDesignId","components","created","methods","handleFormReady","console","_","ite","item","handleSubmit","saveLoading","close","path","query","t"],"sourceRoot":"src/views/subsidy/formDesign/formMaking","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"dynamicForm\">\n    <!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\n    <fm-making-form\n      ref=\"makingform\"\n      style=\"height:600px;display: block;\"\n      preview\n      generate-code\n      generate-json\n    >\n      <!-- 头部内容自定义，添加提交按钮 -->\n      <template slot=\"action\">\n        <el-button type=\"primary\" @click=\"handleSubmit\">保存</el-button>\n      </template>\n    </fm-making-form>\n\n    <div class=\"list-wraper previewForm\">\n      <fm-generate-form\n        :data=\"jsonData\"\n        ref=\"generateForm\">\n      </fm-generate-form>\n      <!--<el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button>-->\n    </div>\n  </div>\n</template>\n\n<script>\nimport {saveDesign, getForm, getFormDesign} from '@/api/subsidy/formProcess'\n\nexport default {\n  data() {\n    return {\n      formName: '',\n      jsonData: {\n        list: [],\n      },\n      formDesignId: \"\",\n\n    }\n  },\n  components: {},\n  created() {\n    this.formDesignId = this.$route.query.formDesignId\n    let data = {\n      formDesignId: this.formDesignId\n    }\n    this.handleFormReady();\n//      getForm(data).then(response => {\n//      \tconsole.log(response);\n//      \tlet jsons = JSON.parse(response.data.formJson)\n//      \tconsole.log(jsons);\n////      \tthis.jsonData = jsons\n//      })\n  },\n  methods: {\n    handleFormReady() {\n      const formDesignId = this.formDesignId;\n      getFormDesign(formDesignId).then(response => {\n        console.log(response)\n        const formJson = response.data.formJson;\n        if (formJson != null && formJson != '') {\n          let data = JSON.parse(formJson);\n          data.size = \"mini\"\n          data.list.forEach(_ => {\n            _.size = \"mini\";\n            _.options.disabled = _.options.disabled == \"false\" ? false : true;\n            _.options.required = _.options.required == \"false\" ? false : true;\n            _.columns && _.columns.forEach(ite => {\n              ite.span = ite.span * 1;\n              ite.list.forEach(item => {\n                item.size = \"mini\";\n                item.options.disabled = item.options.disabled == \"false\" ? false : true;\n                item.options.required = item.options.required == \"false\" ? false : true;\n              })\n            })\n          })\n          try {\n            this.$refs.makingform.setJSON(data)\n          } catch (d) {\n            console.log(d)\n          }\n        }\n      });\n    },\n    handleSubmit() {\n      const json = this.$refs.makingform.getJSON();\n      let saveLoading = this.saveLoading()\n      saveDesign(this.formDesignId, json, this.$refs.makingform.getHtml()).then(response => {\n        this.msgSuccess(\"保存成功\");\n        saveLoading.close()\n        this.close();\n      })\n    },\n    close() {\n      this.$store.dispatch('tagsView/delView', this.$route)\n      this.$router.push({path: '/clbt/CLBTZDY/CLZDYBD', query: {t: Date.now()}})\n    },\n  },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dynamicForm {\n  ::v-deep .el-aside {\n    width: 310px !important;\n\n    &.widget-config-container {\n      width: 350px !important;\n\n      .el-form-item__content {\n        margin-left: 0 !important\n      }\n    }\n  }\n}\n</style>\n"]}]}