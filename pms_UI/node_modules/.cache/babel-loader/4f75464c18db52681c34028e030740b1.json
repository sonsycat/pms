{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\system\\role\\selectUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\system\\role\\selectUser.vue","mtime":1693362206550},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\babel.config.js","mtime":1693361824517},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiKTsKdmFyIF9yb2xlID0gcmVxdWlyZSgiQC9hcGkvc3lzdGVtL3JvbGUiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gewogIHByb3BzOiB7CiAgICAvLyDop5LoibLnvJblj7cKICAgIHJvbGVJZDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpga7nvanlsYIKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIC8vIOmAieS4reaVsOe7hOWAvAogICAgICB1c2VySWRzOiBbXSwKICAgICAgLy8g5oC75p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDmnKrmjojmnYPnlKjmiLfmlbDmja4KICAgICAgdXNlckxpc3Q6IFtdLAogICAgICAvLyDnirbmgIHmlbDmja7lrZflhbgKICAgICAgc3RhdHVzT3B0aW9uczogW10sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBxdWVyeVBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHJvbGVJZDogdW5kZWZpbmVkLAogICAgICAgIHVzZXJOYW1lOiB1bmRlZmluZWQsCiAgICAgICAgcGhvbmVudW1iZXI6IHVuZGVmaW5lZAogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmdldERpY3RzKCJzeXNfbm9ybWFsX2Rpc2FibGUiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy5zdGF0dXNPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pi+56S65by55qGGCiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnJvbGVJZCA9IHRoaXMucm9sZUlkOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBjbGlja1JvdzogZnVuY3Rpb24gY2xpY2tSb3cocm93KSB7CiAgICAgIHRoaXMuJHJlZnMudGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7CiAgICB9LAogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgdGhpcy51c2VySWRzID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnVzZXJJZDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5p+l6K+i6KGo5pWw5o2uCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgKDAsIF9yb2xlLnVuYWxsb2NhdGVkVXNlckxpc3QpKHRoaXMucXVlcnlQYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi51c2VyTGlzdCA9IHJlcy5yb3dzOwogICAgICAgIF90aGlzMi50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqL2hhbmRsZVF1ZXJ5OiBmdW5jdGlvbiBoYW5kbGVRdWVyeSgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqL3Jlc2V0UXVlcnk6IGZ1bmN0aW9uIHJlc2V0UXVlcnkoKSB7CiAgICAgIHRoaXMucmVzZXRGb3JtKCJxdWVyeUZvcm0iKTsKICAgICAgdGhpcy5oYW5kbGVRdWVyeSgpOwogICAgfSwKICAgIC8qKiDpgInmi6nmjojmnYPnlKjmiLfmk43kvZwgKi9oYW5kbGVTZWxlY3RVc2VyOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RVc2VyKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIHJvbGVJZCA9IHRoaXMucXVlcnlQYXJhbXMucm9sZUlkOwogICAgICB2YXIgdXNlcklkcyA9IHRoaXMudXNlcklkcy5qb2luKCIsIik7CiAgICAgICgwLCBfcm9sZS5hdXRoVXNlclNlbGVjdEFsbCkoewogICAgICAgIHJvbGVJZDogcm9sZUlkLAogICAgICAgIHVzZXJJZHM6IHVzZXJJZHMKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzMy52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgICBfdGhpczMuJGVtaXQoIm9rIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":";;;;;;;;AA6DA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;IACA;IACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;QACAC;QACAV;QACAW;QACAC;MACA;IACA;EACA;EACAC;IAAA;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;IACA;IACA,aACAC;MACA;MACA;IACA;IACA,aACAC;MACA;MACA;IACA;IACA,eACAC;MAAA;MACA;MACA;MACA;QAAArB;QAAAI;MAAA;QACA;QACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA","names":["props","roleId","type","data","visible","userIds","total","userList","statusOptions","queryParams","pageNum","pageSize","userName","phonenumber","created","methods","show","clickRow","handleSelectionChange","getList","handleQuery","resetQuery","handleSelectUser"],"sourceRoot":"src/views/system/role","sources":["selectUser.vue"],"sourcesContent":["<template>\n  <!-- 授权用户 -->\n  <el-dialog title=\"选择用户\" :visible.sync=\"visible\" width=\"800px\" top=\"5vh\" append-to-body>\n    <el-form :model=\"queryParams\" ref=\"queryForm\" :inline=\"true\">\n      <el-form-item label=\"用户名称\" prop=\"userName\">\n        <el-input\n          v-model=\"queryParams.userName\"\n          placeholder=\"请输入用户名称\"\n          clearable\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item label=\"手机号码\" prop=\"phonenumber\">\n        <el-input\n          v-model=\"queryParams.phonenumber\"\n          placeholder=\"请输入手机号码\"\n          clearable\n          size=\"small\"\n          @keyup.enter.native=\"handleQuery\"\n        />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n    <el-row>\n      <el-table @row-click=\"clickRow\" ref=\"table\" :data=\"userList\" @selection-change=\"handleSelectionChange\" height=\"260px\">\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column label=\"用户名称\" align=\"left\" prop=\"userName\" :show-overflow-tooltip=\"true\" />\n        <el-table-column label=\"用户昵称\" align=\"left\" prop=\"nickName\" :show-overflow-tooltip=\"true\" />\n        <el-table-column label=\"邮箱\" align=\"center\" prop=\"email\" :show-overflow-tooltip=\"true\" />\n        <el-table-column label=\"手机\" align=\"right\" prop=\"phonenumber\" :show-overflow-tooltip=\"true\" />\n        <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\n          <template slot-scope=\"scope\">\n            <dict-tag :options=\"statusOptions\" :value=\"scope.row.status\"/>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\n          <template slot-scope=\"scope\">\n            <span>{{ parseTime(scope.row.createTime) }}</span>\n          </template>\n        </el-table-column>\n      </el-table>\n      <pagination\n        v-show=\"total>0\"\n        :total=\"total\"\n        :page.sync=\"queryParams.pageNum\"\n        :limit.sync=\"queryParams.pageSize\"\n        @pagination=\"getList\"\n      />\n    </el-row>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button type=\"primary\" @click=\"handleSelectUser\">确 定</el-button>\n      <el-button @click=\"visible = false\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  import { unallocatedUserList, authUserSelectAll } from \"@/api/system/role\";\n  export default {\n    props: {\n      // 角色编号\n      roleId: {\n        type: String\n      }\n    },\n    data() {\n      return {\n        // 遮罩层\n        visible: false,\n        // 选中数组值\n        userIds: [],\n        // 总条数\n        total: 0,\n        // 未授权用户数据\n        userList: [],\n        // 状态数据字典\n        statusOptions: [],\n        // 查询参数\n        queryParams: {\n          pageNum: 1,\n          pageSize: 10,\n          roleId: undefined,\n          userName: undefined,\n          phonenumber: undefined\n        }\n      };\n    },\n    created() {\n      this.getDicts(\"sys_normal_disable\").then(response => {\n        this.statusOptions = response.data;\n      });\n    },\n    methods: {\n      // 显示弹框\n      show() {\n        this.queryParams.roleId = this.roleId;\n        this.getList();\n        this.visible = true;\n      },\n      clickRow(row) {\n        this.$refs.table.toggleRowSelection(row);\n      },\n      // 多选框选中数据\n      handleSelectionChange(selection) {\n        this.userIds = selection.map(item => item.userId);\n      },\n      // 查询表数据\n      getList() {\n        unallocatedUserList(this.queryParams).then(res => {\n          this.userList = res.rows;\n          this.total = res.total;\n        });\n      },\n      /** 搜索按钮操作 */\n      handleQuery() {\n        this.queryParams.pageNum = 1;\n        this.getList();\n      },\n      /** 重置按钮操作 */\n      resetQuery() {\n        this.resetForm(\"queryForm\");\n        this.handleQuery();\n      },\n      /** 选择授权用户操作 */\n      handleSelectUser() {\n        const roleId = this.queryParams.roleId;\n        const userIds = this.userIds.join(\",\");\n        authUserSelectAll({ roleId: roleId, userIds: userIds }).then(res => {\n          this.msgSuccess(res.msg);\n          if (res.code === 200) {\n            this.visible = false;\n            this.$emit(\"ok\");\n          }\n        });\n      }\n    }\n  };\n</script>\n"]}]}