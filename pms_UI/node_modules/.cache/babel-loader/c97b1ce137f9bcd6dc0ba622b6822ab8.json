{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\thread-loader\\dist\\cjs.js!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\revenue\\revenue\\revenueDept.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\revenue\\revenue\\revenueDept.vue","mtime":1682043106419},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1682058377329},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDoveXMrangveXMrangvempyeS1wbXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi95cytqeC95cytqeC96anJ5LXBtcy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFJldmVudWVEZXB0LCBnZXREZXB0TGlzdCwgYWRkRGVwdExpc3QgfSBmcm9tICJAL2FwaS9yZXZlbnVlL3JldmVudWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3JldmVudWVEZXB0JywKICBwcm9wczogewogICAgLy8g5Lyg5Y+C5Li6Zm9ybeihqOWNlSDmlrnkvr/mlbDmja7lm57mmL7muLLmn5MKICAgIHF1ZXJ5UGFyYW1zOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEFycmF5XQogICAgfSwKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpZDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAiIgogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9wZW46IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJ+aUtuWFpeaguOeul+aWueahiC3nrKzkuInmlrnnp5HlrqQnLAogICAgICBvcGVuRGlhbG9nOiB0aGlzLm9wZW4sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsb2FkaW5nMTogZmFsc2UsCiAgICAgIGxvYWRpbmcyOiBmYWxzZSwKICAgICAgbG9hZGluZzM6IGZhbHNlLAogICAgICBjbGlja0NvdW50OiAwLAogICAgICBhY3RpdmVOYW1lOiAib3V0UGF0aWVudCIsCiAgICAgIHBhdFRvUmlnaHRCb29sOiB0cnVlLAogICAgICBwYXRUb0xlZnRCb29sOiB0cnVlLAogICAgICBob3NUb1JpZ2h0Qm9vbDogdHJ1ZSwKICAgICAgaG9zVG9MZWZ0Qm9vbDogdHJ1ZSwKICAgICAgZm9ybTogewogICAgICAgIG91dHBhdGllbnRTZXJ2aWNlTGVmdDogW10sCiAgICAgICAgLy/pl6jor4rlt6bkvqfmlbDmja4KICAgICAgICBvdXRwYXRpZW50U2VydmljZVJpZ2h0OiBbXSwKICAgICAgICAvL+mXqOiviuWPs+S+p+aVsOaNrgogICAgICAgIGhvc3BpdGFsU2VydmljZUxlZnQ6IFtdLAogICAgICAgIC8v5L2P6Zmi5bem5L6n5pWw5o2uCiAgICAgICAgaG9zcGl0YWxTZXJ2aWNlUmlnaHQ6IFtdIC8v5L2P6Zmi5Y+z5L6n5pWw5o2uCiAgICAgIH0sCgogICAgICBydWxlczoge30sCiAgICAgIGRlcHREYXRhczogW10sCiAgICAgIC8v6Zeo6K+K56eR5a6k5YiX6KGo5pWw5o2uCiAgICAgIGRlcHREYXRhc0xlbmd0aDogMCwKICAgICAgLy/pl6jor4rnp5HlrqTliJfooajmlbDmja7nlKjkuo7mr5TovoPlhajpgInmlbDmja4KICAgICAgY2hhbmdlRGVwdExpc3QxOiBbXSwKICAgICAgY2hhbmdlRGVwdExpc3Q6IFtdLAogICAgICBkZXB0RGF0YXNIb3M6IFtdLAogICAgICAvL+mXqOiviuenkeWupOWIl+ihqOaVsOaNrgogICAgICBjaGFuZ2VIb3NEZXB0TGlzdDogW10sCiAgICAgIGNoYW5nZUhvc0RlcHRMaXN0MTogW10sCiAgICAgIG91dHBhdGllbnRSaWdodExlbmd0aDogW10sCiAgICAgIGhvc3BpdGFsUmlnaHRMZW5ndGg6IFtdLAogICAgICBzZWxlY3Rpb25Sb3dvdXRwYXRpZW50TGVmdDogW10sCiAgICAgIC8v6Zeo6K+K5bem5L6n5aSN6YCJ5qGG5pWw5o2uCiAgICAgIHNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodDogW10sCiAgICAgIC8v6Zeo6K+K5Y+z5L6n5aSN6YCJ5qGG5pWw5o2uCiAgICAgIHNlbGVjdGlvblJvd2hvc3BpdGFsTGVmdDogW10sCiAgICAgIC8v5L2P6Zmi5bem5L6n5aSN6YCJ5qGG5pWw5o2uCiAgICAgIHNlbGVjdGlvblJvd2hvc3BpdGFsUmlnaHQ6IFtdIC8v5L2P6Zmi5Y+z5L6n5aSN6YCJ5qGG5pWw5o2uCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBudW06IGZ1bmN0aW9uIG51bSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLy/orqHnrpflsZ7mgKfkvKDpgJLlj4LmlbDvvIzmoLnmja7kvKDlhaXnmoTmlbDnu4Tov5Tlm57nrKblkIjmnaHku7bnmoTplb/luqYKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0ICYmIF90aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0Lmxlbmd0aDsKICAgICAgfTsKICAgIH0sCiAgICBudW0xOiBmdW5jdGlvbiBudW0xKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgLy/orqHnrpflsZ7mgKfkvKDpgJLlj4LmlbDvvIzmoLnmja7kvKDlhaXnmoTmlbDnu4Tov5Tlm57nrKblkIjmnaHku7bnmoTplb/luqYKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQgJiYgX3RoaXMyLnNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodC5sZW5ndGg7CiAgICAgIH07CiAgICB9LAogICAgbnVtMjogZnVuY3Rpb24gbnVtMigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIC8v6K6h566X5bGe5oCn5Lyg6YCS5Y+C5pWw77yM5qC55o2u5Lyg5YWl55qE5pWw57uE6L+U5Zue56ym5ZCI5p2h5Lu255qE6ZW/5bqmCiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0ICYmIF90aGlzMy5zZWxlY3Rpb25Sb3dob3NwaXRhbExlZnQubGVuZ3RoOwogICAgICB9OwogICAgfSwKICAgIG51bTM6IGZ1bmN0aW9uIG51bTMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICAvL+iuoeeul+WxnuaAp+S8oOmAkuWPguaVsO+8jOagueaNruS8oOWFpeeahOaVsOe7hOi/lOWbnuespuWQiOadoeS7tueahOmVv+W6pgogICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXM0LmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdCAmJiBfdGhpczQuc2VsZWN0aW9uUm93aG9zcGl0YWxSaWdodC5sZW5ndGg7CiAgICAgIH07CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXREZXRhaWwoMSk7CiAgICB0aGlzLmdldFRyZWVEZXB0KHsKICAgICAgY29tcENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uZGVwdElkLAogICAgICBjbGluaWNUeXBlOiAxCiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICAvL+enkeWupOafpeivouS4i+aLieahhuS6i+S7tgogICAgY2hhbmdlRGVwdDogZnVuY3Rpb24gY2hhbmdlRGVwdChlKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZU5hbWUgPT0gJ291dFBhdGllbnQnKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgIGNvbXBDb2RlOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmFjY291bnRJbmZvLmRlcHRJZCwKICAgICAgICAgICAgY2xpbmljVHlwZTogMSwKICAgICAgICAgICAgZGVwdE5hbWU6IGUKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgIGNvbXBDb2RlOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmFjY291bnRJbmZvLmRlcHRJZCwKICAgICAgICAgICAgY2xpbmljVHlwZTogMQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgdGhpcy5nZXRUcmVlRGVwdChkYXRhKTsKICAgICAgfQogICAgICBpZiAodGhpcy5hY3RpdmVOYW1lID09ICdob3NwaXRhbCcpIHsKICAgICAgICB2YXIgX2RhdGE7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIF9kYXRhID0gewogICAgICAgICAgICBjb21wQ29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlci5hY2NvdW50SW5mby5kZXB0SWQsCiAgICAgICAgICAgIGNsaW5pY1R5cGU6IDIsCiAgICAgICAgICAgIGRlcHROYW1lOiBlCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfZGF0YSA9IHsKICAgICAgICAgICAgY29tcENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uZGVwdElkLAogICAgICAgICAgICBjbGluaWNUeXBlOiAyCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICB0aGlzLmdldFRyZWVEZXB0KF9kYXRhKTsKICAgICAgfQogICAgfSwKICAgIC8vdGFi5YiH5o2i5LqL5Lu2CiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2sodGFiKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKHRhYi5sYWJlbCA9PSAi5L2P6ZmiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF90aGlzNS5jaGFuZ2VIb3NEZXB0TGlzdCA9IFtdOwogICAgICAgICAgICAgICAgX3RoaXM1LmNoYW5nZUhvc0RlcHRMaXN0MSA9IFtdOwogICAgICAgICAgICAgICAgLy8gdGhpcy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQ9W10gICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBfdGhpczUuYWN0aXZlTmFtZSA9ICdob3NwaXRhbCc7CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczUuY2xpY2tDb3VudCA9PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2V0RGV0YWlsKDIpOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF90aGlzNS5jbGlja0NvdW50ICs9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmdldFRyZWVEZXB0KHsKICAgICAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzNS4kc3RvcmUuc3RhdGUudXNlci5hY2NvdW50SW5mby5kZXB0SWQsCiAgICAgICAgICAgICAgICAgIGNsaW5pY1R5cGU6IDIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoISh0YWIubGFiZWwgPT0gJ+mXqOiviicpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyB0aGlzLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0PVtdCiAgICAgICAgICAgICAgICBfdGhpczUuY2hhbmdlRGVwdExpc3QxID0gW107CiAgICAgICAgICAgICAgICBfdGhpczUuY2hhbmdlRGVwdExpc3QgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzNS5hY3RpdmVOYW1lID0gJ291dFBhdGllbnQnOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5nZXRUcmVlRGVwdCh7CiAgICAgICAgICAgICAgICAgIGNvbXBDb2RlOiBfdGhpczUuJHN0b3JlLnN0YXRlLnVzZXIuYWNjb3VudEluZm8uZGVwdElkLAogICAgICAgICAgICAgICAgICBjbGluaWNUeXBlOiAxCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8v6I635Y+W6Zeo6K+K5Y+K5L2P6Zmi5Y+z5L6n5YiX6KGo5pWw5o2uCiAgICBnZXREZXRhaWw6IGZ1bmN0aW9uIGdldERldGFpbCh0eXBlKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcGFyYW1zLCBhcnIsIF9hcnI7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgY29tcENvZGU6IF90aGlzNi5xdWVyeVBhcmFtcy5jb21wQ29kZSwKICAgICAgICAgICAgICAgICAgcmV2ZW51ZUNvZGU6IF90aGlzNi5xdWVyeVBhcmFtcy5yZXZlbnVlQ29kZSwKICAgICAgICAgICAgICAgICAgZGVwdFR5cGU6IHR5cGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoISh0eXBlID09IDEpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpczYubG9hZGluZzEgPSB0cnVlOwogICAgICAgICAgICAgICAgYXJyID0gW107CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UmV2ZW51ZURlcHQocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLnRvdGFsOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBhcnIuaW5kZXhPZihyZXNwb25zZS5yb3dzW2ldKSA9PT0gLTEgPyBhcnIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICByYXRpbzogcmVzcG9uc2Uucm93c1tpXS5yYXRpbywKICAgICAgICAgICAgICAgICAgICAgIGRpY3RWYWx1ZTogcmVzcG9uc2Uucm93c1tpXS5kZXB0Q29kZSwKICAgICAgICAgICAgICAgICAgICAgIGRpY3RMYWJlbDogcmVzcG9uc2Uucm93c1tpXS5kZXB0TmFtZQogICAgICAgICAgICAgICAgICAgIH0pIDogYXJyOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIF90aGlzNi5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFycikpOwogICAgICAgICAgICAgICAgICBfdGhpczYub3V0cGF0aWVudFJpZ2h0TGVuZ3RoID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5sb2FkaW5nMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGlmICghKHR5cGUgPT0gMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBfdGhpczYubG9hZGluZzMgPSB0cnVlOwogICAgICAgICAgICAgICAgX2FyciA9IFtdOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZXZlbnVlRGVwdChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UudG90YWw7IGkrKykgewogICAgICAgICAgICAgICAgICAgIF9hcnIuaW5kZXhPZihyZXNwb25zZS5yb3dzW2ldKSA9PT0gLTEgPyBfYXJyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcmF0aW86IHJlc3BvbnNlLnJvd3NbaV0ucmF0aW8sCiAgICAgICAgICAgICAgICAgICAgICBkaWN0VmFsdWU6IHJlc3BvbnNlLnJvd3NbaV0uZGVwdENvZGUsCiAgICAgICAgICAgICAgICAgICAgICBkaWN0TGFiZWw6IHJlc3BvbnNlLnJvd3NbaV0uZGVwdE5hbWUKICAgICAgICAgICAgICAgICAgICB9KSA6IF9hcnI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgX3RoaXM2LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF9hcnIpKTsKICAgICAgICAgICAgICAgICAgX3RoaXM2Lmhvc3BpdGFsUmlnaHRMZW5ndGggPSByZXNwb25zZS50b3RhbDsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmxvYWRpbmczID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvL+iOt+WPluenkeWupOWIl+ihqOWPiumXqOiviuWSjOS9j+mZouW3puS+p+aVsOaNrgogICAgZ2V0VHJlZURlcHQ6IGZ1bmN0aW9uIGdldFRyZWVEZXB0KGRhdGEpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZzIgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM3LmNsaWNrQ291bnQgPT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuZ2V0RGV0YWlsKDIpOwogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzNy5jbGlja0NvdW50ICs9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RGVwdExpc3QoZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmRlcHREYXRhc0xlbmd0aCA9IHJlc3BvbnNlLmRhdGEubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNsaW5pY1R5cGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdD1bXQogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZURlcHRMaXN0MSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZURlcHRMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuZGVwdERhdGFzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZS5yYXRpbyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGU7CiAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5vdXRwYXRpZW50UmlnaHRMZW5ndGggIT09IDAgfHwgX3RoaXM3LmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlRGVwdExpc3QxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlOwogICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIF90aGlzNy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIF90aGlzNy5jaGFuZ2VEZXB0TGlzdDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0W2ldLmRpY3RWYWx1ZSA9PSBfdGhpczcuY2hhbmdlRGVwdExpc3QxW2tdLmRpY3RWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlRGVwdExpc3QxLnNwbGljZShrLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczcuY2hhbmdlRGVwdExpc3QxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM3Lm91dHBhdGllbnRSaWdodExlbmd0aCA+IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZURlcHRMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlOwogICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSBpbiBfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2sgaW4gX3RoaXM3LmNoYW5nZURlcHRMaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXM3LmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodFtfaV0uZGljdFZhbHVlID09IF90aGlzNy5jaGFuZ2VEZXB0TGlzdFtfa10uZGljdFZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VEZXB0TGlzdC5zcGxpY2UoX2ssIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNy5jaGFuZ2VEZXB0TGlzdCkpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNy5vdXRwYXRpZW50UmlnaHRMZW5ndGggPT0gMCAmJiBfdGhpczcuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXM3LmRlcHREYXRhcykpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNsaW5pY1R5cGUgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0ID0gW107CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QxID0gW107CiAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdD1bXQogICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmRlcHREYXRhc0hvcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpdGUucmF0aW8gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlOwogICAgICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczcuaG9zcGl0YWxSaWdodExlbmd0aCAhPT0gMCB8fCBfdGhpczcuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5sZW5ndGggPT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QxID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlOwogICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTIgaW4gX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfazIgaW4gX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0MSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0W19pMl0uZGljdFZhbHVlID09IF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdDFbX2syXS5kaWN0VmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0MS5zcGxpY2UoX2syLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX3RoaXM3LmNoYW5nZUhvc0RlcHRMaXN0MSkpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczcuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZS5yYXRpbyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kzIGluIF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2szIGluIF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0W19pM10uZGljdFZhbHVlID09IF90aGlzNy5jaGFuZ2VIb3NEZXB0TGlzdFtfazNdLmRpY3RWYWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuY2hhbmdlSG9zRGVwdExpc3Quc3BsaWNlKF9rMywgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5sb2FkaW5nMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfdGhpczcuY2hhbmdlSG9zRGVwdExpc3QpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczcuaG9zcGl0YWxSaWdodExlbmd0aCA9PSAwICYmIF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzNy5kZXB0RGF0YXNIb3MpKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3LmxvYWRpbmcyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM3Lm1zZ0Vycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhvc3BpdGFsVG9yaWdodDogZnVuY3Rpb24gaG9zcGl0YWxUb3JpZ2h0KCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgLy/lsIbov4fmu6TlkI7nmoTmlbDnu4TpnIDopoHmt7vliqDliLDlj7PovrnnmoTmlbDnu4TkuK0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsTGVmdC5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5pbmRleE9mKHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0W2ldKSA9PT0gLTEgPyB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQucHVzaCh0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsTGVmdFtpXSkgOiB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQ7CiAgICAgIH0KICAgICAgOwogICAgICAvL+WJqeS9meW3pui+ueaVsOaNrgogICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaTUpIHsKICAgICAgICBfdGhpczguZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodC5mb3JFYWNoKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgIGlmIChfdGhpczguZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0W19pNV0gJiYgX3RoaXM4LmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdFtfaTVdLmRpY3RWYWx1ZSA9PSBpdGUuZGljdFZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzOC5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQuc3BsaWNlKF9pNSwgMSk7CiAgICAgICAgICAgIF9pNSAtPSAxOwogICAgICAgICAgICBfaTUgPCAwID8gMCA6IF9pNTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfaTQgPSBfaTU7CiAgICAgIH07CiAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IHRoaXMuZm9ybS5ob3NwaXRhbFNlcnZpY2VMZWZ0Lmxlbmd0aDsgX2k0KyspIHsKICAgICAgICBfbG9vcChfaTQpOwogICAgICB9CiAgICB9LAogICAgaG9zcGl0YWxUb0xlZnQ6IGZ1bmN0aW9uIGhvc3BpdGFsVG9MZWZ0KCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsUmlnaHQubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlTGVmdC5pbmRleE9mKHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxSaWdodFtpXSkgPT09IC0xID8gdGhpcy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQucHVzaCh0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsUmlnaHRbaV0pIDogdGhpcy5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQ7CiAgICAgIH0KICAgICAgOwogICAgICAvL+WJqeS9meWPs+i+ueaVsOaNrgogICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKF9pNykgewogICAgICAgIF90aGlzOS5mb3JtLmhvc3BpdGFsU2VydmljZUxlZnQuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICBpZiAoX3RoaXM5LmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHRbX2k3XSAmJiBfdGhpczkuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodFtfaTddLmRpY3RWYWx1ZSA9PSBpdGUuZGljdFZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzOS5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0LnNwbGljZShfaTcsIDEpOwogICAgICAgICAgICBfaTcgLT0gMTsKICAgICAgICAgICAgX2k3IDwgMCA/IDAgOiBfaTc7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgX2k2ID0gX2k3OwogICAgICB9OwogICAgICBmb3IgKHZhciBfaTYgPSAwOyBfaTYgPCB0aGlzLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQubGVuZ3RoOyBfaTYrKykgewogICAgICAgIF9sb29wMihfaTYpOwogICAgICB9CiAgICB9LAogICAgb3V0cGF0aWVudFRvcmlnaHQ6IGZ1bmN0aW9uIG91dHBhdGllbnRUb3JpZ2h0KCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CiAgICAgIC8v5bCG6L+H5ruk5ZCO55qE5pWw57uE6ZyA6KaB5re75Yqg5Yiw5Y+z6L6555qE5pWw57uE5LitCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWxlY3Rpb25Sb3dvdXRwYXRpZW50TGVmdC5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0LmluZGV4T2YodGhpcy5zZWxlY3Rpb25Sb3dvdXRwYXRpZW50TGVmdFtpXSkgPT09IC0xID8gdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQucHVzaCh0aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0W2ldKSA6IHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0OwogICAgICB9CiAgICAgIDsKICAgICAgLy/liankvZnlt6bovrnmlbDmja4KICAgICAgdmFyIF9sb29wMyA9IGZ1bmN0aW9uIF9sb29wMyhfaTkpIHsKICAgICAgICBfdGhpczEwLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5mb3JFYWNoKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgIGlmIChfdGhpczEwLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0W19pOV0gJiYgX3RoaXMxMC5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdFtfaTldLmRpY3RWYWx1ZSA9PSBpdGUuZGljdFZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzMTAuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQuc3BsaWNlKF9pOSwgMSk7CiAgICAgICAgICAgIF9pOSAtPSAxOwogICAgICAgICAgICBfaTkgPCAwID8gMCA6IF9pOTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfaTggPSBfaTk7CiAgICAgIH07CiAgICAgIGZvciAodmFyIF9pOCA9IDA7IF9pOCA8IHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQubGVuZ3RoOyBfaTgrKykgewogICAgICAgIF9sb29wMyhfaTgpOwogICAgICB9CiAgICB9LAogICAgLy/lsIblj7PovrnmlbDmja7mlL7liLDlt6bovrkKICAgIG91dHBhdGllbnRUb2xlZnQ6IGZ1bmN0aW9uIG91dHBhdGllbnRUb2xlZnQoKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodC5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQuaW5kZXhPZih0aGlzLnNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodFtpXSkgPT09IC0xID8gdGhpcy5mb3JtLm91dHBhdGllbnRTZXJ2aWNlTGVmdC5wdXNoKHRoaXMuc2VsZWN0aW9uUm93T3V0cGF0aWVudFJpZ2h0W2ldKSA6IHRoaXMuZm9ybS5vdXRwYXRpZW50U2VydmljZUxlZnQ7CiAgICAgIH0KICAgICAgOwogICAgICAvL+WJqeS9meWPs+i+ueaVsOaNrgogICAgICB2YXIgX2xvb3A0ID0gZnVuY3Rpb24gX2xvb3A0KF9pMTEpIHsKICAgICAgICBfdGhpczExLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VMZWZ0LmZvckVhY2goZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgaWYgKF90aGlzMTEuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0W19pMTFdICYmIF90aGlzMTEuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0W19pMTFdLmRpY3RWYWx1ZSA9PSBpdGUuZGljdFZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzMTEuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0LnNwbGljZShfaTExLCAxKTsKICAgICAgICAgICAgX2kxMSAtPSAxOwogICAgICAgICAgICBfaTExIDwgMCA/IF9pMTEgPSAwIDogX2kxMTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfaTEwID0gX2kxMTsKICAgICAgfTsKICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCB0aGlzLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5sZW5ndGg7IF9pMTArKykgewogICAgICAgIF9sb29wNChfaTEwKTsKICAgICAgfQogICAgfSwKICAgIC8vIOmXqOiviuWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uT3V0cGF0aWVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uT3V0cGF0aWVudENoYW5nZShzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5zZWxlY3Rpb25Sb3dvdXRwYXRpZW50TGVmdCA9IHNlbGVjdGlvbi5tYXAoZnVuY3Rpb24gKGl0ZSkgewogICAgICAgIGl0ZS5yYXRpbyA9IDA7CiAgICAgICAgcmV0dXJuIGl0ZTsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgdGhpcy5wYXRUb1JpZ2h0Qm9vbCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucGF0VG9SaWdodEJvb2wgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy/pl6jor4rlj7PkvqflpJrpgInmoYbmlbDmja4KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZVJpZ2h0OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VSaWdodChzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5zZWxlY3Rpb25Sb3dPdXRwYXRpZW50UmlnaHQgPSBzZWxlY3Rpb247CiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgdGhpcy5wYXRUb0xlZnRCb29sID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXRUb0xlZnRCb29sID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8v5L2P6Zmi5bem5L6n5aSa6YCJ5qGGCiAgICBoYW5kbGVTZWxlY3Rpb25Ib3NwaXRhbENoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uSG9zcGl0YWxDaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0ID0gc2VsZWN0aW9uLm1hcChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgaXRlLnJhdGlvID0gMDsKICAgICAgICByZXR1cm4gaXRlOwogICAgICB9KTsKICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggIT09IDApIHsKICAgICAgICB0aGlzLmhvc1RvUmlnaHRCb29sID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ob3NUb1JpZ2h0Qm9vbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICAvL+S9j+mZouWPs+S+p+WkmumAieahhgogICAgaGFuZGxlU2VsZWN0aW9uSG9zcGl0YWxDaGFuZ2VSaWdodDogZnVuY3Rpb24gaGFuZGxlU2VsZWN0aW9uSG9zcGl0YWxDaGFuZ2VSaWdodChzZWxlY3Rpb24pIHsKICAgICAgdGhpcy5zZWxlY3Rpb25Sb3dob3NwaXRhbFJpZ2h0ID0gc2VsZWN0aW9uOwogICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCAhPT0gMCkgewogICAgICAgIHRoaXMuaG9zVG9MZWZ0Qm9vbCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaG9zVG9MZWZ0Qm9vbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICByb3dDbGljazogZnVuY3Rpb24gcm93Q2xpY2socm93LCBjb2x1bW4sIGV2ZW50KSB7CiAgICAgIHZhciByZWZzRWxUYWJsZSA9IHRoaXMuJHJlZnMubXVsdGlwbGVUYWJsZTsKICAgICAgdmFyIGZpbmRSb3cgPSB0aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0LmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5yb3dJbmRleCA9PSByb3cucm93SW5kZXg7CiAgICAgIH0pOwogICAgICBpZiAoZmluZFJvdyAmJiB0aGlzLnNlbGVjdGlvblJvd291dHBhdGllbnRMZWZ0Lmxlbmd0aCA9PSAxKSB7CiAgICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdywgZmFsc2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICByZWZzRWxUYWJsZS5jbGVhclNlbGVjdGlvbigpOwogICAgICByZWZzRWxUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93KTsKICAgIH0sCiAgICByb3dDbGlja1BhdFJpZ2h0OiBmdW5jdGlvbiByb3dDbGlja1BhdFJpZ2h0KHJvdywgY29sdW1uLCBldmVudCkgewogICAgICB2YXIgcmVmc0VsVGFibGUgPSB0aGlzLiRyZWZzLm11bHRpcGxlVGFibGVSaWdodDsKICAgICAgdmFyIGZpbmRSb3cgPSB0aGlzLnNlbGVjdGlvblJvd091dHBhdGllbnRSaWdodC5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMucm93SW5kZXggPT0gcm93LnJvd0luZGV4OwogICAgICB9KTsKICAgICAgaWYgKGZpbmRSb3cgJiYgdGhpcy5zZWxlY3Rpb25Sb3dPdXRwYXRpZW50UmlnaHQubGVuZ3RoID09IDEpIHsKICAgICAgICByZWZzRWxUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93LCBmYWxzZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJlZnNFbFRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOwogICAgfSwKICAgIHJvd0NsaWNrSG9zOiBmdW5jdGlvbiByb3dDbGlja0hvcyhyb3csIGNvbHVtbiwgZXZlbnQpIHsKICAgICAgdmFyIHJlZnNFbFRhYmxlID0gdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlSG9zOwogICAgICB2YXIgZmluZFJvdyA9IHRoaXMuc2VsZWN0aW9uUm93aG9zcGl0YWxMZWZ0LmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5yb3dJbmRleCA9PSByb3cucm93SW5kZXg7CiAgICAgIH0pOwogICAgICBpZiAoZmluZFJvdyAmJiB0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsTGVmdC5sZW5ndGggPT0gMSkgewogICAgICAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3csIGZhbHNlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmVmc0VsVGFibGUuY2xlYXJTZWxlY3Rpb24oKTsKICAgICAgcmVmc0VsVGFibGUudG9nZ2xlUm93U2VsZWN0aW9uKHJvdyk7CiAgICB9LAogICAgcm93Q2xpY2tIb3NSaWdodDogZnVuY3Rpb24gcm93Q2xpY2tIb3NSaWdodChyb3csIGNvbHVtbiwgZXZlbnQpIHsKICAgICAgdmFyIHJlZnNFbFRhYmxlID0gdGhpcy4kcmVmcy5tdWx0aXBsZVRhYmxlUmlnaHRIb3M7CiAgICAgIHZhciBmaW5kUm93ID0gdGhpcy5zZWxlY3Rpb25Sb3dob3NwaXRhbFJpZ2h0LmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5yb3dJbmRleCA9PSByb3cucm93SW5kZXg7CiAgICAgIH0pOwogICAgICBpZiAoZmluZFJvdyAmJiB0aGlzLnNlbGVjdGlvblJvd2hvc3BpdGFsUmlnaHQubGVuZ3RoID09IDEpIHsKICAgICAgICByZWZzRWxUYWJsZS50b2dnbGVSb3dTZWxlY3Rpb24ocm93LCBmYWxzZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHJlZnNFbFRhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgIHJlZnNFbFRhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIG91dHBhdGllbnRTZXJ2aWNlTGVmdDogW10sCiAgICAgICAgLy/pl6jor4rlt6bkvqfmlbDmja4KICAgICAgICBvdXRwYXRpZW50U2VydmljZVJpZ2h0OiBbXSwKICAgICAgICAvL+mXqOiviuWPs+S+p+aVsOaNrgogICAgICAgIGhvc3BpdGFsU2VydmljZUxlZnQ6IFtdLAogICAgICAgIC8v5L2P6Zmi5bem5L6n5pWw5o2uCiAgICAgICAgaG9zcGl0YWxTZXJ2aWNlUmlnaHQ6IFtdIC8v5L2P6Zmi5Y+z5L6n5pWw5o2uCiAgICAgIH07CgogICAgICB0aGlzLmNsaWNrQ291bnQgPSAwOwogICAgfSwKICAgIC8qKiDnp5HlrqTmj5DkuqTmjInpkq4gKi9zdWJtaXRGb3JtRGVwdDogZnVuY3Rpb24gc3VibWl0Rm9ybURlcHQoKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1sicXVlcnlGb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgcGFyYW1zLAogICAgICAgICAgICBhcnIgPSBbXSwKICAgICAgICAgICAgYXJyMSA9IFtdLAogICAgICAgICAgICBzdW0gPSAwLAogICAgICAgICAgICBzdW0xID0gMDsKICAgICAgICAgIGlmIChfdGhpczEyLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5sZW5ndGggPT0gMCAmJiBfdGhpczEyLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQgPT0gMCkgewogICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgcmV2ZW51ZUNvZGU6IF90aGlzMTIucXVlcnlQYXJhbXMucmV2ZW51ZUNvZGUsCiAgICAgICAgICAgICAgcG1zUmV2ZW51ZURlcHRzOiBbXSwKICAgICAgICAgICAgICBjb21wQ29kZTogX3RoaXMxMi5xdWVyeVBhcmFtcy5jb21wQ29kZQogICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgc2F2ZUxvYWRpbmcgPSBfdGhpczEyLnNhdmVMb2FkaW5nKCk7CiAgICAgICAgICAgIGFkZERlcHRMaXN0KHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczEyLm1zZ1N1Y2Nlc3MoIuaUtuWFpeaguOeul+enkeWupOiuvue9ruaIkOWKnyIpOwogICAgICAgICAgICAgIF90aGlzMTIuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7CiAgICAgICAgICAgICAgc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMxMi5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQubGVuZ3RoID09IDAgJiYgX3RoaXMxMi5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0ICE9IDApIHsKICAgICAgICAgICAgX3RoaXMxMi5mb3JtLmhvc3BpdGFsU2VydmljZVJpZ2h0LmZvckVhY2goZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgICAgIHN1bTEgKz0gTnVtYmVyKGl0ZS5yYXRpbyk7CiAgICAgICAgICAgICAgYXJyMS5wdXNoKHsKICAgICAgICAgICAgICAgIGRlcHROYW1lOiBpdGUuZGljdExhYmVsLAogICAgICAgICAgICAgICAgZGVwdENvZGU6IGl0ZS5kaWN0VmFsdWUsCiAgICAgICAgICAgICAgICByYXRpbzogaXRlLnJhdGlvCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgcmV2ZW51ZUNvZGU6IF90aGlzMTIucXVlcnlQYXJhbXMucmV2ZW51ZUNvZGUsCiAgICAgICAgICAgICAgcG1zUmV2ZW51ZURlcHRzOiBhcnIxLAogICAgICAgICAgICAgIGNvbXBDb2RlOiBfdGhpczEyLnF1ZXJ5UGFyYW1zLmNvbXBDb2RlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChzdW0xID4gMTAwKSB7CiAgICAgICAgICAgICAgX3RoaXMxMi5tc2dFcnJvcigi5L2P6Zmi5bey6YCJ56eR5a6k5YiG5pGK5q+U5L6L55qE5oC75ZKM5bqU5bCP5LqO5oiW562J5LqOMTAwIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBfc2F2ZUxvYWRpbmcgPSBfdGhpczEyLnNhdmVMb2FkaW5nKCk7CiAgICAgICAgICAgICAgYWRkRGVwdExpc3QocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXMxMi5tc2dTdWNjZXNzKCLmlLblhaXmoLjnrpfnp5HlrqTorr7nva7miJDlip8iKTsKICAgICAgICAgICAgICAgIF90aGlzMTIuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBfc2F2ZUxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKF90aGlzMTIuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0Lmxlbmd0aCAhPSAwICYmIF90aGlzMTIuZm9ybS5ob3NwaXRhbFNlcnZpY2VSaWdodCA9PSAwKSB7CiAgICAgICAgICAgIF90aGlzMTIuZm9ybS5vdXRwYXRpZW50U2VydmljZVJpZ2h0LmZvckVhY2goZnVuY3Rpb24gKGl0ZSkgewogICAgICAgICAgICAgIHN1bSArPSBOdW1iZXIoaXRlLnJhdGlvKTsKICAgICAgICAgICAgICBhcnIucHVzaCh7CiAgICAgICAgICAgICAgICBkZXB0TmFtZTogaXRlLmRpY3RMYWJlbCwKICAgICAgICAgICAgICAgIGRlcHRDb2RlOiBpdGUuZGljdFZhbHVlLAogICAgICAgICAgICAgICAgcmF0aW86IGl0ZS5yYXRpbwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgIHJldmVudWVDb2RlOiBfdGhpczEyLnF1ZXJ5UGFyYW1zLnJldmVudWVDb2RlLAogICAgICAgICAgICAgIHBtc1JldmVudWVEZXB0czogYXJyLAogICAgICAgICAgICAgIGNvbXBDb2RlOiBfdGhpczEyLnF1ZXJ5UGFyYW1zLmNvbXBDb2RlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChzdW0gPiAxMDApIHsKICAgICAgICAgICAgICBfdGhpczEyLm1zZ0Vycm9yKCLpl6jor4rlt7LpgInnp5HlrqTliIbmkYrmr5TkvovnmoTmgLvlkozlupTlsI/kuo7miJbnrYnkuo4xMDAiKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIF9zYXZlTG9hZGluZzIgPSBfdGhpczEyLnNhdmVMb2FkaW5nKCk7CiAgICAgICAgICAgICAgYWRkRGVwdExpc3QocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgX3RoaXMxMi5tc2dTdWNjZXNzKCLmlLblhaXmoLjnrpfnp5HlrqTorr7nva7miJDlip8iKTsKICAgICAgICAgICAgICAgIF90aGlzMTIuJGVtaXQoInN1Y2Nlc3MiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBfc2F2ZUxvYWRpbmcyLmNsb3NlKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChfdGhpczEyLmZvcm0ub3V0cGF0aWVudFNlcnZpY2VSaWdodC5sZW5ndGggIT0gMCAmJiBfdGhpczEyLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgX3RoaXMxMi5mb3JtLm91dHBhdGllbnRTZXJ2aWNlUmlnaHQuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgc3VtICs9IE51bWJlcihpdGUucmF0aW8pOwogICAgICAgICAgICAgIGFyci5wdXNoKHsKICAgICAgICAgICAgICAgIGRlcHROYW1lOiBpdGUuZGljdExhYmVsLAogICAgICAgICAgICAgICAgZGVwdENvZGU6IGl0ZS5kaWN0VmFsdWUsCiAgICAgICAgICAgICAgICByYXRpbzogaXRlLnJhdGlvCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfdGhpczEyLmZvcm0uaG9zcGl0YWxTZXJ2aWNlUmlnaHQuZm9yRWFjaChmdW5jdGlvbiAoaXRlKSB7CiAgICAgICAgICAgICAgc3VtMSArPSBOdW1iZXIoaXRlLnJhdGlvKTsKICAgICAgICAgICAgICBhcnIxLnB1c2goewogICAgICAgICAgICAgICAgZGVwdE5hbWU6IGl0ZS5kaWN0TGFiZWwsCiAgICAgICAgICAgICAgICBkZXB0Q29kZTogaXRlLmRpY3RWYWx1ZSwKICAgICAgICAgICAgICAgIHJhdGlvOiBpdGUucmF0aW8KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICByZXZlbnVlQ29kZTogX3RoaXMxMi5xdWVyeVBhcmFtcy5yZXZlbnVlQ29kZSwKICAgICAgICAgICAgICBwbXNSZXZlbnVlRGVwdHM6IFtdLmNvbmNhdChhcnIxLCBhcnIpLAogICAgICAgICAgICAgIGNvbXBDb2RlOiBfdGhpczEyLnF1ZXJ5UGFyYW1zLmNvbXBDb2RlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChzdW0gPiAxMDAgfHwgc3VtMSA+IDEwMCkgewogICAgICAgICAgICAgIF90aGlzMTIubXNnRXJyb3IoIumXqOiviuWPiuS9j+mZouW3sumAieenkeWupOWIhuaRiuavlOS+i+eahOaAu+WSjOW6lOWIhuWIq+Wwj+S6juaIluetieS6jjEwMCIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB2YXIgX3NhdmVMb2FkaW5nMyA9IF90aGlzMTIuc2F2ZUxvYWRpbmcoKTsKICAgICAgICAgICAgICBhZGREZXB0TGlzdChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczEyLm1zZ1N1Y2Nlc3MoIuaUtuWFpeaguOeul+enkeWupOiuvue9ruaIkOWKnyIpOwogICAgICAgICAgICAgICAgX3RoaXMxMi4kZW1pdCgic3VjY2VzcyIsIGZhbHNlKTsKICAgICAgICAgICAgICAgIF9zYXZlTG9hZGluZzMuY2xvc2UoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5by55qGG5YWz6ZetCiAgICBoYW5kbGVEaWFsb2dDbG9zZTogZnVuY3Rpb24gaGFuZGxlRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfSwKICAgIC8vIOWPlua2iAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgICAgdGhpcy5yZXNldCgpOwogICAgfQogIH0KfTs="},null]}