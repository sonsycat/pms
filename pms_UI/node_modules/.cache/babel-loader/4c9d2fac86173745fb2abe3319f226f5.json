{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\utils\\zipdownload.js","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\utils\\zipdownload.js","mtime":1682043101176},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1682058377674}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi95cytqeC95cytqeC96anJ5LXBtcy11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZG93bkxvYWRaaXAgPSBkb3duTG9hZFppcDsKZXhwb3J0cy5yZXNvbHZlQmxvYiA9IHJlc29sdmVCbG9iOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIik7CnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKdmFyIG1pbWVNYXAgPSB7CiAgeGxzeDogJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JywKICB6aXA6ICdhcHBsaWNhdGlvbi96aXAnCn07CnZhciBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSTsKZnVuY3Rpb24gZG93bkxvYWRaaXAoc3RyLCBmaWxlbmFtZSkgewogIHZhciB1cmwgPSBiYXNlVXJsICsgc3RyOwogICgwLCBfYXhpb3MuZGVmYXVsdCkoewogICAgbWV0aG9kOiAnZ2V0JywKICAgIHVybDogdXJsLAogICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICBoZWFkZXJzOiB7CiAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICB9CiAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICByZXNvbHZlQmxvYihyZXMsIG1pbWVNYXAuemlwKTsKICB9KTsKfQovKioNCiAqIOino+aekGJsb2Llk43lupTlhoXlrrnlubbkuIvovb0NCiAqIEBwYXJhbSB7Kn0gcmVzIGJsb2Llk43lupTlhoXlrrkNCiAqIEBwYXJhbSB7U3RyaW5nfSBtaW1lVHlwZSBNSU1F57G75Z6LDQogKi8KZnVuY3Rpb24gcmVzb2x2ZUJsb2IocmVzLCBtaW1lVHlwZSkgewogIHZhciBhTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0sIHsKICAgIHR5cGU6IG1pbWVUeXBlCiAgfSk7CiAgLy8gLy/ku45yZXNwb25zZeeahGhlYWRlcnPkuK3ojrflj5ZmaWxlbmFtZSwg5ZCO56uvcmVzcG9uc2Uuc2V0SGVhZGVyKCJDb250ZW50LWRpc3Bvc2l0aW9uIiwgImF0dGFjaG1lbnQ7IGZpbGVuYW1lPXh4eHguZG9jeCIpIOiuvue9rueahOaWh+S7tuWQjTsKICB2YXIgcGF0dCA9IG5ldyBSZWdFeHAoJ2ZpbGVuYW1lPShbXjtdK1xcLlteXFwuO10rKTsqJyk7CiAgdmFyIGNvbnRlbnREaXNwb3NpdGlvbiA9IGRlY29kZVVSSShyZXMuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddKTsKICB2YXIgcmVzdWx0ID0gcGF0dC5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7CiAgdmFyIGZpbGVOYW1lID0gcmVzdWx0WzFdOwogIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXCIvZywgJycpOwogIGFMaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogIGFMaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBmaWxlTmFtZSk7IC8vIOiuvue9ruS4i+i9veaWh+S7tuWQjeensAogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwogIGFMaW5rLmNsaWNrKCk7CiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhTGluayk7Cn0="},{"version":3,"names":["mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","axios","method","responseType","headers","getToken","then","res","resolveBlob","mimeType","aLink","document","createElement","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild"],"sources":["D:/ys+jx/ys+jx/zjry-pms-ui/src/utils/zipdownload.js"],"sourcesContent":["import axios from 'axios'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nconst mimeMap = {\r\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  zip: 'application/zip'\r\n}\r\n\r\nconst baseUrl = process.env.VUE_APP_BASE_API\r\nexport function downLoadZip(str, filename) {\r\n  var url = baseUrl + str\r\n  axios({\r\n    method: 'get',\r\n    url: url,\r\n    responseType: 'blob',\r\n    headers: { 'Authorization': 'Bearer ' + getToken() }\r\n  }).then(res => {\r\n    resolveBlob(res, mimeMap.zip)\r\n  })\r\n}\r\n/**\r\n * 解析blob响应内容并下载\r\n * @param {*} res blob响应内容\r\n * @param {String} mimeType MIME类型\r\n */\r\nexport function resolveBlob(res, mimeType) {\r\n  const aLink = document.createElement('a')\r\n  var blob = new Blob([res.data], { type: mimeType })\r\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\r\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\r\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\r\n  var result = patt.exec(contentDisposition)\r\n  var fileName = result[1]\r\n  fileName = fileName.replace(/\\\"/g, '')\r\n  aLink.href = URL.createObjectURL(blob)\r\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\r\n  document.body.appendChild(aLink)\r\n  aLink.click()\r\n  document.body.removeChild(aLink);\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA,IAAMA,OAAO,GAAG;EACdC,IAAI,EAAE,mEAAmE;EACzEC,GAAG,EAAE;AACP,CAAC;AAED,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,gBAAgB;AACrC,SAASC,WAAW,CAACC,GAAG,EAAEC,QAAQ,EAAE;EACzC,IAAIC,GAAG,GAAGP,OAAO,GAAGK,GAAG;EACvB,IAAAG,cAAK,EAAC;IACJC,MAAM,EAAE,KAAK;IACbF,GAAG,EAAEA,GAAG;IACRG,YAAY,EAAE,MAAM;IACpBC,OAAO,EAAE;MAAE,eAAe,EAAE,SAAS,GAAG,IAAAC,cAAQ;IAAG;EACrD,CAAC,CAAC,CAACC,IAAI,CAAC,UAAAC,GAAG,EAAI;IACbC,WAAW,CAACD,GAAG,EAAEjB,OAAO,CAACE,GAAG,CAAC;EAC/B,CAAC,CAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACO,SAASgB,WAAW,CAACD,GAAG,EAAEE,QAAQ,EAAE;EACzC,IAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACzC,IAAIC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACP,GAAG,CAACQ,IAAI,CAAC,EAAE;IAAEC,IAAI,EAAEP;EAAS,CAAC,CAAC;EACnD;EACA,IAAIQ,IAAI,GAAG,IAAIC,MAAM,CAAC,+BAA+B,CAAC;EACtD,IAAIC,kBAAkB,GAAGC,SAAS,CAACb,GAAG,CAACH,OAAO,CAAC,qBAAqB,CAAC,CAAC;EACtE,IAAIiB,MAAM,GAAGJ,IAAI,CAACK,IAAI,CAACH,kBAAkB,CAAC;EAC1C,IAAII,QAAQ,GAAGF,MAAM,CAAC,CAAC,CAAC;EACxBE,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EACtCd,KAAK,CAACe,IAAI,GAAGC,GAAG,CAACC,eAAe,CAACd,IAAI,CAAC;EACtCH,KAAK,CAACkB,YAAY,CAAC,UAAU,EAAEL,QAAQ,CAAC,EAAC;EACzCZ,QAAQ,CAACkB,IAAI,CAACC,WAAW,CAACpB,KAAK,CAAC;EAChCA,KAAK,CAACqB,KAAK,EAAE;EACbpB,QAAQ,CAACkB,IAAI,CAACG,WAAW,CAACtB,KAAK,CAAC;AAClC"}]}