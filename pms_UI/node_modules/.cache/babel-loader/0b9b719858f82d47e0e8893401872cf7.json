{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\components\\deptSearch\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\components\\deptSearch\\index.vue","mtime":1682043105421},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfZGVwdCA9IHJlcXVpcmUoIkAvYXBpL3N5c3RlbS9kZXB0Iik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAiaW5kZXgiLAogIHByb3BzOiB7CiAgICBxdWVyeVBhcmFtczogT2JqZWN0LAogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAi5Y2V5L2NIgogICAgfSwKICAgIHNpemU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAibWluaSIKICAgIH0sCiAgICBjbGVhcmFibGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHJlYWRvbmx5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZGVwdElkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImRlcHRJZCIKICAgIH0sCiAgICBkZXB0TmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJkZXB0TmFtZSIKICAgIH0sCiAgICAvLyDpnIDopoHmuIXnqbrnsbvkvLwg56eR5a6k55qE5YC8CiAgICBkZXB0Q29kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJkZXB0Q29kZSIKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsYXp5OiBmYWxzZSwKICAgICAgLy/lrprkuYnngrnlh7vmrKHmlbAs6buY6K6kMOasoQogICAgICB0cmVlQ2xpY2tDb3VudDogMCwKICAgICAgZGVwdFBhcmFtczogdGhpcy5xdWVyeVBhcmFtcywKICAgICAgZGVwdFNlYXJjaEZvcm1EaWFsb2c6IGZhbHNlLAogICAgICBkZXB0TmFtZUZvcm06IHVuZGVmaW5lZCwKICAgICAgZGVwdE9wdGlvbnM6IHVuZGVmaW5lZCwKICAgICAgZGVmYXVsdFNob3dOb2RlczogW10sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLAogICAgICAgIGxhYmVsOiAibGFiZWwiCiAgICAgIH0sCiAgICAgIG9wZW46IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgLy8g6buY6K6k5bGV5byA5omA5pyJ6IqC54K5CiAgICAgIGRlZmF1bHRFeHBhbmQ6IHRydWUKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRUcmVlU2VsZWN0KCk7CiAgfSwKICB3YXRjaDogewogICAgLy8JZGVwdE9wdGlvbnM6IHsKICAgIC8vCQkJaGFuZGxlciAoKSB7CiAgICAvLwkJCQl0aGlzLmRlcHRPcHRpb25zLmZvckVhY2goaXRlbSA9PiB7CiAgICAvLwkJCQkJaWYoaXRlbS5jaGlsZHJlbil7CiAgICAvLwkJCQkJCWl0ZW0uY2hpbGRyZW4uZm9yRWFjaChpdGVtMiA9PiB7CiAgICAvLwkJCQkJCQl0aGlzLmRlZmF1bHRTaG93Tm9kZXMucHVzaChpdGVtMi5pZCkKICAgIC8vCQkJCQkJfSkKICAgIC8vCQkJCQl9CiAgICAvLwkJCQl9KQogICAgLy8JCQl9LAogICAgLy8vLwkJCWRlZXA6IHRydWUsCiAgICAvLy8vCQkJaW1tZWRpYXRlOiB0cnVlCiAgICAvLwkJfSwKICAgIC8vIOagueaNruWQjeensOetm+mAiemDqOmXqOagkQogICAgLy8gIGRlcHROYW1lRm9ybSh2YWwpIHsKICAgIC8vICAJdHJlZXNlbGVjdCh7ZGVwdE5hbWU6dmFsfSkudGhlbihyZXMgPT4gewogICAgLy8gIAkJY29uc29sZS5sb2cocmVzKTsKICAgIC8vCQkJCWxldCByZXNzID0gcmVzLmRhdGE7CiAgICAvLwkJCQl0aGlzLmRlcHRPcHRpb25zID0gcmVzczsKICAgIC8vLy8JICAgICAgdGhpcy5hcHBlbmQoZGF0YSxyZXNzKTsKICAgIC8vCSAgICB9KTsKICAgIC8vLy8gIAljb25zb2xlLmxvZyh2YWwpOwogICAgLy8vLyAgICB0aGlzLiRyZWZzLnRyZWVGb3JtLmZpbHRlcih2YWwpOwogICAgLy8gIH0sCiAgICBxdWVyeVBhcmFtczogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMuZGVwdFBhcmFtcyA9IHZhbDsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBkZXB0TmFtZUZvcm0yOiBmdW5jdGlvbiBkZXB0TmFtZUZvcm0yKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmRlcHROYW1lRm9ybSk7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfZGVwdC50cmVlc2VsZWN0MykoewogICAgICAgIGRlcHROYW1lOiB0aGlzLmRlcHROYW1lRm9ybQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHZhciByZXNzID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMuZGVwdE9wdGlvbnMgPSByZXNzOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g54K55Ye7aW5wdXQKICAgIGhhbmRsZUNsaWNrSW5wdXQ6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrSW5wdXQoKSB7CiAgICAgIGlmICghdGhpcy5yZWFkb25seSkgewogICAgICAgIHRoaXMuZGVwdFNlYXJjaEZvcm1EaWFsb2cgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHRoaXMubXNnRXJyb3IoJ+emgeatoue8lui+kScpCiAgICAgIH0KICAgIH0sCiAgICBnZXREZXB0RGF0YXM6IGZ1bmN0aW9uIGdldERlcHREYXRhcyhub2RlLCByZXNvbHZlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgcElkID0gIiI7CiAgICAgIGlmIChub2RlLmxldmVsID09PSAwKSB7CiAgICAgICAgcElkID0gIiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcElkID0gbm9kZS5kYXRhLmlkOwogICAgICB9CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAoMCwgX2RlcHQudHJlZXNlbGVjdCkoewogICAgICAgICAgcGFyZW50SWQ6IHBJZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGlmIChyZXNvbHZlKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMyLmRlcHRPcHRpb25zID0gcmVzLmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9LCAxMDApOwogICAgfSwKICAgIC8v6I635Y+W5Y2V5L2N5qCRCiAgICBnZXRUcmVlU2VsZWN0OiBmdW5jdGlvbiBnZXRUcmVlU2VsZWN0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgKDAsIF9kZXB0LnRyZWVzZWxlY3QyKSgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgIF90aGlzMy5kZXB0T3B0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQoZGF0YSwgcmVzKSB7CiAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7CiAgICAgICAgZGF0YS5jaGlsZHJlbiA9IFtdOwogICAgICB9CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIG5ld0NoaWxkID0gewogICAgICAgICAgaWQ6IHJlc1tpXS5pZCwKICAgICAgICAgIGxhYmVsOiByZXNbaV0ubGFiZWwsCiAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICB9OwogICAgICAgIGlmICghZGF0YS5jaGlsZHJlbikgewogICAgICAgICAgdGhpcy4kc2V0KGRhdGEsICdjaGlsZHJlbicsIFtdKTsKICAgICAgICB9CiAgICAgICAgZGF0YS5jaGlsZHJlbi5wdXNoKG5ld0NoaWxkKTsKICAgICAgfQogICAgfSwKICAgIC8vIGZvcm3ooajljZXkuK1zZWFyY2joioLngrnljZXlh7vkuovku7YKICAgIGhhbmRsZUZvcm1Ob2RlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUZvcm1Ob2RlQ2xpY2soZGF0YSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgaWYgKGRhdGEuY2hpbGRyZW4pIHt9IGVsc2UgewogICAgICAgIGRlbGV0ZSBkYXRhLmNoaWxkcmVuOwogICAgICB9CiAgICAgICgwLCBfZGVwdC50cmVlc2VsZWN0KSh7CiAgICAgICAgcGFyZW50SWQ6IGRhdGEuaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHJlc3MgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczQuYXBwZW5kKGRhdGEsIHJlc3MpOwogICAgICB9KTsKICAgICAgLy/orrDlvZXngrnlh7vmrKHmlbAKICAgICAgdGhpcy50cmVlQ2xpY2tDb3VudCsrOwogICAgICAvL+WNleasoeeCueWHu+asoeaVsOi2hei/hzLmrKHkuI3kvZzlpITnkIYs55u05o6l6L+U5ZueLOS5n+WPr+S7peaLk+WxleaIkOWkmuWHu+S6i+S7tgogICAgICBpZiAodGhpcy50cmVlQ2xpY2tDb3VudCA+PSAyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8v6K6h5pe25ZmoLOiuoeeulzMwMOavq+enkuS4uuWNleS9jSzlj6/oh6rooYzkv67mlLkKICAgICAgdGhpcy50aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXM0LnRyZWVDbGlja0NvdW50ID09IDEpIHsKICAgICAgICAgIC8v5oqK5qyh5pWw5b2S6Zu2CiAgICAgICAgICBfdGhpczQudHJlZUNsaWNrQ291bnQgPSAwOwogICAgICAgICAgLy/ljZXlh7vkuovku7blpITnkIYKICAgICAgICAgIC8vCQkJCQljb25zb2xlLmxvZygi5Y2V5Ye75LqL5Lu2Iik7CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczQudHJlZUNsaWNrQ291bnQgPiAxKSB7CiAgICAgICAgICAvL+aKiuasoeaVsOW9kumbtgogICAgICAgICAgX3RoaXM0LnRyZWVDbGlja0NvdW50ID0gMDsKICAgICAgICAgIC8v5Y+M5Ye75LqL5Lu2CiAgICAgICAgICBfdGhpczQucXVlcnlQYXJhbXNbX3RoaXM0LmRlcHRDb2RlXSA9IG51bGw7CiAgICAgICAgICBfdGhpczQuZGVwdFBhcmFtc1tfdGhpczQuZGVwdElkXSA9IGRhdGEuaWQ7CiAgICAgICAgICBfdGhpczQuZGVwdFBhcmFtc1tfdGhpczQuZGVwdE5hbWVdID0gZGF0YS5sYWJlbDsKICAgICAgICAgIF90aGlzNC5kZXB0U2VhcmNoRm9ybURpYWxvZyA9IGZhbHNlOwogICAgICAgICAgX3RoaXM0LiRlbWl0KCJpbnB1dCIsIF90aGlzNC5kZXB0UGFyYW1zKTsKICAgICAgICB9CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgLy8gc2VhcmNo562b6YCJ6IqC54K5CiAgICBmaWx0ZXJOb2RlOiBmdW5jdGlvbiBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZGF0YS5sYWJlbC5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UodmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHRoaXMuZGVwdFBhcmFtc1t0aGlzLmRlcHRJZF0gPSAiIjsKICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuZGVwdFBhcmFtcyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliLfmlrDmoJHoioLngrkKICAgIGhhbmRsZVJlZnJlc2g6IGZ1bmN0aW9uIGhhbmRsZVJlZnJlc2goKSB7CiAgICAgIHRoaXMuZGVwdE5hbWVGb3JtID0gIiI7CiAgICAgIHRoaXMuZ2V0VHJlZVNlbGVjdCgpOwogICAgICAvLyAgICB0aGlzLmdldERlcHREYXRhcygpOwogICAgfSwKICAgIC8vIOWxleW8gOaUtue8qeagkee7k+eCuQogICAgaGFuZGxlRXhwYW5kOiBmdW5jdGlvbiBoYW5kbGVFeHBhbmQoZmxhZykgewogICAgICAvLyDlsIbmsqHmnInovazmjaLmiJDmoJHnmoTljp/mlbDmja4KICAgICAgdmFyIHRyZWVMaXN0ID0gdGhpcy5kZXB0T3B0aW9uczsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuJHJlZnMudHJlZUZvcm0uc3RvcmUubm9kZXNNYXBbdHJlZUxpc3RbaV0uaWRdLmV4cGFuZGVkID0gZmxhZzsKICAgICAgfQogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;AAmEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;IACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;IACAG;MACAJ;MACAC;IACA;IACAI;MACAL;MACAC;IACA;IACAK;MACAN;MACAC;IACA;IACA;IACAM;MACAP;MACAC;IACA;EACA;EACAO;IACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAlB;MACA;MACAmB;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAxB;MACAyB;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACAC;MACA;MACA;QAAAtB;MAAA;QACAsB;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAC;MACA;QACAA;MACA;MACAC;QACA;QACA;UAAAC;QAAA;UACAL;UACA;YACAM;UACA;YACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACAP;QACA;QACA;MACA;IACA;IACAQ;MACA;QACA5B;MACA;MACA;QACA;UAAA6B;UAAAtC;UAAAkB;QAAA;QACA;UACA;QACA;QACAT;MACA;IACA;IACA;IACA8B;MAAA;MACA,oBACA;QACA;MACA;MACA;QAAAL;MAAA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;QACA;UACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAM;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACA;MACA;IACA;EACA;AACA;AAAA","names":["name","props","queryParams","label","type","default","size","clearable","readonly","deptId","deptName","deptCode","data","lazy","treeClickCount","deptParams","deptSearchFormDialog","deptNameForm","deptOptions","defaultShowNodes","defaultProps","children","open","loading","defaultExpand","mounted","watch","handler","deep","immediate","methods","deptNameForm2","console","handleClickInput","getDeptDatas","pId","setTimeout","parentId","resolve","getTreeSelect","append","id","handleFormNodeClick","filterNode","handleChange","handleRefresh","handleExpand"],"sourceRoot":"src/views/components/deptSearch","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"deptSearch el-form-item\" >\r\n  \t\t<el-form-item :label=\"label\" :prop=\"deptName\">\r\n       \t<el-input :size=\"size\" :readonly=\"readonly\" :clearable=\"clearable\" @keyup.enter.native=\"handleQuery\" v-on:click.native=\"handleClickInput\" :placeholder=\"`请选择${label}`\" v-model=\"deptParams[deptName]\" @change=\"handleChange\" style=\"width:100%\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"\" :prop=\"deptId\" style=\"display:none\">\r\n\t      <el-input type=\"text\" v-model=\"deptParams[deptId]\" @keyup.enter.native=\"handleQuery\"/>\r\n      </el-form-item>\r\n      <el-dialog custom-class=\"el-button--primary\" :visible.sync=\"deptSearchFormDialog\" id=\"deptDialog\" :close-on-click-modal=\"false\" :title=\"`选择${label}`\" append-to-body\r\n               width=\"500px\" height=\"80%\">\r\n        <div>\r\n          <div class=\"head-container\">\r\n            <el-row>\r\n              <el-col :span=\"16\" class=\"pr5\">\r\n                <el-input\r\n                \t@input = \"deptNameForm2\"\r\n                    v-model=\"deptNameForm\"\r\n                    placeholder=\"请输入机构名称\"\r\n                    clearable\r\n                    size=\"small\"\r\n                    prefix-icon=\"el-icon-search\"\r\n                    style=\"margin-bottom: 20px;\"\r\n                  />\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                  <el-button\r\n                      size=\"mini\"\r\n                      type=\"text\"\r\n                      icon=\"el-icon-refresh\"\r\n                      @click=\"handleRefresh\"\r\n                    >刷新</el-button>\r\n                    <el-button\r\n                      size=\"mini\"\r\n                      type=\"text\"\r\n                      icon=\"el-icon-arrow-down\"\r\n                      @click=\"handleExpand(true)\"\r\n                    >展开</el-button>\r\n                    <el-button\r\n                      size=\"mini\"\r\n                      type=\"text\"\r\n                      icon=\"el-icon-arrow-up\"\r\n                      @click=\"handleExpand(false)\"\r\n                    >折叠</el-button>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n          <div class=\"head-container\">\r\n            <el-tree\r\n            \t:lazy=\"lazy\"\r\n              node-key=\"id\"\r\n              v-loading=\"loading\"\r\n              :data=\"deptOptions\"\r\n              :load=\"getDeptDatas\"\r\n              :props=\"defaultProps\"\r\n              :filter-node-method=\"filterNode\"\r\n              :default-expand-all=\"defaultExpand\"\r\n              ref=\"treeForm\"\r\n              :default-expanded-keys=\"defaultShowNodes\"\r\n              @node-click=\"handleFormNodeClick\"\r\n            />\r\n          </div>\r\n        </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { treeselect,treeselect2,treeselect3 } from '@/api/system/dept'\r\nexport default {\r\n  name: \"index\",\r\n  props: {\r\n    queryParams: Object,\r\n    label: {\r\n      type: String,\r\n      default: \"单位\"\r\n    },\r\n    size: {\r\n      type: String,\r\n      default: \"mini\"\r\n    },\r\n    clearable:{\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    readonly: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    deptId: {\r\n      type: String,\r\n      default: \"deptId\"\r\n    },\r\n    deptName: {\r\n      type: String,\r\n      default: \"deptName\"\r\n    },\r\n    // 需要清空类似 科室的值\r\n    deptCode: {\r\n      type: String,\r\n      default: \"deptCode\"\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n    \tlazy:false,\r\n      //定义点击次数,默认0次\r\n      treeClickCount: 0,\r\n      deptParams: this.queryParams,\r\n      deptSearchFormDialog: false,\r\n      deptNameForm: undefined,\r\n      deptOptions: undefined,\r\n      defaultShowNodes: [], \r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\"\r\n      },\r\n      open: false,\r\n      loading: false,\r\n      // 默认展开所有节点\r\n      defaultExpand: true\r\n    };\r\n  },\r\n  mounted() {\r\n       this.getTreeSelect();\r\n  },\r\n  watch: {\r\n//\tdeptOptions: {\r\n//\t\t\thandler () {\r\n//\t\t\t\tthis.deptOptions.forEach(item => {\r\n//\t\t\t\t\tif(item.children){\r\n//\t\t\t\t\t\titem.children.forEach(item2 => {\r\n//\t\t\t\t\t\t\tthis.defaultShowNodes.push(item2.id)\r\n//\t\t\t\t\t\t})\r\n//\t\t\t\t\t}\r\n//\t\t\t\t})\r\n//\t\t\t},\r\n////\t\t\tdeep: true,\r\n////\t\t\timmediate: true\r\n//\t\t},\r\n    // 根据名称筛选部门树\r\n//  deptNameForm(val) {\r\n//  \ttreeselect({deptName:val}).then(res => {\r\n//  \t\tconsole.log(res);\r\n//\t\t\t\tlet ress = res.data;\r\n//\t\t\t\tthis.deptOptions = ress;\r\n////\t      this.append(data,ress);\r\n//\t    });\r\n////  \tconsole.log(val);\r\n////    this.$refs.treeForm.filter(val);\r\n//  },\r\n    queryParams: {\r\n      handler(val) {\r\n        this.deptParams = val;\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n  \tdeptNameForm2() {\r\n  \t\tconsole.log(this.deptNameForm);\r\n  \t\tthis.loading = true;\r\n    \ttreeselect3({deptName:this.deptNameForm}).then(res => {\r\n    \t\tconsole.log(res);\r\n\t\t\t\tlet ress = res.data;\r\n\t\t\t\tthis.deptOptions = ress;\r\n\t\t\t\tthis.loading = false;\r\n\t    });\r\n    },\r\n    // 点击input\r\n    handleClickInput() {\r\n      if (!this.readonly) {\r\n        this.deptSearchFormDialog = true;\r\n      } else {\r\n        // this.msgError('禁止编辑')\r\n      }\r\n    },\r\n    getDeptDatas(node,resolve) {\r\n      var pId = \"\";\r\n      if (node.level === 0) {\r\n        pId = \"\";\r\n      } else {\r\n        pId = node.data.id;\r\n      }\r\n      setTimeout(() => {\r\n          this.loading = true;\r\n        treeselect({ parentId: pId }).then(res => {\r\n        \tconsole.log(res);\r\n          if (resolve) {\r\n            resolve(res.data);\r\n          } else {\r\n            this.deptOptions = res.data;\r\n          }\r\n          this.loading = false;\r\n        });\r\n      }, 100);\r\n    },\r\n    //获取单位树\r\n    getTreeSelect() {\r\n      this.loading = true;\r\n      treeselect2().then(response => {\r\n      \tconsole.log(response);\r\n        this.deptOptions = response.data;\r\n        this.loading = false;\r\n      });\r\n    },\r\n\tappend(data,res) {\r\n\t\tif(data.children){\r\n\t\t\tdata.children = [];\r\n\t\t}\r\n     \tfor(let i=0;i<res.length;i++){\r\n     \t\tlet newChild = { id: res[i].id, label:res[i].label, children: [] }\r\n\t      \tif (!data.children) {\r\n\t          this.$set(data,'children',[]);\r\n\t       \t}\r\n        \tdata.children.push(newChild);  \r\n     \t}\r\n  \t},\r\n    // form表单中search节点单击事件\r\n    handleFormNodeClick(data) {\r\n    \tif(data.children){\r\n    \t}else{\r\n    \t\tdelete data.children;\r\n    \t}\r\n\t\ttreeselect({ parentId: data.id }).then(res => {\r\n\t\t\tlet ress = res.data;\r\n\t      \tthis.append(data,ress);\r\n\t    });\r\n      //记录点击次数\r\n      this.treeClickCount++;\r\n      //单次点击次数超过2次不作处理,直接返回,也可以拓展成多击事件\r\n      if (this.treeClickCount >= 2) {\r\n        return;\r\n      }\r\n      //计时器,计算300毫秒为单位,可自行修改\r\n      this.timer = window.setTimeout(() => {\r\n        if (this.treeClickCount == 1) {\r\n          //把次数归零\r\n          this.treeClickCount = 0;\r\n          //单击事件处理\r\n          //\t\t\t\t\tconsole.log(\"单击事件\");\r\n        } else if (this.treeClickCount > 1) {\r\n          //把次数归零\r\n          this.treeClickCount = 0;\r\n          //双击事件\r\n          this.queryParams[this.deptCode] = null;\r\n          this.deptParams[this.deptId] = data.id;\r\n          this.deptParams[this.deptName] = data.label;\r\n          this.deptSearchFormDialog = false;\r\n          this.$emit(\"input\", this.deptParams);\r\n        }\r\n      }, 300);\r\n    },\r\n    // search筛选节点\r\n    filterNode(value, data) {\r\n      if (!value) return true;\r\n      return data.label.indexOf(value) !== -1;\r\n    },\r\n    handleChange(value) {\r\n      if (!value) {\r\n        this.deptParams[this.deptId] = \"\";\r\n        this.$emit(\"input\", this.deptParams);\r\n      }\r\n    },\r\n    // 刷新树节点\r\n    handleRefresh() {\r\n    \tthis.deptNameForm = \"\";\r\n      this.getTreeSelect();\r\n//    this.getDeptDatas();\r\n    },\r\n    // 展开收缩树结点\r\n    handleExpand(flag) {\r\n      // 将没有转换成树的原数据\r\n      let treeList = this.deptOptions;\r\n      for (let i = 0; i < treeList.length; i++) {\r\n        this.$refs.treeForm.store.nodesMap[treeList[i].id].expanded = flag;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.deptSearch {\r\n  margin-bottom: 0 !important;\r\n}\r\n// 单位弹框样式更改\r\n#deptDialog {\r\n  ::v-deep .el-dialog {\r\n    height: 80%;\r\n    overflow: hidden;\r\n    .el-dialog__body {\r\n      height: calc(100% - 54px);\r\n      overflow: hidden;\r\n      > div {\r\n        height: 100%;\r\n        .head-container:last-of-type {\r\n          height: calc(100% - 54px);\r\n          overflow-y: auto;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}