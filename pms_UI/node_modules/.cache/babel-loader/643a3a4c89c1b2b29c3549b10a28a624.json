{"remainingRequest":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\hrp\\zjry-pms-ui\\src\\views\\bonus\\calculation\\audit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\hrp\\zjry-pms-ui\\src\\views\\bonus\\calculation\\audit.vue","mtime":1682043107444},{"path":"D:\\hrp\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\hrp\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi9ocnAvempyeS1wbXMtdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIik7CnZhciBfY2FsY3VsYXRpb24gPSByZXF1aXJlKCJAL2FwaS9ib251cy9jYWxjdWxhdGlvbiIpOwp2YXIgX3VudGlsID0gcmVxdWlyZSgiQC9hcGkvdW50aWwiKTsKdmFyIF9idG5zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3ZpZXdzL2JvbnVzLy9idG5zIikpOwp2YXIgX2Zvcm1JdGVtTmV3ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3ZpZXdzL2NvbXBvbmVudHMvZm9ybUl0ZW1OZXciKSk7CnZhciBfY2FsY3VsYXRpb24yID0gcmVxdWlyZSgiLi4vLi4vLi4vYXBpL2JvbnVzL2NhbGN1bGF0aW9uIik7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCnZhciBfZGVmYXVsdCA9IHsKICBuYW1lOiAnYWRkRWRpdCcsCiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpZDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIHByb2NsbnNJZHM6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogJycKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBpZDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICB0aGlzLmlkID0gdmFsOwogICAgICAgICAgdGhpcy5nZXREZXRhaWxJbmZvKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaWQgPSAnJzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIG9wZW46IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CiAgICAgICAgdGhpcy5nZXREZXRhaWxJbmZvKCk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGJ0bnM6IF9idG5zLmRlZmF1bHQsCiAgICBmb3JtSXRlbTogX2Zvcm1JdGVtTmV3LmRlZmF1bHQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJ+WllumHkeWuoeaguOeuoeeQhicsCiAgICAgIG9wZW5EaWFsb2c6IHRoaXMub3BlbiwKICAgICAgc2F2ZUxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIGF1ZGl0U3RhdGVPcHRpb25zOiBbXSwKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIC8vIOS4i+e6p+iKgueCueWKnueQhuS6ugogICAgICBuZXh0QXNzaWduZWU6IFtdLAogICAgICAvL+eUqOaIt+WIl+ihqAogICAgICB1c2VyT3B0aW9uczogW10sCiAgICAgIC8vIOaMiemSrue8lueggQogICAgICBidG4xOiBmYWxzZSwKICAgICAgYnRuMjogZmFsc2UsCiAgICAgIGJ0bjM6IGZhbHNlLAogICAgICBidG40OiBmYWxzZSwKICAgICAgYnRuNTogZmFsc2UsCiAgICAgIGRhdGFzOiB7fQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy5nZXRMaXN0KCk7CiAgICB0aGlzLmdldERpY3RzKCdhc3NldF9hZHVpdF9zdGF0ZScpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzLmF1ZGl0U3RhdGVPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGV0YWlsSW5mbzogZnVuY3Rpb24gZ2V0RGV0YWlsSW5mbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgICgwLCBfY2FsY3VsYXRpb24uZ2V0Q2FsY3VsYXRpb24pKHRoaXMuaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLmZvcm0gPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIHZhciB0aGF0ID0gX3RoaXMyOwogICAgICAgIHZhciBwcm9jbG5zSWRzID0gcmVzcG9uc2UuZGF0YS5wcm9jZWR1cmVJZDsKICAgICAgICAvLyB0aGlzLnByb2NsbnNJZHMgPSByZXNwb25zZS5kYXRhLnByb2NlZHVyZUlkCiAgICAgICAgX3RoaXMyLmRhdGFzID0ge307CiAgICAgICAgKDAsIF91bnRpbC5nZXRFbXBMaXN0KSh0aGF0LCBfdGhpczIuJHN0b3JlLnN0YXRlLnVzZXIubmFtZSwgcHJvY2xuc0lkcywgX3RoaXMyLnVzZXJPcHRpb25zLCBfdGhpczIuYnRuMSwgX3RoaXMyLmJ0bjIsIF90aGlzMi5idG4zLCBfdGhpczIuYnRuNCwgX3RoaXMyLmJ0bjUpOwogICAgICB9KTsKICAgIH0sCiAgICAvKiog5p+l6K+i5aWW6YeR5qC4566X5YiX6KGoICovZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfY2FsY3VsYXRpb24ubGlzdENhbGN1bGF0aW9uKSh0aGlzLnF1ZXJ5UGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5jYWxjdWxhdGlvbkxpc3QgPSByZXNwb25zZS5yb3dzOwogICAgICAgIF90aGlzMy50b3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgIF90aGlzMy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWuoeaguOeKtuaAgeWtl+WFuOe/u+ivkQogICAgYXVkaXRTdGF0ZUZvcm1hdDogZnVuY3Rpb24gYXVkaXRTdGF0ZUZvcm1hdChyb3csIGNvbHVtbikgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5hdWRpdFN0YXRlT3B0aW9ucywgcm93LmF1ZGl0U3RhdGUpOwogICAgfSwKICAgIC8vIOW8ueahhuWFs+mXrQogICAgaGFuZGxlRGlhbG9nQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZURpYWxvZ0Nsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdjYW5jZWwnLCBmYWxzZSk7CiAgICB9LAogICAgLy8g5Y+W5raICiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5vcGVuRGlhbG9nID0gZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoJ2NhbmNlbCcsIGZhbHNlKTsKICAgIH0sCiAgICAvLyDooajljZXph43nva4KICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5mb3JtID0gewogICAgICAgIGlkOiBudWxsLAogICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgcGVyaW9kOiBudWxsLAogICAgICAgIGF1ZGl0U3RhdGU6IG51bGwsCiAgICAgICAgZGVsRmxhZzogbnVsbCwKICAgICAgICBjcmVhdGVCeTogbnVsbCwKICAgICAgICBjcmVhdGVUaW1lOiBudWxsLAogICAgICAgIHVwZGF0ZUJ5OiBudWxsLAogICAgICAgIHVwZGF0ZVRpbWU6IG51bGwsCiAgICAgICAgcmVtYXJrOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMucmVzZXRGb3JtKCdmb3JtJyk7CiAgICB9LAogICAgY2hhbmdlUGVyaW9kOiBmdW5jdGlvbiBjaGFuZ2VQZXJpb2QoKSB7CiAgICAgIHRoaXMuc2V0TmFtZSgpOwogICAgfSwKICAgIC8qKiDmj5DkuqTmjInpkq4gKi9zdWJtaXRGb3JtOiBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICB0aGlzLnNob3dEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGZvcm1JdGVtU3VjY2VzczogZnVuY3Rpb24gZm9ybUl0ZW1TdWNjZXNzKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICB0aGlzLmZvcm0uY29tcENvZGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJJbmZvLmRlcHRJZDsKICAgICAgdGhpcy5zYXZlTG9hZGluZyA9IHRydWU7CiAgICAgICgwLCBfY2FsY3VsYXRpb24yLmNvbW1pdEF1ZGl0KSh0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0Lm1zZ1N1Y2Nlc3MoJ+aPkOS6pOaIkOWKnycpOwogICAgICAgIF90aGlzNC4kZW1pdCgnY2FuY2VsJywgZmFsc2UpOwogICAgICAgIF90aGlzNC5zYXZlTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBzdWNjZXNzU3VibWl0OiBmdW5jdGlvbiBzdWNjZXNzU3VibWl0KCkgewogICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJywgZmFsc2UpOwogICAgfQogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACAF;MACAG;QACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;MACAC;MACAC;IACA;IACAR;MACAM;QACA;QACA;MACA;MACAC;IACA;EACA;EACAE;IAAAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;QACAC;QACA;QACA;QACA;QACA;QACA,uBACAC,MACA,+BACA3B,YACA,oBACA,aACA,aACA,aACA,aACA,YACA;MACA;IACA;IACA,eACA4B;MAAA;MACA;MACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;QACAjC;QACAL;QACAuC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IAEA,WACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA","names":["name","props","open","type","default","id","proclnsIds","watch","handler","deep","immediate","components","btns","formItem","data","title","openDialog","saveLoading","form","auditStateOptions","showDialog","nextAssignee","userOptions","btn1","btn2","btn3","btn4","btn5","datas","created","methods","getDetailInfo","console","that","getList","auditStateFormat","handleDialogClose","cancel","reset","period","auditState","delFlag","createBy","createTime","updateBy","updateTime","remark","changePeriod","submitForm","formItemSuccess","successSubmit"],"sourceRoot":"src/views/bonus/calculation","sources":["audit.vue"],"sourcesContent":["<template>\n  <el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"500px\" custom-class=\"el-button--primary\" append-to-body\n             :close-on-click-modal=\"false\" @close=\"handleDialogClose\" v-loading=\"saveLoading\"\n  >\n    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n      <el-form-item label=\"奖金名称\" prop=\"name\">\n        <el-input v-model=\"form.name\" placeholder=\"请输入奖金名称\" maxlength=\"200\" show-word-limit disabled/>\n      </el-form-item>\n      <el-form-item label=\"奖金年月\" prop=\"period\">\n        <el-date-picker clearable :editable=\"false\" size=\"small\" class=\"w100\"\n                        v-model=\"form.period\" type=\"month\" value-format=\"yyyy-MM-dd\" @change=\"changePeriod\"\n                        placeholder=\"选择奖金年月\" disabled\n        >\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"奖金状态\" prop=\"auditState\">\n        <el-select v-model=\"form.auditState\" filterable clearable disabled class=\"w100\">\n          <el-option\n            v-for=\"dict in auditStateOptions\"\n            :key=\"dict.dictValue\"\n            :label=\"dict.dictLabel\"\n            :value=\"dict.dictValue\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"创建时间\" prop=\"createTime\">\n        <el-input v-model=\"form.createTime\" maxlength=\"200\" show-word-limit disabled/>\n      </el-form-item>\n      <formItem :showDialog.sync=\"showDialog\" :showBaseInfo=\"btn3\" :open=\"btn4\" :open2=\"btn5\" :comment=\"form\"\n                :userOptions=\"userOptions\" @success=\"formItemSuccess\"\n      ></formItem>\n    </el-form>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <btns v-if=\"btn3\" @success=\"successSubmit\" :open=\"btn3\" :id=\"id\" :proclnsIds=\"proclnsIds\" :comment=\"form.comment\"\n            :assignee=\"form.assignee\"\n      ></btns>\n      <el-button v-if=\"btn2\" type=\"primary\" @click=\"submitForm\" :loading=\"saveLoading\">审 批</el-button>\n      <el-button @click=\"cancel\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { getCalculation, listCalculation } from '@/api/bonus/calculation'\nimport { getEmpList } from '@/api/until'\nimport btns from '@/views/bonus//btns'\nimport formItem from '@/views/components/formItemNew'\nimport { commitAudit } from '../../../api/bonus/calculation'\n\nexport default {\n  name: 'addEdit',\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: [String, Number],\n      default: ''\n    },\n    proclnsIds: {\n      type: [String, Number],\n      default: ''\n    }\n  },\n  watch: {\n    id: {\n      handler(val) {\n        this.reset()\n        if (val) {\n          this.id = val\n          this.getDetailInfo()\n        } else {\n          this.id = ''\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    open: {\n      handler(val) {\n        this.openDialog = val\n        this.getDetailInfo()\n      },\n      deep: true\n    }\n  },\n  components: { btns, formItem },\n  data() {\n    return {\n      title: '奖金审核管理',\n      openDialog: this.open,\n      saveLoading: false,\n      // 表单参数\n      form: {},\n      auditStateOptions: [],\n      showDialog: false,\n      // 下级节点办理人\n      nextAssignee: [],\n      //用户列表\n      userOptions: [],\n      // 按钮编码\n      btn1: false,\n      btn2: false,\n      btn3: false,\n      btn4: false,\n      btn5: false,\n      datas: {}\n    }\n  },\n  created() {\n    this.getList()\n    this.getDicts('asset_aduit_state').then(response => {\n      this.auditStateOptions = response.data\n    })\n  },\n  methods: {\n    getDetailInfo() {\n      getCalculation(this.id).then(response => {\n        this.form = response.data\n        console.log(response.data)\n        let that = this\n        let proclnsIds = response.data.procedureId\n        // this.proclnsIds = response.data.procedureId\n        this.datas = {}\n        getEmpList(\n          that,\n          this.$store.state.user.name,\n          proclnsIds,\n          this.userOptions,\n          this.btn1,\n          this.btn2,\n          this.btn3,\n          this.btn4,\n          this.btn5\n        )\n      })\n    },\n    /** 查询奖金核算列表 */\n    getList() {\n      this.loading = true\n      listCalculation(this.queryParams).then(response => {\n        this.calculationList = response.rows\n        this.total = response.total\n        this.loading = false\n      })\n    },\n    // 审核状态字典翻译\n    auditStateFormat(row, column) {\n      return this.selectDictLabel(this.auditStateOptions, row.auditState)\n    },\n    // 弹框关闭\n    handleDialogClose() {\n      this.$emit('cancel', false)\n    },\n    // 取消\n    cancel() {\n      this.openDialog=false\n      this.$emit('cancel', false)\n    },\n    // 表单重置\n    reset() {\n      this.form = {\n        id: null,\n        name: null,\n        period: null,\n        auditState: null,\n        delFlag: null,\n        createBy: null,\n        createTime: null,\n        updateBy: null,\n        updateTime: null,\n        remark: null\n      }\n      this.resetForm('form')\n    },\n    changePeriod() {\n      this.setName()\n    },\n\n    /** 提交按钮 */\n    submitForm() {\n      this.showDialog = true\n    },\n    formItemSuccess(data) {\n      this.form = JSON.parse(JSON.stringify(data))\n      this.form.compCode = this.$store.state.user.userInfo.deptId\n      this.saveLoading = true\n      commitAudit(this.form).then(response => {\n        this.msgSuccess('提交成功')\n        this.$emit('cancel', false)\n        this.saveLoading = false\n      })\n    },\n    successSubmit() {\n      this.$emit('success', false)\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n::v-deep .el-dialog {\n  height: 500px;\n  overflow: hidden;\n\n  .el-dialog__body {\n    height: calc(100% - 100px);\n    overflow: auto;\n  }\n}\n</style>\n"]}]}