{"remainingRequest":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\components\\formDesignAdd\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\src\\views\\components\\formDesignAdd\\index.vue","mtime":1682043105491},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\babel.config.js","mtime":1682043101067},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1682058380827},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1682058377348},{"path":"D:\\ys+jx\\ys+jx\\zjry-pms-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1682058381348}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CnZhciBfdXRpbHMgPSByZXF1aXJlKCJAL2FwaS91dGlscyIpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogJ2FkZEZvcm0nLAogIHByb3BzOiB7CiAgICBvcGVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgZm9ybU1hcmtpbmdJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZm9ybU1hcmtpbmdJZDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMuZm9ybU1hcmtpbmdJZCA9IHZhbDsKICAgICAgICAgIHRoaXMudGl0bGUgPSAi5qih5p2/566h55CGLee8lui+keaooeadvy3mqKHmnb/lrZfmrrUt5paw5aKeIjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIG9wZW46IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB0aGlzLm9wZW5EaWFsb2cgPSB2YWw7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wZW5EaWFsb2c6IGZhbHNlLAogICAgICB0aXRsZTogJ+aooeadv+euoeeQhi3nvJbovpHmqKHmnb8t5qih5p2/5a2X5q61LeaWsOWinicsCiAgICAgIGZvcm1OYW1lOiAnJywKICAgICAganNvbkRhdGE6IHsKICAgICAgICBsaXN0OiBbXQogICAgICB9LAogICAgICBsaXN0OiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5oYW5kbGVGb3JtUmVhZHkoKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5by55qGG5YWz6ZetCiAgICBoYW5kbGVEaWFsb2dDbG9zZTogZnVuY3Rpb24gaGFuZGxlRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNhbmNlbCIsIGZhbHNlKTsKICAgIH0sCiAgICBoYW5kbGVGb3JtUmVhZHk6IGZ1bmN0aW9uIGhhbmRsZUZvcm1SZWFkeSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBmb3JtRGVzaWduSWQgPSB0aGlzLmZvcm1NYXJraW5nSWQ7CiAgICAgICgwLCBfdXRpbHMuZ2V0Rm9ybURlc2lnbikoZm9ybURlc2lnbklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBmb3JtSnNvbiA9IHJlc3BvbnNlLmRhdGEuZm9ybUpzb247CiAgICAgICAgaWYgKGZvcm1Kc29uICE9IG51bGwgJiYgZm9ybUpzb24gIT0gJycpIHsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShmb3JtSnNvbik7CiAgICAgICAgICBkYXRhLnNpemUgPSAibWluaSI7CiAgICAgICAgICBkYXRhLmxpc3QuZm9yRWFjaChmdW5jdGlvbiAoXykgewogICAgICAgICAgICBfLnNpemUgPSAibWluaSI7CiAgICAgICAgICAgIF8ub3B0aW9ucy5kaXNhYmxlZCA9IF8ub3B0aW9ucy5kaXNhYmxlZCA9PSAiZmFsc2UiID8gZmFsc2UgOiB0cnVlOwogICAgICAgICAgICBfLm9wdGlvbnMucmVxdWlyZWQgPSBfLm9wdGlvbnMucmVxdWlyZWQgPT0gImZhbHNlIiA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgXy5jb2x1bW5zICYmIF8uY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGUpIHsKICAgICAgICAgICAgICBpdGUuc3BhbiA9IGl0ZS5zcGFuICogMTsKICAgICAgICAgICAgICBpdGUubGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBpdGVtLnNpemUgPSAibWluaSI7CiAgICAgICAgICAgICAgICBpdGVtLm9wdGlvbnMuZGlzYWJsZWQgPSBpdGVtLm9wdGlvbnMuZGlzYWJsZWQgPT0gImZhbHNlIiA/IGZhbHNlIDogdHJ1ZTsKICAgICAgICAgICAgICAgIGl0ZW0ub3B0aW9ucy5yZXF1aXJlZCA9IGl0ZW0ub3B0aW9ucy5yZXF1aXJlZCA9PSAiZmFsc2UiID8gZmFsc2UgOiB0cnVlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSwnZGF0YScpCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBfdGhpczIuJHJlZnMubWFraW5nZm9ybS5zZXRKU09OKGRhdGEpOwogICAgICAgICAgfSBjYXRjaCAoZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVEYXRhOiBmdW5jdGlvbiBzYXZlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciBzYXZlTG9hZGluZyA9IHRoaXMuc2F2ZUxvYWRpbmcoKTsKICAgICAgdmFyIGpzb24gPSB0aGlzLiRyZWZzLm1ha2luZ2Zvcm0uZ2V0SlNPTigpOwogICAgICAoMCwgX3V0aWxzLnNhdmVEZXNpZ24pKHRoaXMuZm9ybU1hcmtpbmdJZCwganNvbiwgdGhpcy4kcmVmcy5tYWtpbmdmb3JtLmdldEh0bWwoKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgewogICAgICAgICAgX3RoaXMzLm1zZ1N1Y2Nlc3MoIuS/neWtmOaIkOWKnyIpOwogICAgICAgICAgX3RoaXMzLmhhbmRsZURpYWxvZ0Nsb3NlKCk7CiAgICAgICAgICBzYXZlTG9hZGluZy5jbG9zZSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTopobnm5bljp/mnInphY3nva7mlbDmja4/JywgIuitpuWRiiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczQuc2F2ZURhdGEoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge30pOwogICAgfSAvLyBjbG9zZSgpIHsKICAgIC8vIAl0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvZGVsVmlldycsIHRoaXMuJHJvdXRlKQogICAgLy8gCXRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDonL3Rvb2wvZm9ybURlc2lnbicsIHF1ZXJ5OiB7IHQ6IERhdGUubm93KCkgfSB9KQogICAgLy8gfSwKICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":";;;;;;;;AA+BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;IACAD;MACAE;QACA;UACA;UACA;QACA;MACA;MACAC;MACAC;IACA;IACAP;MACAK;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAA;IACA;EACA;EACAC;EACAC;IAAA;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;UACA;UACAV;UACAA;YACAW;YACAA;YACAA;YACAA;cACAC;cACAA;gBACAC;gBACAA;gBACAA;cACA;YACA;UACA;UACA;UACA;YACA;UACA;YACAC;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;UACA;UACA;UACAC;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;QACAC;QACA1B;MACA;QACA;MACA;IAEA,EACA;IACA;IACA;IACA;EACA;AAEA;AAAA","names":["name","props","open","type","default","formMarkingId","watch","handler","deep","immediate","data","openDialog","title","formName","jsonData","list","components","created","methods","handleDialogClose","handleFormReady","_","ite","item","console","saveData","saveLoading","handleSubmit","confirmButtonText","cancelButtonText"],"sourceRoot":"src/views/components/formDesignAdd","sources":["index.vue"],"sourcesContent":["<template>\n\t<div class=\"add_form_dialog\">\n\t\t<el-dialog :title=\"title\" :visible.sync=\"openDialog\" width=\"80%\" custom-class=\"el-button--primary\" append-to-body :close-on-click-modal=\"true\" @close=\"handleDialogClose\">\n\t\t\t<div class=\"dynamicForm\">\n\t\t\t\t<!--  高级定义和布局字段 我不需要就设置为空啦   :advance-fields = '[]'   :layout-fields = '[]'  -->\n\t\t\t\t<fm-making-form\n\t\t\t\t\tref=\"makingform\"\n\t\t\t\t\tstyle=\"height:700px;display: block;\"\n\t\t\t\t\tpreview\n\t\t\t\t\tgenerate-code\n\t\t\t\t\tgenerate-json\n\t\t\t\t>\n\t\t\t\t<!-- 头部内容自定义，添加提交按钮 -->\n\t\t\t\t\t<template slot=\"action\">\n\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-upload\" size=\"mini\" @click=\"handleSubmit\">保存</el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</fm-making-form>\n\t\t\t\t<div class=\"list-wraper previewForm\">\n\t\t\t\t\t<fm-generate-form\n\t\t\t\t\t\t:data=\"jsonData\"\n\t\t\t\t\t\tref=\"generateForm\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</fm-generate-form>\n\t\t\t\t\t<!-- <el-button type=\"primary\" @click=\"handleSubmit\">提交</el-button> -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\nimport { saveDesign,getForm,getFormDesign } from '@/api/utils'\nexport default {\n\tname:'addForm',\n\tprops: {\n\t\topen: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tformMarkingId: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t}\n\t},\n\twatch: {\n\t\tformMarkingId: {\n\t\t\thandler(val) {\n\t\t\t\tif (val) {\n\t\t\t\t\tthis.formMarkingId = val;\n\t\t\t\t\tthis.title = \"模板管理-编辑模板-模板字段-新增\";\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true,\n\t\t\timmediate: true\n\t\t},\n\t\topen: {\n\t\t\thandler(val) {\n\t\t\t\tthis.openDialog = val;\n\t\t\t},\n\t\t\tdeep: true,\n\t\t\timmediate: true\n\t\t}\n  \t},\n    data(){\n        return{\n\t\t  openDialog:false,\n\t\t  title:'模板管理-编辑模板-模板字段-新增',\n          formName:'',\n          jsonData:{\n          \tlist:[],\n\t\t  },\n\t\t  list:[],\n        }\n    },\n    components:{},\n    created() {\n\t\tthis.$nextTick(()=>{\n\t\t\tthis.handleFormReady();\n\t\t})\n    },\n    methods:{\n\t\t// 弹框关闭\n\t\thandleDialogClose() {\n\t\t\tthis.$emit(\"cancel\", false);\n\t\t},\n    \thandleFormReady () {\n\t        const formDesignId = this.formMarkingId;\n\t        getFormDesign(formDesignId).then(response => {\n\t            const formJson = response.data.formJson;\n\t            if(formJson != null && formJson != '') {\n\t\t\t\t\tlet data=JSON.parse(formJson);\n\t\t\t\t\tdata.size=\"mini\"\n\t\t\t\t\tdata.list.forEach(_=>{\n\t\t\t\t\t\t_.size=\"mini\";\n\t\t\t\t\t\t_.options.disabled=_.options.disabled==\"false\"?false:true;\n\t\t\t\t\t\t_.options.required=_.options.required==\"false\"?false:true;\n\t\t\t\t\t\t_.columns && _.columns.forEach(ite=>{\n\t\t\t\t\t\t\tite.span=ite.span * 1;\n\t\t\t\t\t\t\tite.list.forEach(item=>{\n\t\t\t\t\t\t\t\titem.size=\"mini\";\n\t\t\t\t\t\t\t\titem.options.disabled=item.options.disabled==\"false\"?false:true;\n\t\t\t\t\t\t\t\titem.options.required=item.options.required==\"false\"?false:true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t// console.log(data,'data')\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.$refs.makingform.setJSON(data)\n\t\t\t\t\t} catch (d) {\n\t\t\t\t\t\tconsole.log(d)\n\t\t\t\t\t}\n\t            }\n\t        });\n\t    },\n\t\tsaveData(){\n\t\t\tlet saveLoading=this.saveLoading()\n\t\t\t\tconst json = this.$refs.makingform.getJSON();\n\t\t\t\tsaveDesign(this.formMarkingId, json, this.$refs.makingform.getHtml()).then((res)=>{\n\t\t\t\t\tif(res.code==200){\n\t\t\t\t\tthis.msgSuccess(\"保存成功\");\n\t\t\t\t\tthis.handleDialogClose();\n\t\t\t\t\tsaveLoading.close()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n        handleSubmit () {\n\t\t\tthis.$confirm('是否确认覆盖原有配置数据?', \"警告\", {\n\t\t\t\tconfirmButtonText: \"确定\",\n\t\t\t\tcancelButtonText: \"取消\",\n\t\t\t\ttype: \"warning\"\n\t\t\t}).then(()=> {\n\t\t\t\treturn this.saveData()\n\t\t\t}).catch(() => {});\n\n        },\n        // close() {\n        // \tthis.$store.dispatch('tagsView/delView', this.$route)\n        // \tthis.$router.push({ path:'/tool/formDesign', query: { t: Date.now() } })\n      \t// },\n    },\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.add_form_dialog{\n\t::v-deep .el-dialog {\n\t\tmin-height: 10%;\n\t\toverflow: hidden;\n\t\t.el-dialog__body {\n\t\t\tmax-height: auto !important;\n\t\t\toverflow: auto;\n\t\t}\n\t}\n}\n.dynamicForm{\n\t::v-deep .el-aside{\n\t\twidth: 310px !important;\n\t\t&.widget-config-container{\n\t\t\twidth: 350px !important;\n\t\t\t.el-form-item__content{\n\t\t\t\tmargin-left: 0 !important\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n"]}]}