{"remainingRequest":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js!E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\revenuePop\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HRP_JAVA_pms\\pms_UI\\src\\views\\components\\revenuePop\\index.vue","mtime":1693362205214},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\babel.config.js","mtime":1693361824517},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\babel-loader\\lib\\index.js","mtime":1693361909992},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1693361924439},{"path":"E:\\HRP_JAVA_pms\\pms_UI\\node_modules\\vue-loader\\lib\\index.js","mtime":1693362179279}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy9pbXBvcnQgeyBzZWFyY2hGb3JQcm9qZWN0IH0gZnJvbSAiQC9hcGkvbnVtL3JldmVudWUiOwovLyBsYWJlbCDkuLrnqbrml7YgIOiwg+eUqOe7hOS7tiDlop7liqBjbGFzcyBsYWJlbEVtcHR5CnZhciBfZGVmYXVsdDIgPSB7CiAgbmFtZTogImluZGV4IiwKICBwcm9wczogewogICAgLy8g5piv5ZCm56aB55SoCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOS8oOWPguS4umZvcm3ooajljZUg5pa55L6/5pWw5o2u5Zue5pi+5riy5p+TCiAgICBxdWVyeVBhcmFtczogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheV0KICAgIH0sCiAgICBkYXRhczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICByZXZlbnVlQ29kZTogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIGNvbXBDb2RlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgc2V0UHJvcDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJyZXZlbnVlQ29kZSIKICAgIH0sCiAgICBmb3JtUHJvcDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJyZXZlbnVlQ29kZSIKICAgIH0sCiAgICBydWxlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8g6KGo5qC85pWw5o2uCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGZvcm1EYXRhOiB0aGlzLnF1ZXJ5UGFyYW1zLAogICAgICBwYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXR0aW5ncy5wb3BQYWdlU2l6ZQogICAgICB9LAogICAgICB0b3RhbDogMCwKICAgICAgcHJvamVjdFR5cGVPcHRpb25zOiBbXQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBzZXRQcm9wOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgaWYgKHZhbCAhPSAicmV2ZW51ZUNvZGUiICYmIHRoaXMuZm9ybVByb3AgPT0gInJldmVudWVDb2RlIikgewogICAgICAgICAgdGhpcy5mb3JtUHJvcCA9IHZhbDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLmdldERpY3RzKCJjb3N0X3htX2x4IikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMucHJvamVjdFR5cGVPcHRpb25zID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6aG555uu57G75Z6L5a2X5YW457+76K+RCiAgICBwcm9qZWN0VHlwZUZvcm1hdDogZnVuY3Rpb24gcHJvamVjdFR5cGVGb3JtYXQocm93LCBjb2x1bW4pIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGljdExhYmVsKHRoaXMucHJvamVjdFR5cGVPcHRpb25zLCByb3cucmV2ZW51ZVR5cGUpOwogICAgfSwKICAgIC8vIOaQnOe0ouaVsOaNrgogICAgaGFuZGxlSW5wdXQ6IGZ1bmN0aW9uIGhhbmRsZUlucHV0KGUpIHsKICAgICAgaWYgKGUudGFyZ2V0KSB7CiAgICAgICAgdmFyIHNlYXJjaFF1ZXJ5ID0gewogICAgICAgICAgY29tcENvZGU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlckluZm8uZGVwdElkLAogICAgICAgICAgZGVwdENvZGU6IHRoaXMuZm9ybURhdGEuZGVwdENvZGUsCiAgICAgICAgICBub3dEYXRlOiB0aGlzLmZvcm1EYXRhLm5vd0RhdGUuc3BsaXQoIi0iKVswXSArICctJyArIHRoaXMuZm9ybURhdGEubm93RGF0ZS5zcGxpdCgiLSIpWzFdLAogICAgICAgICAgcXVlcnlTdHJpbmc6IGUudGFyZ2V0LnZhbHVlCiAgICAgICAgfTsKICAgICAgICAvLyBzZWFyY2hGb3JQcm9qZWN0KHNlYXJjaFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAvLyAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5yb3dzCiAgICAgICAgLy8gICAgIHRoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICAvLyB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOeCueWHu+ihqOagvOihjAogICAgY2xpY2tSb3c6IGZ1bmN0aW9uIGNsaWNrUm93KHJvdywgY29sdW1uLCBjZWxsLCBldmVudCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW1zW3RoaXMuc2V0UHJvcF0gPSByb3cucmV2ZW51ZUNvZGU7CiAgICAgIHRoaXMuJGVtaXQoImNsaWNrIiwgcm93KTsKICAgICAgdGhpcy4kcmVmcy5wb3BvdmVyLmRvQ2xvc2UoKTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Mjs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AAAA,gBACA;EACAA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;IACA;IACAG;MACAH;MACAC;QACA;MACA;IACA;IACAG;MACAJ;MACAC;IACA;IACAI;MACAL;MACAC;IACA;IACAK;MACAN;MACAC;IACA;IACAM;MACAP;MACAC;IACA;IACAO;MACAR;MACAC;IACA;IACAQ;MACAT;MACAC;QACA;MACA;IACA;EACA;EACAS;IACA;MACA;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;IAEA;EACA;EACAC;IACAX;MACAY;QACA;UACA;QACA;MACA;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACA;UACAnB;UACAoB;UACAC;UACAC;QACA;QACA;QACA;QACA;QACA;MACA;IAEA;IACA;IACAC;MACA;MACA;MACA;IACA;EACA;AACA;AAAA","names":["name","props","disabled","type","default","queryParams","datas","label","revenueCode","compCode","setProp","formProp","rules","data","tableData","formData","params","pageNum","pageSize","total","projectTypeOptions","watch","handler","deep","immediate","created","methods","projectTypeFormat","handleInput","deptCode","nowDate","queryString","clickRow"],"sourceRoot":"src/views/components/revenuePop","sources":["index.vue"],"sourcesContent":["<template>\n<!-- 货架 -->\n    <el-form-item :label=\"label\" :prop=\"formProp\" :rules=\"rules\">\n        <el-popover\n          placement=\"bottom\"\n          ref=\"popover\"\n          width=\"1000\"\n          trigger=\"click\"\n          :disabled = \"disabled\">\n          <el-table  :data=\"tableData\" @cell-click=\"clickRow\"  border stripe height=\"280px\">\n            <el-table-column label=\"项目编码\" align=\"center\" prop=\"revenueCode\" />\n            <el-table-column label=\"项目名称\" align=\"left\" prop=\"revenueName\" />\n            <el-table-column label=\"项目类型\" align=\"center\" prop=\"revenueType\" :formatter=\"projectTypeFormat\" />\n          </el-table>\n          <pagination\n            layout=\"total, prev, pager, next\"\n            v-show=\"total>0\"\n            :total=\"total\"\n            :page.sync=\"params.pageNum\"\n            :limit.sync=\"params.pageSize\"\n            @pagination=\"handleInput\"\n          />\n          <el-input slot=\"reference\" v-model=\"queryParams[setProp]\" :placeholder=\"'请选择'+label\" @input=\"handleInput\" @keyup.enter.native=\"handleInput\"  @focus=\"handleInput\"/>\n        </el-popover>\n      </el-form-item>\n</template>\n\n<script>\n//import { searchForProject } from \"@/api/num/revenue\";\n// label 为空时  调用组件 增加class labelEmpty\nexport default {\n  name: \"index\",\n  props: {\n    // 是否禁用\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    // 传参为form表单 方便数据回显渲染\n    queryParams: {\n      type: [Object, Array]\n    },\n    datas: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    label: {\n      type: String,\n      default: \"\"\n    },\n    revenueCode: {\n      type: [String, Number],\n      default: \"\"\n    },\n    compCode: {\n      type: [String, Number],\n      default: \"\"\n    },\n    setProp: {\n      type: String,\n      default: \"revenueCode\"\n    },\n    formProp: {\n      type: String,\n      default: \"revenueCode\"\n    },\n    rules: {\n      type: Array,\n      default() {\n        return [ ];\n      }\n    },\n  },\n  data() {\n    return {\n      // 表格数据\n      tableData: [],\n      formData: this.queryParams,\n      params: {\n        pageNum: 1,\n        pageSize: this.$store.state.settings.popPageSize,\n      },\n      total: 0,\n      projectTypeOptions:[],\n\n    };\n  },\n  watch: {\n    setProp: {\n      handler(val) {\n        if (val != \"revenueCode\" && this.formProp == \"revenueCode\") {\n          this.formProp = val;\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  created(){\n     this.getDicts(\"cost_xm_lx\").then(response => {\n        this.projectTypeOptions = response.data;\n      });\n  },\n  methods: {\n      // 项目类型字典翻译\n      projectTypeFormat(row, column) {\n        return this.selectDictLabel(this.projectTypeOptions, row.revenueType);\n      },\n    // 搜索数据\n    handleInput(e) {\n      if(e.target){\n          let searchQuery={\n          compCode:this.$store.state.user.userInfo.deptId,\n          deptCode: this.formData.deptCode,\n          nowDate:this.formData.nowDate.split(\"-\")[0]+'-'+this.formData.nowDate.split(\"-\")[1],\n          queryString:e.target.value\n        }\n        // searchForProject(searchQuery).then(response => {\n        //     this.tableData = response.rows\n        //     this.total = response.total;\n        // });\n      }\n\n    },\n    // 点击表格行\n    clickRow(row, column, cell, event) {\n      this.queryParams[this.setProp] = row.revenueCode;\n      this.$emit(\"click\", row);\n      this.$refs.popover.doClose();\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pagination-container {\n  height: 36px !important;\n}\n\n.labelEmpty {\n  ::v-deep .el-form-item {\n    margin-bottom: 12px;\n  }\n  ::v-deep .el-form-item__content {\n    margin-left: 0 !important;\n  }\n}\n</style>\n"]}]}