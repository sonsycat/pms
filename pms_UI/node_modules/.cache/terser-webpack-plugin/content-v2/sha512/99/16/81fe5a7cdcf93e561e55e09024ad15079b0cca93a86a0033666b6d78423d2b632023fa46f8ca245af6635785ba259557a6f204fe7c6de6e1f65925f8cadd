{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-126e501f\"],{\"0013\":function(e,t,o){\"use strict\";o(\"080c\")},\"080c\":function(e,t,o){},\"0e84\":function(e,t,o){\"use strict\";o.d(t,\"b\",(function(){return r})),o.d(t,\"a\",(function(){return a}));var i=o(\"b775\"),n=\"BASE-FRAME\";function r(){return Object(i[\"a\"])({url:\"/auth/license/verify\",method:\"post\",params:{sysCode:n}})}function a(e){return Object(i[\"a\"])({url:\"/auth/license/active\",method:\"post\",params:{sysCode:n,code:e}})}},3147:function(e,t,o){\"use strict\";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",[o(\"el-theme-dialog\",{attrs:{title:\"提示\",visible:e.checkOpen,width:\"300px\",\"append-to-body\":\"\"},on:{\"update:visible\":function(t){e.checkOpen=t},close:e.close}},[o(\"span\",[e._v(\"系统未授权，请激活！\")]),o(\"span\",{attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitCheck}},[e._v(\"确 定\")]),o(\"el-button\",{on:{click:e.close}},[e._v(\"取 消\")])],1)]),o(\"el-theme-dialog\",{attrs:{title:\"授权激活\",visible:e.dialogOpen,width:\"500px\",\"append-to-body\":\"\"},on:{\"update:visible\":function(t){e.dialogOpen=t}}},[o(\"el-form\",{ref:\"activeForm\",attrs:{model:e.activeForm,rules:e.activeFormRules,\"label-width\":\"100px\"}},[o(\"el-form-item\",{attrs:{label:\"机器码\",prop:\"mcode\"}},[o(\"el-input\",{attrs:{readonly:\"readonly\"},model:{value:e.activeForm.mcode,callback:function(t){e.$set(e.activeForm,\"mcode\",t)},expression:\"activeForm.mcode\"}})],1),o(\"el-form-item\",{attrs:{label:\"授权码\",prop:\"code\"}},[o(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入授权码\"},model:{value:e.activeForm.code,callback:function(t){e.$set(e.activeForm,\"code\",t)},expression:\"activeForm.code\"}})],1)],1),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitActiveForm}},[e._v(\"确认激活\")]),o(\"el-button\",{on:{click:e.closeActiveForm}},[e._v(\"关 闭\")])],1)],1)],1)},n=[],r=(o(\"a9e3\"),o(\"0e84\")),a={props:{open:{type:Boolean,default:!1},mcode:{type:[String,Number],default:\"\"}},data:function(){return{checkOpen:this.open,dialogOpen:!1,activeFormRules:{code:[{required:!0,trigger:\"blur\",message:\"授权码不能为空\"}]},activeForm:{mcode:\"\",code:\"\"}}},methods:{submitCheck:function(){this.dialogOpen=!0,this.resetForm(\"activeForm\"),this.activeForm.mcode=this.mcode},submitActiveForm:function(){var e=this;this.$refs.activeForm.validate((function(t){t&&Object(r[\"a\"])(e.activeForm.code).then((function(t){console.log(\"active return code:\"+t.code),0==t.code?(e.$emit(\"success\"),e.dialogOpen=!1):(e.$emit(\"error\",t.msg),e.dialogOpen=!1)}))}))},close:function(){this.$emit(\"cancel\")},closeActiveForm:function(){this.dialogOpen=!1}}},s=a,c=o(\"2877\"),l=Object(c[\"a\"])(s,i,n,!1,null,null,null);t[\"default\"]=l.exports},\"4ff7\":function(e,t,o){e.exports=o.p+\"static/img/loginLeft.91e6c6e4.png\"},\"6dab\":function(e,t,o){\"use strict\";o.r(t);var i=o(\"0e84\");t[\"default\"]={data:function(){return{mcode:\"\",open:!1}},methods:{licenseLogin:function(){var e=this;Object(i[\"b\"])().then((function(t){if(0==t.code){var o=t.data;o.result?(e.open=!0,e.mcode=t.data.mac,console.log(\"mcode:\"+t.data.mac)):e.handleLogin()}else e.$msgbox(t.msg)}))},cancel:function(){this.open=!1},successActive:function(){this.msgSuccess(\"激活成功！\"),this.cancel(),this.handleLogin()},errorActive:function(e){this.$message.error(e)}}}},dd7b:function(e,t,o){\"use strict\";o.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"login\"},[i(\"el-row\",[i(\"el-col\",{staticClass:\"login_title\",attrs:{span:24}},[e._v(\" 绩效管理 \")])],1),i(\"el-row\",{attrs:{type:\"flex\",justify:\"center\"}},[i(\"el-col\",{staticClass:\"hrbgc text-center\",attrs:{span:10}},[i(\"img\",{staticClass:\"leftImg\",attrs:{src:o(\"4ff7\"),alt:\"light\"}})]),i(\"el-col\",{attrs:{span:5}},[i(\"el-form\",{ref:\"loginForm\",staticClass:\"login-form\",attrs:{model:e.loginForm,rules:e.loginRules}},[i(\"h3\",{staticClass:\"title\"},[e._v(\"用户登录\")]),i(\"el-form-item\",{attrs:{prop:\"username\"}},[i(\"el-input\",{attrs:{type:\"text\",\"auto-complete\":\"off\",placeholder:\"账号\"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,\"username\",t)},expression:\"loginForm.username\"}},[i(\"svg-icon\",{staticClass:\"el-input__icon input-icon\",attrs:{slot:\"prefix\",\"icon-class\":\"user\"},slot:\"prefix\"})],1)],1),i(\"el-form-item\",{attrs:{prop:\"password\"}},[i(\"el-input\",{attrs:{type:\"password\",\"auto-complete\":\"off\",placeholder:\"密码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,\"password\",t)},expression:\"loginForm.password\"}},[i(\"svg-icon\",{staticClass:\"el-input__icon input-icon\",attrs:{slot:\"prefix\",\"icon-class\":\"password\"},slot:\"prefix\"})],1)],1),e.captchaFlag?i(\"el-form-item\",{attrs:{prop:\"code\"}},[i(\"el-input\",{staticStyle:{width:\"63%\"},attrs:{\"auto-complete\":\"off\",placeholder:\"验证码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleLogin(t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,\"code\",t)},expression:\"loginForm.code\"}},[i(\"svg-icon\",{staticClass:\"el-input__icon input-icon\",attrs:{slot:\"prefix\",\"icon-class\":\"validCode\"},slot:\"prefix\"})],1),i(\"div\",{staticClass:\"login-code\"},[i(\"img\",{staticClass:\"login-code-img\",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1):e._e(),i(\"el-checkbox\",{staticStyle:{margin:\"0px 0px 25px 0px\"},model:{value:e.loginForm.rememberPwd,callback:function(t){e.$set(e.loginForm,\"rememberPwd\",t)},expression:\"loginForm.rememberPwd\"}},[e._v(\"记住密码\")]),i(\"el-form-item\",{staticStyle:{width:\"100%\"}},[i(\"el-button\",{staticStyle:{width:\"100%\"},attrs:{loading:e.loading,size:\"medium\",type:\"primary\"},nativeOn:{click:function(t){return t.preventDefault(),e.licenseLogin(t)}}},[e.loading?i(\"span\",[e._v(\"登 录 中...\")]):i(\"span\",[e._v(\"登 录\")])])],1)],1)],1)],1),i(\"el-row\",{staticClass:\"footer-text\"},[i(\"el-col\",{attrs:{span:24}},[e._v(\"Copyright © 2018-2022 北京数字心医科技股份有限公司\")])],1),e.open?i(\"loginCheck\",{attrs:{open:e.open,mcode:e.mcode},on:{cancel:e.cancel,success:e.successActive,error:e.errorActive}}):e._e()],1)},n=[],r=o(\"7ded\"),a=o(\"c0c3\"),s=o(\"a78e\"),c=o.n(s),l=o(\"21f2\"),d=(o(\"0e84\"),o(\"3147\")),m=o(\"6dab\"),u={name:\"Login\",mixins:[m[\"default\"]],components:{loginCheck:d[\"default\"]},data:function(){return{captchaKey:\"login-captchaFlag\",captchaFlag:!0,codeUrl:\"\",cookiePassword:\"\",loginForm:{username:\"\",password:\"\",rememberPwd:!1,rememberMe:!1,code:\"\",uuid:\"\"},loginRules:{username:[{required:!0,trigger:\"blur\",message:\"用户名不能为空\"}],password:[{required:!0,trigger:\"blur\",message:\"密码不能为空\"}],code:[{required:!0,trigger:\"change\",message:\"验证码不能为空\"}]},loading:!1,redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getConfigCaptchaFlag(),this.getCode(),this.getCookie()},methods:{getConfigCaptchaFlag:function(){var e=this;Object(a[\"e\"])(\"login.captchaFlag\").then((function(t){\"1\"===t.msg?e.captchaFlag=!0:\"0\"===t.msg?e.captchaFlag=!1:e.captchaFlag=!0}))},getCode:function(){var e=this;Object(r[\"b\"])().then((function(t){e.codeUrl=\"data:image/gif;base64,\"+t.img,e.loginForm.uuid=t.uuid}))},getCookie:function(){var e=c.a.get(\"username\"),t=c.a.get(\"password\"),o=c.a.get(\"rememberPwd\");this.loginForm={username:void 0===e?this.loginForm.username:e,password:void 0===t?this.loginForm.password:Object(l[\"a\"])(t),rememberPwd:void 0!==o&&Boolean(o)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&(e.loading=!0,e.loginForm.rememberPwd?(c.a.set(\"username\",e.loginForm.username,{expires:30}),c.a.set(\"password\",Object(l[\"b\"])(e.loginForm.password),{expires:30}),c.a.set(\"rememberPwd\",e.loginForm.rememberPwd,{expires:30})):(c.a.remove(\"username\"),c.a.remove(\"password\"),c.a.remove(\"rememberPwd\")),e.$store.dispatch(\"Login\",e.loginForm).then((function(t){200==t.code?(sessionStorage.setItem(\"indexDialogVisible\",\"1\"),e.$router.push({path:e.redirect||\"/\"}).catch((function(){}))):(e.msgError(t.msg),e.loginForm.code=\"\",e.loading=!1,e.getCode())})).catch((function(){e.loading=!1,e.getCode()})))}))}}},p=u,g=(o(\"0013\"),o(\"2877\")),f=Object(g[\"a\"])(p,i,n,!1,null,null,null);t[\"default\"]=f.exports}}]);","extractedComments":[]}