{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7dcdbafa\"],{\"0b70\":function(t,e,o){\"use strict\";o.d(e,\"c\",(function(){return u})),o.d(e,\"a\",(function(){return d})),o.d(e,\"e\",(function(){return p})),o.d(e,\"d\",(function(){return m}));var n=o(\"b775\"),s=o(\"4360\"),a=o(\"2b0e\"),r=a[\"default\"].prototype.processUrl;function i(t){return Object(n[\"a\"])({url:\"\".concat(r,\"/api/wf/queryTaskBtnConfigs\"),method:\"post\",params:t})}function c(t){return Object(n[\"a\"])({url:\"\".concat(r,\"/api/wf/queryNextAssignee\"),method:\"post\",params:t})}function l(t,e,o,s){return Object(n[\"a\"])({url:\"/basic/public/queryEmpInfo?compCode=\"+t+\"&deptCode=\"+e+\"&postCode=\"+o+\"&searchName=\"+s,method:\"get\"})}function u(t){var e=arguments.length>2?arguments[2]:void 0,o=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,d=s[\"a\"].state.user.userInfo.userId,p=s[\"a\"].state.user.userInfo.dept.deptId;if(console.log(\"abc\"+e+\"_____\"+o+\"_\"+n+\"_\"+a+\"_\"+r+\"_\"+u+\"_\"),null==e||\"\"==e)t.btn1=!0;else{var m={systemId:\"PMS\",userId:d,procInsId:e};i(m).then((function(e){console.log(\"11111=\"+e.data.btnCode),\"2\"==e.data.btnCode?(t.btn1=!0,t.btn2=!0,t.btn4=!0,c(m).then((function(e){if(console.log(e.data),\"0\"==e.data.type);else if(\"1\"==e.data.type){t.btn5=!0;var o=p,n=\"\",s=\"\",a=e.data.assigneeId;l(o,s,n,a).then((function(e){console.log(e),t.userOptions=e.rows}))}else if(\"2\"==e.data.type){t.btn5=!0;var r=p,i=\"\",c=\"\",u=\"\";l(r,c,i,u).then((function(e){console.log(e),t.userOptions=e.rows}))}else if(\"3\"==e.data.type){t.btn5=!0;var d=p,m=\"\",f=\"\",h=\"\";l(d,f,m,h).then((function(e){console.log(e),t.userOptions=e.rows}))}else if(\"4\"==e.data.type){t.btn5=!0;var g=p,b=\"\",v=\"\",y=e.data.backUserId;l(g,v,b,y).then((function(e){console.log(e),t.userOptions=e.rows}))}}))):\"3\"==e.data.btnCode?(t.btn3=!0,t.btn4=!0,c(m).then((function(e){if(console.log(e.data.type),\"0\"==e.data.type);else if(\"1\"==e.data.type){t.btn5=!0;var o=p,n=\"\",s=\"\",a=e.data.assigneeId;l(o,s,n,a).then((function(e){console.log(e),t.userOptions=e.rows}))}else if(\"2\"==e.data.type){t.btn5=!0;var r=p,i=\"\",c=\"\",u=\"\";l(r,c,i,u).then((function(e){console.log(e),t.userOptions=e.rows}))}else if(\"3\"==e.data.type){t.btn5=!0;var d=p,m=\"\",f=\"\",h=\"\";l(d,f,m,h).then((function(e){console.log(e),t.userOptions=e.rows}))}else if(\"4\"==e.data.type){t.btn5=!0;var g=p,b=\"\",v=\"\",y=e.data.backUserId;l(g,v,b,y).then((function(e){console.log(e),t.userOptions=e.rows}))}}))):\"1\"==e.data.btnCode&&(t.btn1=!0)})).catch((function(t){console.log(t)}))}}function d(t){return Object(n[\"a\"])({url:\"/emp/empinfo/checkInfo\",method:\"get\",params:t})}function p(t){return Object(n[\"a\"])({url:\"/system/dept/treeselect\",method:\"get\",params:t})}function m(t){return Object(n[\"a\"])({url:\"/system/room/list\",method:\"get\",params:t})}},\"0e67\":function(t,e,o){\"use strict\";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",[t.dialogOpen?o(\"el-dialog\",{attrs:{title:\"提示\",visible:t.dialogOpen,width:\"500px\",\"close-on-click-modal\":!1,\"custom-class\":\"el-button--primary\",\"append-to-body\":\"\",\"before-close\":t.onClose},on:{\"update:visible\":function(e){t.dialogOpen=e}}},[o(\"ul\",[t._v(\"当前节点：\"+t._s(t.currActivity))]),o(\"el-row\",[o(\"el-form\",{ref:\"formItem\",attrs:{model:t.comment,\"label-width\":\"80px\"}},[o(\"el-col\",{attrs:{span:24}},[t.openDialog?o(\"el-form-item\",{attrs:{label:\"审核意见\",prop:\"comment\"}},[o(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入审核意见\"},model:{value:t.comment.comment,callback:function(e){t.$set(t.comment,\"comment\",e)},expression:\"comment.comment\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:24}},[t.openDialog2?o(\"staffSearch\",{attrs:{label:\"下节点审核人\",rules:t.assigneeRules,staffParams:t.comment,formItemProp:\"assignee\",inputProp:\"assigneepName\",userInfoList:t.userOptions},on:{\"update:staffParams\":function(e){t.comment=e},\"update:staff-params\":function(e){t.comment=e}}}):t._e()],1)],1)],1),o(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{on:{click:t.onClose}},[t._v(\"取 消\")]),o(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.sureStaffClick}},[t._v(\"确 定\")])],1)],1):t._e(),t.showBaseInfoCard?o(\"el-card\",{staticClass:\"mb20 mt10\"},[o(\"ul\",[t._v(\"当前节点：\"+t._s(t.currActivity))]),o(\"el-row\",[o(\"el-form\",{ref:\"formItem\",attrs:{model:t.comment,\"label-width\":\"80px\"}},[o(\"el-col\",{attrs:{span:24}},[t.openDialog?o(\"el-form-item\",{attrs:{label:\"审核意见\",prop:\"comment\"}},[o(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入审核意见\"},model:{value:t.comment.comment,callback:function(e){t.$set(t.comment,\"comment\",e)},expression:\"comment.comment\"}})],1):t._e()],1),o(\"el-col\",{attrs:{span:12}},[t.openDialog2?o(\"staffSearch\",{attrs:{label:\"下节点审核人\",rules:t.assigneeRules,staffParams:t.comment,formItemProp:\"assignee\",inputProp:\"assigneepName\",userInfoList:t.userOptions},on:{handleStaff:t.handleStaff,\"update:staffParams\":function(e){t.comment=e},\"update:staff-params\":function(e){t.comment=e}}}):t._e()],1)],1)],1)],1):t._e()],1)},s=[],a=o(\"12df\"),r={name:\"addEdit\",components:{},props:{open:{type:Boolean,default:!1},open2:{type:Boolean,default:!1},comment:{type:Object,default:{}},userOptions:{type:Array,default:{}},showDialog:{type:Boolean,default:!1},showBaseInfo:{type:Boolean,default:!1}},data:function(){return{showBaseInfoCard:!1,dialogOpen:this.showDialog,openDialog:this.open,openDialog2:this.open2,userOptions2:this.userOptions,currActivity:null,proclnsId:null,assigneeRules:[{required:!0,message:\"下节点审核人不能为空\",trigger:[\"change\",\"blur\"]}]}},watch:{showBaseInfo:{handler:function(t){this.showBaseInfoCard=t},deep:!0,immediate:!0},showDialog:{handler:function(t){this.dialogOpen=t},deep:!0,immediate:!0},open:{handler:function(t){this.openDialog=t},deep:!0},open2:{handler:function(t){this.openDialog2=t},deep:!0},userOptions:{handler:function(t){this.userOptions2=t},deep:!0},\"comment.procedureId\":{handler:function(t){this.proclnsId=t,this.getList()},deep:!0,immediate:!0}},methods:{handleStaff:function(t){console.log(t),this.$emit(\"formItem\",t)},getList:function(){var t=this;if(null==this.proclnsId||\"\"==this.proclnsId);else{var e={procInsId:this.proclnsId,userId:this.$store.state.user.userInfo.userId};Object(a[\"b\"])(e).then((function(e){200==e.code?t.currActivity=e.data.activityName:t.msgError(e.msg)}))}},onClose:function(){this.$emit(\"update:showDialog\",!1)},sureStaffClick:function(){var t=this;this.$refs.formItem.validate((function(e){e&&(t.$emit(\"success\",t.comment),t.onClose())}))}},mounted:function(){}},i=r,c=o(\"2877\"),l=Object(c[\"a\"])(i,n,s,!1,null,null,null);e[\"default\"]=l.exports},\"12df\":function(t,e,o){\"use strict\";o.d(e,\"i\",(function(){return r})),o.d(e,\"j\",(function(){return i})),o.d(e,\"g\",(function(){return c})),o.d(e,\"h\",(function(){return l})),o.d(e,\"f\",(function(){return u})),o.d(e,\"b\",(function(){return d})),o.d(e,\"e\",(function(){return p})),o.d(e,\"a\",(function(){return m})),o.d(e,\"k\",(function(){return f})),o.d(e,\"c\",(function(){return h})),o.d(e,\"d\",(function(){return g}));var n=o(\"b775\"),s=o(\"2b0e\"),a=s[\"default\"].prototype.processUrl;function r(t){return Object(n[\"a\"])({url:\"/process/model/list\",method:\"get\",params:t})}function i(t){return Object(n[\"a\"])({url:\"\".concat(a,\"/api/wf/getMyProcesses?systemId=PMS\"),method:\"post\",params:t})}function c(t){return Object(n[\"a\"])({url:\"\".concat(a,\"/api/wf/todoList\"),method:\"post\",params:t})}function l(t){return Object(n[\"a\"])({url:\"\".concat(a,\"/api/wf/runningList\"),method:\"post\",params:t})}function u(t){return Object(n[\"a\"])({url:\"\".concat(a,\"/api/wf/historicList\"),method:\"post\",params:t})}function d(t){return Object(n[\"a\"])({url:\"\".concat(a,\"/api/wf/queryCurrActivity\"),method:\"post\",params:t})}function p(t){return Object(n[\"a\"])({url:\"/process/model/\"+t,method:\"get\"})}function m(t){return Object(n[\"a\"])({url:\"/process/model\",method:\"post\",data:t})}function f(t){return Object(n[\"a\"])({url:\"/process/model\",method:\"put\",data:t})}function h(t){return Object(n[\"a\"])({url:\"/process/model/\"+t,method:\"delete\"})}function g(t){return Object(n[\"a\"])({url:\"/process/model/export\",method:\"get\",params:t})}},\"36c7\":function(t,e,o){\"use strict\";o(\"57c4\")},\"3b86\":function(t,e,o){\"use strict\";o.d(e,\"a\",(function(){return s})),o.d(e,\"d\",(function(){return a})),o.d(e,\"c\",(function(){return r})),o.d(e,\"b\",(function(){return i}));var n=o(\"b775\");function s(t){return Object(n[\"a\"])({url:\"/evaluate/data/getAccountPersonIndex\",method:\"get\",params:t})}function a(t){return Object(n[\"a\"])({url:\"/evaluate/data/listAccountPersonBonus\",method:\"get\",params:t})}function r(t){return Object(n[\"a\"])({url:\"/evaluate/data/doctorListNotBonus\",method:\"get\",params:t})}function i(t){return Object(n[\"a\"])({url:\"/evaluate/data/deptList\",method:\"get\",params:t})}},\"57c4\":function(t,e,o){},\"986b\":function(t,e,o){\"use strict\";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"span\",[t.openDialog?o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-circle-check\"},on:{click:t.examineSubmitForm1}},[t._v(\"审核通过\")]):t._e(),t.openDialog?o(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-circle-check\"},on:{click:t.examineSubmitForm2}},[t._v(\"审核驳回\")]):t._e()],1)},s=[],a=(o(\"a9e3\"),o(\"e472\")),r={name:\"addEdit\",components:{},props:{id:{type:[String,Number],default:\"\"},proclnsIds:{type:[String,Number],default:\"\"},comment:{type:[String,Number],default:\"\"},assignee:{type:[String,Number],default:\"\"},open:{type:Boolean,default:!1}},data:function(){return{openDialog:this.open,id2:this.id,proclnsIds2:this.proclnsIds,comment2:this.comment,assignee2:this.assignee}},computed:{},watch:{open:{handler:function(t){this.openDialog=t},deep:!0},id:{handler:function(t){this.id2=t},deep:!0},proclnsIds:{handler:function(t){this.proclnsIds2=t},deep:!0},comment:{handler:function(t){this.comment2=t},deep:!0},assignee:{handler:function(t){this.assignee2=t},deep:!0}},mounted:function(){},methods:{examineSubmitForm1:function(){var t=this,e={id:this.id2,procedureId:this.proclnsIds2,comment:this.comment2,assignee:this.$store.state.user.userInfo.userId,auditState:\"2\"},o=this.saveLoading(\"审核中...\");Object(a[\"g\"])(e).then((function(e){200==e.code?(console.log(e),t.msgSuccess(\"审核成功\"),t.$emit(\"success\",!1)):t.msgError(e.msg),o.close()})).catch((function(){o.close()}))},examineSubmitForm2:function(){var t=this,e={id:this.id2,procedureId:this.proclnsIds2,comment:this.comment2,auditState:\"3\"},o=this.saveLoading(\"审核中...\");Object(a[\"g\"])(e).then((function(e){console.log(e),200==e.code?(t.msgSuccess(\"驳回成功\"),t.$emit(\"success\")):t.msgError(e.msg),o.close()})).catch((function(){o.close()}))},examineSubmitForm3:function(){var t=this,e={id:this.id2,procedureId:this.proclnsIds2,comment:this.comment2,auditState:\"4\"},o=this.saveLoading(\"审核中...\");Object(a[\"g\"])(e).then((function(e){200==e.code?(console.log(e),t.msgSuccess(\"终止成功\"),t.$emit(\"success\")):t.msgError(e.msg),o.close()})).catch((function(){o.close()}))}}},i=r,c=o(\"2877\"),l=Object(c[\"a\"])(i,n,s,!1,null,null,null);e[\"default\"]=l.exports},c466:function(t,e,o){\"use strict\";o.d(e,\"a\",(function(){return n})),o.d(e,\"b\",(function(){return s})),o.d(e,\"c\",(function(){return a}));o(\"792b\"),o(\"4360\");function n(){var t=new Date,e=t.getFullYear();return e+=\"\",e}function s(){var t=new Date,e=t.getFullYear(),o=t.getMonth()+1<10?\"0\"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?\"0\"+t.getDate():t.getDate(),s=e+\"-\"+o+\"-\"+n;return s}function a(){var t=new Date,e=t.getFullYear(),o=(t.getMonth(),t.getMonth()+1);o<10&&(o=\"0\"+o);var n=e+\"-\"+o;return n}},d623:function(t,e,o){\"use strict\";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"el-dialog\",{attrs:{title:t.title,visible:t.openDialog,width:\"50%\",\"custom-class\":\"el-button--primary\",\"append-to-body\":\"\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.openDialog=e},close:t.handleDialogClose}},[o(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rules,\"label-width\":\"80px\",inline:!0}},[o(\"el-row\",{attrs:{gutter:20}},[o(\"el-col\",{attrs:{span:24}},[o(\"el-form-item\",{attrs:{label:\"科室\",prop:\"deptCode\"}},[o(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{filterable:\"\",placeholder:\"请选择科室\"},on:{change:t.changeDept},model:{value:t.form.deptRoomCode,callback:function(e){t.$set(t.form,\"deptRoomCode\",e)},expression:\"form.deptRoomCode\"}},t._l(t.deptList,(function(t){return o(\"el-option\",{key:t.deptRoomCode,attrs:{label:t.deptRoomName,value:t.deptRoomCode}})})),1)],1),o(\"el-form-item\",[o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:t.handleQuery}},[t._v(\"搜索\")]),o(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:t.resetQuery}},[t._v(\"重置\")])],1)],1),o(\"el-col\",{attrs:{span:12}},[o(\"el-card\",[o(\"el-col\",{attrs:{span:12}},[o(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[t._v(\"待选人员\")])]),o(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.indexListLoading,expression:\"indexListLoading\"}],staticStyle:{\"margin-top\":\"10px\"},attrs:{data:t.roleList,height:\"500px\",\"row-class-name\":t.tableRowClassName},on:{select:t.selectionProject,\"row-click\":t.rowClickWaitClass}},[o(\"el-table-column\",{attrs:{label:\"人员\",align:\"left\",prop:\"docName\",\"show-overflow-tooltip\":\"\"}})],1)],1)],1),o(\"el-col\",{staticClass:\"mb10\",attrs:{span:12}},[o(\"el-card\",[o(\"el-col\",{attrs:{span:12}},[o(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[t._v(\"已选人员\")])]),o(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.roleSelectedListLoading,expression:\"roleSelectedListLoading\"}],staticStyle:{\"margin-top\":\"10px\"},attrs:{data:t.roleSelectedList,height:\"500px\",\"row-class-name\":t.tableRowClassName},on:{\"row-click\":t.rowClickHasClass,select:t.selectionProjectDept}},[o(\"el-table-column\",{attrs:{label:\"人员\",align:\"left\",prop:\"docName\",\"show-overflow-tooltip\":\"\"}})],1)],1)],1)],1)],1),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.submitForm}},[t._v(\"保 存\")]),o(\"el-button\",{on:{click:t.cancel}},[t._v(\"取 消\")])],1)],1)},s=[],a=(o(\"a434\"),o(\"d81d\"),o(\"4de4\"),o(\"d3b7\"),o(\"caad\"),o(\"2532\"),o(\"3b86\")),r={name:\"select\",props:{openSelect:{type:Boolean,default:!1},deptCode:{type:String,default:null},actDate:{type:String,default:null},doctorList:{type:Array,default:[]}},data:function(){return{title:\"选择新增人员\",openDialog:this.openSelect,roleSelectedListLoading:!1,indexListLoading:!1,form:{docName:\"\"},rules:{},queryParamsIndex:{pageNum:1,pageSize:this.$store.state.settings.pageSize,compCode:this.$store.state.user.userInfo.deptId},queryParamsIndexSelected:{pageNum:1,pageSize:this.$store.state.settings.pageSize,compCode:this.$store.state.user.userInfo.deptId,setCode:null},roleList:[],roleSelectedList:[],deptList:[],docCodeList:[]}},created:function(){this.getList(this.deptCode),this.getDeptList(),this.deptRoomCode=\"\"},mounted:function(){},methods:{resetQuery:function(){this.form.deptRoomCode=\"\",this.deptRoomCode=\"\"},handleQuery:function(){this.getList(this.deptCode)},tableRowClassName:function(t){var e=t.row,o=t.rowIndex;e.index=o},selectionProject:function(t,e){this.rowClickWaitClass(t[0])},rowClickWaitClass:function(t){for(var e in this.roleSelectedList)if(t.docCode==this.roleSelectedList[e].docCode)return void this.msgError(\"此人员已有奖金数据，无法重复添加！\");var o=t.docCode,n=t.docName;this.roleSelectedList.push({docCode:o,docName:n}),this.roleList.splice(t.index,1)},selectionProjectDept:function(t,e){this.rowClickHasClass(t[0])},rowClickHasClass:function(t){for(var e in this.roleList)if(t.docCode==this.roleList[e].docCode)return void this.msgError(\"此人员奖金数据不允许删除！\");var o=t.docCode,n=t.docName;this.roleList.push({docCode:o,docName:n}),this.roleSelectedList.splice(t.index,1)},getList:function(){var t=this;Object(a[\"c\"])({deptCode:this.deptCode,actDate:this.actDate,deptRoomCode:this.deptRoomCode}).then((function(e){t.roleList=e.rows;var o=t.doctorList.map((function(t){return t.docCode}));t.roleList=t.roleList.filter((function(t){return!o.includes(t.docCode)}))}))},getDeptList:function(){var t=this;this.loading=!0,Object(a[\"b\"])().then((function(e){t.deptList=e.rows,t.loading=!1}))},handleDialogClose:function(){this.$emit(\"cancelSelect\",!1)},cancel:function(){this.$emit(\"cancelSelect\",!1)},submitForm:function(){this.$emit(\"docCodeList\",this.roleSelectedList),this.$emit(\"cancelSelect\",!1)},changeDept:function(t){this.deptRoomCode=t}}},i=r,c=(o(\"36c7\"),o(\"2877\")),l=Object(c[\"a\"])(i,n,s,!1,null,\"a13ecc5a\",null);e[\"default\"]=l.exports},e472:function(t,e,o){\"use strict\";o.d(e,\"f\",(function(){return s})),o.d(e,\"d\",(function(){return a})),o.d(e,\"a\",(function(){return r})),o.d(e,\"h\",(function(){return i})),o.d(e,\"b\",(function(){return c})),o.d(e,\"c\",(function(){return l})),o.d(e,\"g\",(function(){return u})),o.d(e,\"e\",(function(){return d}));var n=o(\"b775\");function s(t){return Object(n[\"a\"])({url:\"/bonus/audit/list\",method:\"get\",params:t})}function a(t){return Object(n[\"a\"])({url:\"/bonus/audit/\"+t,method:\"get\"})}function r(t){return Object(n[\"a\"])({url:\"/bonus/audit\",method:\"post\",data:t})}function i(t){return Object(n[\"a\"])({url:\"/bonus/audit\",method:\"put\",data:t})}function c(t){return Object(n[\"a\"])({url:\"/bonus/audit/\"+t,method:\"delete\"})}function l(t){return Object(n[\"a\"])({url:\"/bonus/audit/export\",method:\"get\",params:t})}function u(t){return Object(n[\"a\"])({url:\"/bonus/audit/audit\",method:\"post\",data:t})}function d(t){return Object(n[\"a\"])({url:\"/bonus/audit/getProcessId\",method:\"get\",params:t})}}}]);","extractedComments":[]}