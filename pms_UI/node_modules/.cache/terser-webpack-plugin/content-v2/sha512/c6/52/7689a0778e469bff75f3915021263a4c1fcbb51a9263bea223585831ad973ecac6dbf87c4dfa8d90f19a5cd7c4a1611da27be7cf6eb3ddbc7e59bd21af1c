{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-11d41735\"],{\"095c\":function(e,t,l){\"use strict\";var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",[this.uploadUrl?l(\"el-upload\",{ref:\"upload\",staticStyle:{display:\"none\"},attrs:{action:e.uploadUrl,\"on-success\":e.handleUploadSuccess,\"on-error\":e.handleUploadError,name:\"file\",\"show-file-list\":!1,headers:e.headers}}):e._e(),l(\"div\",{ref:\"editor\",staticClass:\"editor\",style:e.styles})],1)},i=[],o=(l(\"a9e3\"),l(\"99af\"),l(\"9339\")),a=l.n(o),r=(l(\"a7539\"),l(\"8096\"),l(\"14e1\"),l(\"5f87\")),s={name:\"Editor\",props:{value:{type:String,default:\"\"},height:{type:Number,default:null},minHeight:{type:Number,default:null},readOnly:{type:Boolean,default:!1},uploadUrl:{type:String,default:\"\"}},data:function(){return{headers:{Authorization:\"Bearer \"+Object(r[\"a\"])()},Quill:null,currentValue:\"\",options:{theme:\"snow\",bounds:document.body,debug:\"warn\",modules:{toolbar:[[\"bold\",\"italic\",\"underline\",\"strike\"],[\"blockquote\",\"code-block\"],[{list:\"ordered\"},{list:\"bullet\"}],[{indent:\"-1\"},{indent:\"+1\"}],[{size:[\"small\",!1,\"large\",\"huge\"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],[\"clean\"],[\"link\",\"image\",\"video\"]]},placeholder:\"请输入内容\",readOnly:this.readOnly}}},computed:{styles:function(){var e={};return this.minHeight&&(e.minHeight=\"\".concat(this.minHeight,\"px\")),this.height&&(e.height=\"\".concat(this.height,\"px\")),e}},watch:{value:{handler:function(e){e!==this.currentValue&&(this.currentValue=null===e?\"\":e,this.Quill&&this.Quill.pasteHTML(this.currentValue))},immediate:!0}},mounted:function(){this.init()},beforeDestroy:function(){this.Quill=null},methods:{init:function(){var e=this,t=this.$refs.editor;if(this.Quill=new a.a(t,this.options),this.uploadUrl){var l=this.Quill.getModule(\"toolbar\");l.addHandler(\"image\",(function(t){e.uploadType=\"image\",t?e.$refs.upload.$children[0].$refs.input.click():e.quill.format(\"image\",!1)})),l.addHandler(\"video\",(function(t){e.uploadType=\"video\",t?e.$refs.upload.$children[0].$refs.input.click():e.quill.format(\"video\",!1)}))}this.Quill.pasteHTML(this.currentValue),this.Quill.on(\"text-change\",(function(t,l,n){var i=e.$refs.editor.children[0].innerHTML,o=e.Quill.getText(),a=e.Quill;e.currentValue=i,e.$emit(\"input\",i),e.$emit(\"on-change\",{html:i,text:o,quill:a})})),this.Quill.on(\"text-change\",(function(t,l,n){e.$emit(\"on-text-change\",t,l,n)})),this.Quill.on(\"selection-change\",(function(t,l,n){e.$emit(\"on-selection-change\",t,l,n)})),this.Quill.on(\"editor-change\",(function(t){for(var l=arguments.length,n=new Array(l>1?l-1:0),i=1;i<l;i++)n[i-1]=arguments[i];e.$emit.apply(e,[\"on-editor-change\",t].concat(n))}))},handleUploadSuccess:function(e,t){var l=this.Quill;if(200==e.code){var n=l.getSelection().index;l.insertEmbed(n,\"image\",e.url),l.setSelection(n+1)}else this.$message.error(\"图片插入失败\")},handleUploadError:function(){this.$message.error(\"图片插入失败\")}}},c=s,u=(l(\"5e42\"),l(\"2877\")),d=Object(u[\"a\"])(c,n,i,!1,null,null,null);t[\"a\"]=d.exports},\"4d26\":function(e,t,l){},\"5e42\":function(e,t,l){\"use strict\";l(\"4d26\")},6851:function(e,t,l){\"use strict\";l.r(t);var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"el-dialog\",{attrs:{title:e.title,visible:e.openDialog,width:\"700px\",\"append-to-body\":\"\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.openDialog=t},close:e.handleDialogClose}},[l(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"80px\"}},[l(\"el-form-item\",{attrs:{label:\"主键\",prop:\"id\"}},[l(\"el-input\",{attrs:{placeholder:\"请输入主键\"},model:{value:e.form.id,callback:function(t){e.$set(e.form,\"id\",t)},expression:\"form.id\"}})],1),l(\"el-form-item\",{attrs:{label:\"消息标题\",prop:\"title\"}},[l(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入内容\"},model:{value:e.form.title,callback:function(t){e.$set(e.form,\"title\",t)},expression:\"form.title\"}})],1),l(\"el-form-item\",{attrs:{label:\"消息内容\"}},[l(\"editor\",{attrs:{\"min-height\":192},model:{value:e.form.content,callback:function(t){e.$set(e.form,\"content\",t)},expression:\"form.content\"}})],1),l(\"el-form-item\",{attrs:{label:\"消息访问路径\",prop:\"msgUrl\"}},[l(\"el-input\",{attrs:{placeholder:\"请输入消息访问路径\"},model:{value:e.form.msgUrl,callback:function(t){e.$set(e.form,\"msgUrl\",t)},expression:\"form.msgUrl\"}})],1),l(\"el-form-item\",{attrs:{label:\"接收用户id\",prop:\"receiveUserId\"}},[l(\"el-input\",{attrs:{placeholder:\"请输入接收用户id\"},model:{value:e.form.receiveUserId,callback:function(t){e.$set(e.form,\"receiveUserId\",t)},expression:\"form.receiveUserId\"}})],1),l(\"el-form-item\",{attrs:{label:\"发送用户id\",prop:\"sendUserId\"}},[l(\"el-input\",{attrs:{placeholder:\"请输入发送用户id\"},model:{value:e.form.sendUserId,callback:function(t){e.$set(e.form,\"sendUserId\",t)},expression:\"form.sendUserId\"}})],1),l(\"el-form-item\",{attrs:{label:\"发送时间\",prop:\"sendTime\"}},[l(\"el-date-picker\",{attrs:{clearable:\"\",size:\"small\",type:\"date\",\"value-format\":\"yyyy-MM-dd\",placeholder:\"选择发送时间\"},model:{value:e.form.sendTime,callback:function(t){e.$set(e.form,\"sendTime\",t)},expression:\"form.sendTime\"}})],1),l(\"el-form-item\",{attrs:{label:\"是否已读：1-已读,0-未读\",prop:\"isRead\"}},[l(\"el-input\",{attrs:{placeholder:\"请输入是否已读：1-已读,0-未读\"},model:{value:e.form.isRead,callback:function(t){e.$set(e.form,\"isRead\",t)},expression:\"form.isRead\"}})],1),l(\"el-form-item\",{attrs:{label:\"是否已读：1-已读,0-未读\",prop:\"delFlag\"}},[l(\"el-input\",{attrs:{placeholder:\"请输入是否已读：1-已读,0-未读\"},model:{value:e.form.delFlag,callback:function(t){e.$set(e.form,\"delFlag\",t)},expression:\"form.delFlag\"}})],1)],1),l(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[l(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitForm}},[e._v(\"确 定\")]),l(\"el-button\",{on:{click:e.cancel}},[e._v(\"取 消\")])],1)],1)},i=[],o=(l(\"a9e3\"),l(\"0503\")),a=l(\"095c\"),r={name:\"addEdit\",props:{open:{type:Boolean,default:!1},id:{type:[String,Number],default:\"\"}},watch:{id:{handler:function(e){this.reset(),e?(this.id=e,this.title=\"消息管理-编辑\",this.getDetailInfo()):(this.id=\"\",this.title=\"消息管理-新增\")},deep:!0,immediate:!0},open:{handler:function(e){this.openDialog=e},deep:!0}},components:{Editor:a[\"a\"]},data:function(){return{title:\"消息管理-新增\",openDialog:this.open,form:{},rules:{}}},created:function(){this.getList()},methods:{getDetailInfo:function(){var e=this;Object(o[\"d\"])(this.id).then((function(t){console.log(t),e.form=t.data}))},getList:function(){var e=this;this.loading=!0,Object(o[\"e\"])(this.queryParams).then((function(t){e.messageList=t.rows,e.total=t.total,e.loading=!1}))},handleDialogClose:function(){this.$emit(\"cancel\",!1)},cancel:function(){this.$emit(\"cancel\",!1)},reset:function(){this.form={id:null,title:null,content:null,msgUrl:null,receiveUserId:null,sendUserId:null,sendTime:null,isRead:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null},this.resetForm(\"form\")},submitForm:function(){var e=this;this.$refs[\"form\"].validate((function(t){t&&(null!=e.form.id?Object(o[\"g\"])(e.form).then((function(t){e.msgSuccess(\"修改成功\"),e.$emit(\"success\",!1)})):Object(o[\"a\"])(e.form).then((function(t){e.msgSuccess(\"新增成功\"),e.$emit(\"success\",!1)})))}))}}},s=r,c=l(\"2877\"),u=Object(c[\"a\"])(s,n,i,!1,null,null,null);t[\"default\"]=u.exports},b75a:function(e,t,l){\"use strict\";l.r(t);var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"app-container\"},[l(\"el-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.showSearch,expression:\"showSearch\"}],ref:\"queryForm\",attrs:{model:e.queryParams,inline:!0,\"label-width\":\"68px\"}},[l(\"el-form-item\",{attrs:{label:\"是否已读\",prop:\"isRead\"}},[l(\"el-select\",{staticStyle:{width:\"150px\"},attrs:{placeholder:\"是否已读\",clearable:\"\",size:\"small\"},model:{value:e.queryParams.isRead,callback:function(t){e.$set(e.queryParams,\"isRead\",t)},expression:\"queryParams.isRead\"}},e._l(e.statusOptions,(function(e){return l(\"el-option\",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),l(\"el-form-item\",[l(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:e.handleQuery}},[e._v(\"搜索\")]),l(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetQuery}},[e._v(\"重置\")])],1)],1),l(\"el-row\",{staticClass:\"mb8\",attrs:{gutter:10}},[l(\"right-toolbar\",{attrs:{showSearch:e.showSearch},on:{\"update:showSearch\":function(t){e.showSearch=t},\"update:show-search\":function(t){e.showSearch=t},queryTable:e.getList}})],1),l(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],ref:\"multipleTable\",attrs:{border:\"\",stripe:\"\",data:e.messageList,\"row-style\":e.rowStyle,\"row-class-name\":e.rowClassName},on:{\"selection-change\":e.handleSelectionChange,\"row-click\":e.rowClick}},[l(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),l(\"el-table-column\",{attrs:{sortable:\"\",label:\"消息标题\",align:\"left\",prop:\"title\"}}),l(\"el-table-column\",{attrs:{sortable:\"\",label:\"消息内容\",\"show-overflow-tooltip\":\"\",align:\"center\",prop:\"content\"}}),l(\"el-table-column\",{attrs:{sortable:\"\",label:\"发送人\",align:\"left\",prop:\"sendUserName\"}}),l(\"el-table-column\",{attrs:{sortable:\"\",label:\"发送时间\",align:\"center\",prop:\"sendTime\",width:\"180\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"span\",[e._v(e._s(e.parseTime(t.row.sendTime)))])]}}])}),l(\"el-table-column\",{attrs:{sortable:\"\",label:\"是否已读\",align:\"center\",prop:\"isRead\",formatter:e.statusFormat}}),l(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[l(\"el-button\",{attrs:{size:\"mini\",type:\"text\",icon:\"el-icon-edit\",title:\"详情\"},on:{click:function(l){return e.handleDetails(t.row)}}}),l(\"el-button\",{attrs:{size:\"mini\",type:\"text\",icon:\"el-icon-delete\",title:\"删除\"},on:{click:function(l){return e.handleDelete(t.row)}}})]}}])})],1),l(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{\"update:page\":function(t){return e.$set(e.queryParams,\"pageNum\",t)},\"update:limit\":function(t){return e.$set(e.queryParams,\"pageSize\",t)},pagination:e.getList}}),e.open?l(\"addEdit\",{attrs:{open:e.open,id:e.addEditId},on:{cancel:e.cancel,success:e.successSubmit}}):e._e()],1)},i=[],o=(l(\"d81d\"),l(\"7db0\"),l(\"d3b7\"),l(\"0503\")),a=l(\"6851\"),r=l(\"095c\"),s={name:\"Message\",components:{Editor:r[\"a\"],addEdit:a[\"default\"]},data:function(){return{loading:!0,exportLoading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,messageList:[],selectionRow:[],statusOptions:[],title:\"\",open:!1,queryParams:{pageNum:1,pageSize:30,title:null,content:null,isRead:null},form:{},rules:{}}},created:function(){var e=this;this.getList(),this.getDicts(\"sys_message_status\").then((function(t){e.statusOptions=t.data}))},methods:{handleDetails:function(e){console.log(e.id),this.$router.push({path:\"/message/showDetails\",query:{id:e.id}})},statusFormat:function(e){return this.selectDictLabel(this.statusOptions,e.isRead)},getList:function(){var e=this;this.loading=!0,Object(o[\"e\"])(this.queryParams).then((function(t){e.messageList=t.rows,e.total=t.total,e.loading=!1}))},successSubmit:function(e){this.open=e,this.getList()},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,title:null,content:null,msgUrl:null,receiveUserId:null,sendUserId:null,sendTime:null,isRead:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null},this.resetForm(\"form\")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm(\"queryForm\"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length,this.selectionRow=e},rowClick:function(e,t,l){var n=this.$refs.multipleTable,i=this.selectionRow.find((function(t){return t.rowIndex==e.rowIndex}));i&&1==this.selectionRow.length?n.toggleRowSelection(e,!1):(n.clearSelection(),n.toggleRowSelection(e))},rowStyle:function(e){var t=e.row,l=e.rowIndex;Object.defineProperty(t,\"rowIndex\",{value:l,writable:!0,enumerable:!1})},rowClassName:function(e){var t=e.row,l=(e.rowIndex,\"\"),n=this.selectionRow.find((function(e){return e.rowIndex===t.rowIndex}));return n&&(l=\"current-row \"),l},handleAdd:function(){this.open=!0,this.addEditId=\"\"},handleUpdate:function(e){this.reset();var t=e.id||this.ids[0];this.open=!0,this.addEditId=t,console.log(\"addEditId---\"+a[\"default\"])},submitForm:function(){var e=this;this.$refs[\"form\"].validate((function(t){t&&(null!=e.form.id?Object(o[\"g\"])(e.form).then((function(t){e.msgSuccess(\"修改成功\"),e.open=!1,e.getList()})):Object(o[\"a\"])(e.form).then((function(t){e.msgSuccess(\"新增成功\"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,l=e.id||this.ids;this.$confirm('是否确认删除消息管理编号为\"'+l+'\"的数据项?',\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){return Object(o[\"b\"])(l)})).then((function(){t.getList(),t.msgSuccess(\"删除成功\")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm(\"是否确认导出所有消息管理数据项?\",\"警告\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){return e.exportLoading=!0,Object(o[\"c\"])(t)})).then((function(t){e.download(t.msg),e.exportLoading=!1})).catch((function(){}))}}},c=s,u=l(\"2877\"),d=Object(u[\"a\"])(c,n,i,!1,null,null,null);t[\"default\"]=d.exports}}]);","extractedComments":[]}