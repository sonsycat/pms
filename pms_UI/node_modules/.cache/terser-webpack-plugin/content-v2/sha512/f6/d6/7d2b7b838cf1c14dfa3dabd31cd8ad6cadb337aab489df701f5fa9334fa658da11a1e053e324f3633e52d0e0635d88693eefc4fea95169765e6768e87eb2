{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-285cb414\"],{\"0e67\":function(e,t,o){\"use strict\";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",[e.dialogOpen?o(\"el-dialog\",{attrs:{title:\"提示\",visible:e.dialogOpen,width:\"500px\",\"close-on-click-modal\":!1,\"custom-class\":\"el-button--primary\",\"append-to-body\":\"\",\"before-close\":e.onClose},on:{\"update:visible\":function(t){e.dialogOpen=t}}},[o(\"ul\",[e._v(\"当前节点：\"+e._s(e.currActivity))]),o(\"el-row\",[o(\"el-form\",{ref:\"formItem\",attrs:{model:e.comment,\"label-width\":\"80px\"}},[o(\"el-col\",{attrs:{span:24}},[e.openDialog?o(\"el-form-item\",{attrs:{label:\"审核意见\",prop:\"comment\"}},[o(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入审核意见\"},model:{value:e.comment.comment,callback:function(t){e.$set(e.comment,\"comment\",t)},expression:\"comment.comment\"}})],1):e._e()],1),o(\"el-col\",{attrs:{span:24}},[e.openDialog2?o(\"staffSearch\",{attrs:{label:\"下节点审核人\",rules:e.assigneeRules,staffParams:e.comment,formItemProp:\"assignee\",inputProp:\"assigneepName\",userInfoList:e.userOptions},on:{\"update:staffParams\":function(t){e.comment=t},\"update:staff-params\":function(t){e.comment=t}}}):e._e()],1)],1)],1),o(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{on:{click:e.onClose}},[e._v(\"取 消\")]),o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.sureStaffClick}},[e._v(\"确 定\")])],1)],1):e._e(),e.showBaseInfoCard?o(\"el-card\",{staticClass:\"mb20 mt10\"},[o(\"ul\",[e._v(\"当前节点：\"+e._s(e.currActivity))]),o(\"el-row\",[o(\"el-form\",{ref:\"formItem\",attrs:{model:e.comment,\"label-width\":\"80px\"}},[o(\"el-col\",{attrs:{span:24}},[e.openDialog?o(\"el-form-item\",{attrs:{label:\"审核意见\",prop:\"comment\"}},[o(\"el-input\",{attrs:{type:\"textarea\",placeholder:\"请输入审核意见\"},model:{value:e.comment.comment,callback:function(t){e.$set(e.comment,\"comment\",t)},expression:\"comment.comment\"}})],1):e._e()],1),o(\"el-col\",{attrs:{span:12}},[e.openDialog2?o(\"staffSearch\",{attrs:{label:\"下节点审核人\",rules:e.assigneeRules,staffParams:e.comment,formItemProp:\"assignee\",inputProp:\"assigneepName\",userInfoList:e.userOptions},on:{handleStaff:e.handleStaff,\"update:staffParams\":function(t){e.comment=t},\"update:staff-params\":function(t){e.comment=t}}}):e._e()],1)],1)],1)],1):e._e()],1)},s=[],i=o(\"12df\"),r={name:\"addEdit\",components:{},props:{open:{type:Boolean,default:!1},open2:{type:Boolean,default:!1},comment:{type:Object,default:{}},userOptions:{type:Array,default:{}},showDialog:{type:Boolean,default:!1},showBaseInfo:{type:Boolean,default:!1}},data:function(){return{showBaseInfoCard:!1,dialogOpen:this.showDialog,openDialog:this.open,openDialog2:this.open2,userOptions2:this.userOptions,currActivity:null,proclnsId:null,assigneeRules:[{required:!0,message:\"下节点审核人不能为空\",trigger:[\"change\",\"blur\"]}]}},watch:{showBaseInfo:{handler:function(e){this.showBaseInfoCard=e},deep:!0,immediate:!0},showDialog:{handler:function(e){this.dialogOpen=e},deep:!0,immediate:!0},open:{handler:function(e){this.openDialog=e},deep:!0},open2:{handler:function(e){this.openDialog2=e},deep:!0},userOptions:{handler:function(e){this.userOptions2=e},deep:!0},\"comment.procedureId\":{handler:function(e){this.proclnsId=e,this.getList()},deep:!0,immediate:!0}},methods:{handleStaff:function(e){console.log(e),this.$emit(\"formItem\",e)},getList:function(){var e=this;if(null==this.proclnsId||\"\"==this.proclnsId);else{var t={procInsId:this.proclnsId,userId:this.$store.state.user.userInfo.userId};Object(i[\"b\"])(t).then((function(t){200==t.code?e.currActivity=t.data.activityName:e.msgError(t.msg)}))}},onClose:function(){this.$emit(\"update:showDialog\",!1)},sureStaffClick:function(){var e=this;this.$refs.formItem.validate((function(t){t&&(e.$emit(\"success\",e.comment),e.onClose())}))}},mounted:function(){}},a=r,c=o(\"2877\"),l=Object(c[\"a\"])(a,n,s,!1,null,null,null);t[\"default\"]=l.exports},\"12df\":function(e,t,o){\"use strict\";o.d(t,\"i\",(function(){return r})),o.d(t,\"j\",(function(){return a})),o.d(t,\"g\",(function(){return c})),o.d(t,\"h\",(function(){return l})),o.d(t,\"f\",(function(){return u})),o.d(t,\"b\",(function(){return d})),o.d(t,\"e\",(function(){return m})),o.d(t,\"a\",(function(){return p})),o.d(t,\"k\",(function(){return f})),o.d(t,\"c\",(function(){return h})),o.d(t,\"d\",(function(){return g}));var n=o(\"b775\"),s=o(\"2b0e\"),i=s[\"default\"].prototype.processUrl;function r(e){return Object(n[\"a\"])({url:\"/process/model/list\",method:\"get\",params:e})}function a(e){return Object(n[\"a\"])({url:\"\".concat(i,\"/api/wf/getMyProcesses?systemId=PMS\"),method:\"post\",params:e})}function c(e){return Object(n[\"a\"])({url:\"\".concat(i,\"/api/wf/todoList\"),method:\"post\",params:e})}function l(e){return Object(n[\"a\"])({url:\"\".concat(i,\"/api/wf/runningList\"),method:\"post\",params:e})}function u(e){return Object(n[\"a\"])({url:\"\".concat(i,\"/api/wf/historicList\"),method:\"post\",params:e})}function d(e){return Object(n[\"a\"])({url:\"\".concat(i,\"/api/wf/queryCurrActivity\"),method:\"post\",params:e})}function m(e){return Object(n[\"a\"])({url:\"/process/model/\"+e,method:\"get\"})}function p(e){return Object(n[\"a\"])({url:\"/process/model\",method:\"post\",data:e})}function f(e){return Object(n[\"a\"])({url:\"/process/model\",method:\"put\",data:e})}function h(e){return Object(n[\"a\"])({url:\"/process/model/\"+e,method:\"delete\"})}function g(e){return Object(n[\"a\"])({url:\"/process/model/export\",method:\"get\",params:e})}},\"36c7\":function(e,t,o){\"use strict\";o(\"57c4\")},\"3b86\":function(e,t,o){\"use strict\";o.d(t,\"a\",(function(){return s})),o.d(t,\"d\",(function(){return i})),o.d(t,\"c\",(function(){return r})),o.d(t,\"b\",(function(){return a}));var n=o(\"b775\");function s(e){return Object(n[\"a\"])({url:\"/evaluate/data/getAccountPersonIndex\",method:\"get\",params:e})}function i(e){return Object(n[\"a\"])({url:\"/evaluate/data/listAccountPersonBonus\",method:\"get\",params:e})}function r(e){return Object(n[\"a\"])({url:\"/evaluate/data/doctorListNotBonus\",method:\"get\",params:e})}function a(e){return Object(n[\"a\"])({url:\"/evaluate/data/deptList\",method:\"get\",params:e})}},\"57c4\":function(e,t,o){},\"986b\":function(e,t,o){\"use strict\";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"span\",[e.openDialog?o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-circle-check\"},on:{click:e.examineSubmitForm1}},[e._v(\"审核通过\")]):e._e(),e.openDialog?o(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-circle-check\"},on:{click:e.examineSubmitForm2}},[e._v(\"审核驳回\")]):e._e()],1)},s=[],i=(o(\"a9e3\"),o(\"e472\")),r={name:\"addEdit\",components:{},props:{id:{type:[String,Number],default:\"\"},proclnsIds:{type:[String,Number],default:\"\"},comment:{type:[String,Number],default:\"\"},assignee:{type:[String,Number],default:\"\"},open:{type:Boolean,default:!1}},data:function(){return{openDialog:this.open,id2:this.id,proclnsIds2:this.proclnsIds,comment2:this.comment,assignee2:this.assignee}},computed:{},watch:{open:{handler:function(e){this.openDialog=e},deep:!0},id:{handler:function(e){this.id2=e},deep:!0},proclnsIds:{handler:function(e){this.proclnsIds2=e},deep:!0},comment:{handler:function(e){this.comment2=e},deep:!0},assignee:{handler:function(e){this.assignee2=e},deep:!0}},mounted:function(){},methods:{examineSubmitForm1:function(){var e=this,t={id:this.id2,procedureId:this.proclnsIds2,comment:this.comment2,assignee:this.$store.state.user.userInfo.userId,auditState:\"2\"},o=this.saveLoading(\"审核中...\");Object(i[\"g\"])(t).then((function(t){200==t.code?(console.log(t),e.msgSuccess(\"审核成功\"),e.$emit(\"success\",!1)):e.msgError(t.msg),o.close()})).catch((function(){o.close()}))},examineSubmitForm2:function(){var e=this,t={id:this.id2,procedureId:this.proclnsIds2,comment:this.comment2,auditState:\"3\"},o=this.saveLoading(\"审核中...\");Object(i[\"g\"])(t).then((function(t){console.log(t),200==t.code?(e.msgSuccess(\"驳回成功\"),e.$emit(\"success\")):e.msgError(t.msg),o.close()})).catch((function(){o.close()}))},examineSubmitForm3:function(){var e=this,t={id:this.id2,procedureId:this.proclnsIds2,comment:this.comment2,auditState:\"4\"},o=this.saveLoading(\"审核中...\");Object(i[\"g\"])(t).then((function(t){200==t.code?(console.log(t),e.msgSuccess(\"终止成功\"),e.$emit(\"success\")):e.msgError(t.msg),o.close()})).catch((function(){o.close()}))}}},a=r,c=o(\"2877\"),l=Object(c[\"a\"])(a,n,s,!1,null,null,null);t[\"default\"]=l.exports},c466:function(e,t,o){\"use strict\";o.d(t,\"a\",(function(){return n})),o.d(t,\"b\",(function(){return s})),o.d(t,\"c\",(function(){return i}));o(\"792b\"),o(\"4360\");function n(){var e=new Date,t=e.getFullYear();return t+=\"\",t}function s(){var e=new Date,t=e.getFullYear(),o=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?\"0\"+e.getDate():e.getDate(),s=t+\"-\"+o+\"-\"+n;return s}function i(){var e=new Date,t=e.getFullYear(),o=(e.getMonth(),e.getMonth()+1);o<10&&(o=\"0\"+o);var n=t+\"-\"+o;return n}},d623:function(e,t,o){\"use strict\";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"el-dialog\",{attrs:{title:e.title,visible:e.openDialog,width:\"50%\",\"custom-class\":\"el-button--primary\",\"append-to-body\":\"\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.openDialog=t},close:e.handleDialogClose}},[o(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules,\"label-width\":\"80px\",inline:!0}},[o(\"el-row\",{attrs:{gutter:20}},[o(\"el-col\",{attrs:{span:24}},[o(\"el-form-item\",{attrs:{label:\"科室\",prop:\"deptCode\"}},[o(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{filterable:\"\",placeholder:\"请选择科室\"},on:{change:e.changeDept},model:{value:e.form.deptRoomCode,callback:function(t){e.$set(e.form,\"deptRoomCode\",t)},expression:\"form.deptRoomCode\"}},e._l(e.deptList,(function(e){return o(\"el-option\",{key:e.deptRoomCode,attrs:{label:e.deptRoomName,value:e.deptRoomCode}})})),1)],1),o(\"el-form-item\",[o(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:e.handleQuery}},[e._v(\"搜索\")]),o(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetQuery}},[e._v(\"重置\")])],1)],1),o(\"el-col\",{attrs:{span:12}},[o(\"el-card\",[o(\"el-col\",{attrs:{span:12}},[o(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[e._v(\"待选人员\")])]),o(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.indexListLoading,expression:\"indexListLoading\"}],staticStyle:{\"margin-top\":\"10px\"},attrs:{data:e.roleList,height:\"500px\",\"row-class-name\":e.tableRowClassName},on:{select:e.selectionProject,\"row-click\":e.rowClickWaitClass}},[o(\"el-table-column\",{attrs:{label:\"人员\",align:\"left\",prop:\"docName\",\"show-overflow-tooltip\":\"\"}})],1)],1)],1),o(\"el-col\",{staticClass:\"mb10\",attrs:{span:12}},[o(\"el-card\",[o(\"el-col\",{attrs:{span:12}},[o(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[e._v(\"已选人员\")])]),o(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.roleSelectedListLoading,expression:\"roleSelectedListLoading\"}],staticStyle:{\"margin-top\":\"10px\"},attrs:{data:e.roleSelectedList,height:\"500px\",\"row-class-name\":e.tableRowClassName},on:{\"row-click\":e.rowClickHasClass,select:e.selectionProjectDept}},[o(\"el-table-column\",{attrs:{label:\"人员\",align:\"left\",prop:\"docName\",\"show-overflow-tooltip\":\"\"}})],1)],1)],1)],1)],1),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.submitForm}},[e._v(\"保 存\")]),o(\"el-button\",{on:{click:e.cancel}},[e._v(\"取 消\")])],1)],1)},s=[],i=(o(\"a434\"),o(\"d81d\"),o(\"4de4\"),o(\"d3b7\"),o(\"caad\"),o(\"2532\"),o(\"3b86\")),r={name:\"select\",props:{openSelect:{type:Boolean,default:!1},deptCode:{type:String,default:null},actDate:{type:String,default:null},doctorList:{type:Array,default:[]}},data:function(){return{title:\"选择新增人员\",openDialog:this.openSelect,roleSelectedListLoading:!1,indexListLoading:!1,form:{docName:\"\"},rules:{},queryParamsIndex:{pageNum:1,pageSize:this.$store.state.settings.pageSize,compCode:this.$store.state.user.userInfo.deptId},queryParamsIndexSelected:{pageNum:1,pageSize:this.$store.state.settings.pageSize,compCode:this.$store.state.user.userInfo.deptId,setCode:null},roleList:[],roleSelectedList:[],deptList:[],docCodeList:[]}},created:function(){this.getList(this.deptCode),this.getDeptList(),this.deptRoomCode=\"\"},mounted:function(){},methods:{resetQuery:function(){this.form.deptRoomCode=\"\",this.deptRoomCode=\"\"},handleQuery:function(){this.getList(this.deptCode)},tableRowClassName:function(e){var t=e.row,o=e.rowIndex;t.index=o},selectionProject:function(e,t){this.rowClickWaitClass(e[0])},rowClickWaitClass:function(e){for(var t in this.roleSelectedList)if(e.docCode==this.roleSelectedList[t].docCode)return void this.msgError(\"此人员已有奖金数据，无法重复添加！\");var o=e.docCode,n=e.docName;this.roleSelectedList.push({docCode:o,docName:n}),this.roleList.splice(e.index,1)},selectionProjectDept:function(e,t){this.rowClickHasClass(e[0])},rowClickHasClass:function(e){for(var t in this.roleList)if(e.docCode==this.roleList[t].docCode)return void this.msgError(\"此人员奖金数据不允许删除！\");var o=e.docCode,n=e.docName;this.roleList.push({docCode:o,docName:n}),this.roleSelectedList.splice(e.index,1)},getList:function(){var e=this;Object(i[\"c\"])({deptCode:this.deptCode,actDate:this.actDate,deptRoomCode:this.deptRoomCode}).then((function(t){e.roleList=t.rows;var o=e.doctorList.map((function(e){return e.docCode}));e.roleList=e.roleList.filter((function(e){return!o.includes(e.docCode)}))}))},getDeptList:function(){var e=this;this.loading=!0,Object(i[\"b\"])().then((function(t){e.deptList=t.rows,e.loading=!1}))},handleDialogClose:function(){this.$emit(\"cancelSelect\",!1)},cancel:function(){this.$emit(\"cancelSelect\",!1)},submitForm:function(){this.$emit(\"docCodeList\",this.roleSelectedList),this.$emit(\"cancelSelect\",!1)},changeDept:function(e){this.deptRoomCode=e}}},a=r,c=(o(\"36c7\"),o(\"2877\")),l=Object(c[\"a\"])(a,n,s,!1,null,\"a13ecc5a\",null);t[\"default\"]=l.exports},e472:function(e,t,o){\"use strict\";o.d(t,\"f\",(function(){return s})),o.d(t,\"d\",(function(){return i})),o.d(t,\"a\",(function(){return r})),o.d(t,\"h\",(function(){return a})),o.d(t,\"b\",(function(){return c})),o.d(t,\"c\",(function(){return l})),o.d(t,\"g\",(function(){return u})),o.d(t,\"e\",(function(){return d}));var n=o(\"b775\");function s(e){return Object(n[\"a\"])({url:\"/bonus/audit/list\",method:\"get\",params:e})}function i(e){return Object(n[\"a\"])({url:\"/bonus/audit/\"+e,method:\"get\"})}function r(e){return Object(n[\"a\"])({url:\"/bonus/audit\",method:\"post\",data:e})}function a(e){return Object(n[\"a\"])({url:\"/bonus/audit\",method:\"put\",data:e})}function c(e){return Object(n[\"a\"])({url:\"/bonus/audit/\"+e,method:\"delete\"})}function l(e){return Object(n[\"a\"])({url:\"/bonus/audit/export\",method:\"get\",params:e})}function u(e){return Object(n[\"a\"])({url:\"/bonus/audit/audit\",method:\"post\",data:e})}function d(e){return Object(n[\"a\"])({url:\"/bonus/audit/getProcessId\",method:\"get\",params:e})}}}]);","extractedComments":[]}